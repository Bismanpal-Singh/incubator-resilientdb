#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: 01_functional_api</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d8/da9/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Requests_201__functional__api.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">01_functional_api</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md2886"></a>
autotoc_md2886</h2>
<p>layout: default title: "Functional API" parent: "Requests" </p>
<h2><a class="anchor" id="autotoc_md2887"></a>
nav_order: 1</h2>
<h1><a class="anchor" id="autotoc_md2888"></a>
Chapter 1: The Simplest Way - The Functional API</h1>
<p>Welcome to the world of <code>Requests</code>! If you need to get information from a website or interact with a web service using Python, <code>Requests</code> is your friendly helper.</p>
<p>Imagine you just want to quickly grab the content of a webpage, maybe check the latest news headlines from a site, or send a simple piece of data to an online service. How do you do that without getting bogged down in complex details?</p>
<p>That's where the <b>Functional API</b> of <code>Requests</code> comes in. It's the most straightforward way to start making web requests.</p>
<h2><a class="anchor" id="autotoc_md2889"></a>
What's the Functional API?</h2>
<p>Think of the Functional API as a set of handy, ready-to-use tools right at the top level of the <code>requests</code> library. You don't need to set anything up; you just call a function like <code>requests.get()</code> to fetch data or <code>requests.post()</code> to send data.</p>
<p><b>Analogy:</b> Ordering Takeout üçï</p>
<p>Using the Functional API is like using a generic food delivery app (like DoorDash or Uber Eats) to order a pizza from a place you've never ordered from before.</p>
<ol type="1">
<li>You open the app ( <code>import requests</code>).</li>
<li>You find the pizza place and tap "Order" (&lsquo;requests.get('pizza_place_url&rsquo;)<code>).</code></li>
<li><code> The app handles finding a driver, sending them to the restaurant, picking up the pizza, and delivering it to you (Requests does all the connection and fetching work).</code></li>
<li><code> You get your pizza (</code>Response` object).</li>
</ol>
<p>It's super convenient for a one-time order!</p>
<h2><a class="anchor" id="autotoc_md2890"></a>
Making Your First Request: <code>requests.get()</code></h2>
<p>The most common type of request is a <code>GET</code> request. It's what your web browser does every time you type a website address and hit Enter. It means "Please *get* me the content of this page."</p>
<p>Let's try it! First, make sure you have <code>requests</code> installed (<code>pip install requests</code>). Then, in your Python script or interactive session:</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> requests <span class="comment"># Import the library</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># The URL we want to get data from</span></div>
<div class="line">url = <span class="stringliteral">&#39;https://httpbin.org/get&#39;</span> <span class="comment"># A handy website for testing requests</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Use the functional API &#39;get&#39; function</span></div>
<div class="line">print(f<span class="stringliteral">&quot;Fetching data from: {url}&quot;</span>)</div>
<div class="line">response = requests.get(url)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Check if the request was successful (Status Code 200 means OK)</span></div>
<div class="line">print(f<span class="stringliteral">&quot;Status Code: {response.status_code}&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Print the first 200 characters of the content we received</span></div>
<div class="line">print(<span class="stringliteral">&quot;Response Content (first 200 chars):&quot;</span>)</div>
<div class="line">print(response.text[:200])</div>
</div><!-- fragment --><p><b>What happened here?</b></p>
<ol type="1">
<li><code>import requests</code>: We told Python we want to use the <code>requests</code> library.</li>
<li><code>response = requests.get(url)</code>: This is the core magic! We called the <code>get</code> function directly from the <code>requests</code> module, passing the URL we want to visit.</li>
<li><code>requests</code> did all the work: connected to the server, sent the <code>GET</code> request, and received the server's reply.</li>
<li>The reply is stored in the <code>response</code> variable. This isn't just the text of the page; it's a special <code>Response</code> object containing lots of useful information. We'll explore this more in <a class="el" href="../../dd/d7e/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Requests_202__request______response__models.html">Request &amp; Response Models</a>.</li>
<li><code>response.status_code</code>: We checked the status code. <code>200</code> is the standard code for "Everything went okay!". Other codes might indicate errors (like <code>404 Not Found</code>).</li>
<li><code>response.text</code>: We accessed the main content (usually HTML or JSON) returned by the server as a string.</li>
</ol>
<h2><a class="anchor" id="autotoc_md2891"></a>
Sending Data: <code>requests.post()</code></h2>
<p>Sometimes, instead of just getting data, you need to <em>send</em> data to a website. This is often done when submitting a form, logging in, or telling an API to perform an action. The <code>POST</code> method is commonly used for this.</p>
<p>The Functional API provides <code>requests.post()</code> for this purpose.</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> requests</div>
<div class="line"> </div>
<div class="line"><span class="comment"># The URL we want to send data to</span></div>
<div class="line">url = <span class="stringliteral">&#39;https://httpbin.org/post&#39;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># The data we want to send (like form fields)</span></div>
<div class="line"><span class="comment"># We&#39;ll use a Python dictionary</span></div>
<div class="line">payload = {<span class="stringliteral">&#39;username&#39;</span>: <span class="stringliteral">&#39;tutorial_user&#39;</span>, <span class="stringliteral">&#39;action&#39;</span>: <span class="stringliteral">&#39;learn_requests&#39;</span>}</div>
<div class="line"> </div>
<div class="line">print(f<span class="stringliteral">&quot;Sending data to: {url}&quot;</span>)</div>
<div class="line"><span class="comment"># Use the functional API &#39;post&#39; function, passing the data</span></div>
<div class="line">response = requests.post(url, data=payload)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Check the status code</span></div>
<div class="line">print(f<span class="stringliteral">&quot;Status Code: {response.status_code}&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># The response often echoes back the data we sent</span></div>
<div class="line">print(<span class="stringliteral">&quot;Response Content:&quot;</span>)</div>
<div class="line">print(response.text)</div>
</div><!-- fragment --><p><b>What's new?</b></p>
<ol type="1">
<li><code>payload = {...}</code>: We created a Python dictionary to hold the data we want to send.</li>
<li><code>response = requests.post(url, data=payload)</code>: We called <code>requests.post()</code>. Notice the second argument, <code>data=payload</code>. This tells <code>requests</code> to send our dictionary as form data in the body of the <code>POST</code> request.</li>
<li>The <code>response.text</code> from <code>httpbin.org/post</code> conveniently shows us the data it received, confirming our <code>payload</code> was sent correctly.</li>
</ol>
<p><code>Requests</code> also offers functions for other HTTP methods like <code>put</code>, <code>delete</code>, <code>head</code>, <code>patch</code>, and <code>options</code>, all working similarly: <code>requests.put(...)</code>, <code>requests.delete(...)</code>, etc.</p>
<h2><a class="anchor" id="autotoc_md2892"></a>
How It Works Under the Hood</h2>
<p>You might wonder: if it's so simple, how does <code>requests.get()</code> actually connect to the internet and manage the request?</p>
<p>Every time you call one of these functional API methods (like <code>requests.get</code> or <code>requests.post</code>), <code>Requests</code> performs a few steps behind the scenes:</p>
<ol type="1">
<li><b>Creates a temporary <code>Session</code> object:</b> Think of a <code>Session</code> as a more advanced way to manage requests, especially when you need to talk to the same website multiple times. We'll learn all about these in the <a class="el" href="../../dd/d2f/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Requests_203__session.html">Session</a> chapter. For a functional API call, <code>requests</code> creates a <em>brand new, temporary</em> <code>Session</code> just for this single request.</li>
<li><b>Uses the <code>Session</code>:</b> This temporary <code>Session</code> is then used to actually prepare and send your request (e.g., the <code>GET</code> to <code><a href="https://httpbin.org/get">https://httpbin.org/get</a></code>).</li>
<li><b>Gets the <code>Response</code>:</b> The <code>Session</code> receives the reply from the server.</li>
<li><b>Returns the <code>Response</code> to you:</b> The function gives you back the <code>Response</code> object.</li>
<li><b>Discards the <code>Session</code>:</b> The temporary <code>Session</code> is immediately thrown away. It's gone.</li>
</ol>
<p><b>Analogy Revisited:</b> The generic delivery app (Functional API) contacts <em>a</em> driver (creates a temporary <code>Session</code>), tells them the restaurant and your order (sends the request), the driver delivers the food (returns the <code>Response</code>), and then the app forgets about that specific driver (discards the <code>Session</code>). If you order again 5 minutes later, it starts the whole process over with potentially a different driver.</p>
<p>Here's a simplified diagram of what happens when you call <code>requests.get()</code>:</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant User as Your Code</div>
<div class="line">    participant FuncAPI as requests.get()</div>
<div class="line">    participant TempSession as Temporary Session</div>
<div class="line">    participant Server as Web Server</div>
<div class="line"> </div>
<div class="line">    User-&gt;&gt;FuncAPI: Call requests.get(&#39;url&#39;)</div>
<div class="line">    FuncAPI-&gt;&gt;TempSession: Create new Session()</div>
<div class="line">    activate TempSession</div>
<div class="line">    TempSession-&gt;&gt;Server: Make HTTP GET request to &#39;url&#39;</div>
<div class="line">    activate Server</div>
<div class="line">    Server--&gt;&gt;TempSession: Send HTTP Response back</div>
<div class="line">    deactivate Server</div>
<div class="line">    TempSession--&gt;&gt;FuncAPI: Return Response object</div>
<div class="line">    FuncAPI--&gt;&gt;User: Return Response object</div>
<div class="line">    deactivate TempSession</div>
<div class="line">    Note right of FuncAPI: Temporary Session is discarded</div>
</div><!-- fragment --><p>You can see a glimpse of this in the <code>requests/api.py</code> code:</p>
<div class="fragment"><div class="line"><span class="comment"># File: requests/api.py (Simplified view)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> . <span class="keyword">import</span> sessions <span class="comment"># Where the Session logic lives</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>request(method, url, **kwargs):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Internal function that handles all functional API calls.&quot;&quot;&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Creates a temporary Session just for this one call.</span></div>
<div class="line">    <span class="comment"># The &#39;with&#39; statement ensures it&#39;s properly closed afterwards.</span></div>
<div class="line">    <span class="keyword">with</span> sessions.Session() <span class="keyword">as</span> session:</div>
<div class="line">        <span class="comment"># The temporary session makes the actual request.</span></div>
<div class="line">        <span class="keywordflow">return</span> session.request(method=method, url=url, **kwargs)</div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span><a class="code hl_function" href="../../d7/da6/pybind__kv__service_8cpp.html#abe6524afb3a69dc9a4c314e11f96f29f">get</a>(url, params=None, **kwargs):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Sends a GET request (functional API).&quot;&quot;&quot;</span></div>
<div class="line">    <span class="comment"># This is just a convenient shortcut that calls the main &#39;request&#39; function.</span></div>
<div class="line">    <span class="keywordflow">return</span> request(<span class="stringliteral">&quot;get&quot;</span>, url, params=params, **kwargs)</div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span>post(url, data=None, json=None, **kwargs):</div>
<div class="line">    <span class="stringliteral">&quot;&quot;&quot;Sends a POST request (functional API).&quot;&quot;&quot;</span></div>
<div class="line">    <span class="comment"># Another shortcut calling the main &#39;request&#39; function.</span></div>
<div class="line">    <span class="keywordflow">return</span> request(<span class="stringliteral">&quot;post&quot;</span>, url, data=data, json=json, **kwargs)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># ... similar functions for put, delete, head, patch, options ...</span></div>
<div class="ttc" id="apybind__kv__service_8cpp_html_abe6524afb3a69dc9a4c314e11f96f29f"><div class="ttname"><a href="../../d7/da6/pybind__kv__service_8cpp.html#abe6524afb3a69dc9a4c314e11f96f29f">get</a></div><div class="ttdeci">std::string get(std::string key, std::string config_path)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/da6/pybind__kv__service_8cpp_source.html#l00039">pybind_kv_service.cpp:39</a></div></div>
</div><!-- fragment --><p>Each function like <code>get</code>, <code>post</code>, etc., is just a simple wrapper that calls the main <code>request</code> function, which in turn creates and uses that temporary <code>Session</code>.</p>
<h2><a class="anchor" id="autotoc_md2893"></a>
When Is It Good? When Is It Not?</h2>
<p><b>Good For:</b></p>
<ul>
<li>Simple, one-off requests.</li>
<li>Quick scripts where performance isn't critical.</li>
<li>Learning <code>Requests</code> - it's the easiest starting point!</li>
</ul>
<p><b>Not Ideal For:</b></p>
<ul>
<li><b>Multiple requests to the same website:</b> Creating and tearing down a connection and a <code>Session</code> for <em>every single request</em> is inefficient. It's like sending a separate delivery driver for each item you forgot from the grocery store.</li>
<li><b>Needing persistence:</b> If the website gives you a cookie (like after logging in) and you want to use it on your <em>next</em> request to that same site, the functional API won't remember it because the temporary <code>Session</code> (which holds cookies) is discarded after each call.</li>
<li><b>Fine-grained control:</b> If you need custom configurations, specific connection pooling, or advanced features, using a <code>Session</code> object directly offers more power.</li>
</ul>
<h2><a class="anchor" id="autotoc_md2894"></a>
Conclusion</h2>
<p>You've learned about the <code>Requests</code> Functional API ‚Äì the simplest way to make web requests using functions like <code>requests.get()</code> and <code>requests.post()</code>. It's perfect for quick tasks and getting started. You saw how it works by creating temporary <code>Session</code> objects behind the scenes.</p>
<p>While convenient for single shots, remember its limitations for performance and state persistence when dealing with multiple requests to the same site.</p>
<p>Now that you know how to <em>send</em> a basic request, what exactly do you get <em>back</em>? Let's explore the structure of the requests we send and the powerful <code>Response</code> object we receive.</p>
<p><b>Next:</b> <a class="el" href="../../dd/d7e/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Requests_202__request______response__models.html">Chapter 2: Request &amp; Response Models</a></p>
<hr  />
<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
