#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: 05_array_printing___arrayprint__</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d8/d35/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2NumPy_01Core_205__array__printing______arrayprint____.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">05_array_printing___arrayprint__</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md2522"></a>
autotoc_md2522</h2>
<p>layout: default title: "Array Printing (arrayprint)" parent: "NumPy Core" </p>
<h2><a class="anchor" id="autotoc_md2523"></a>
nav_order: 5</h2>
<h1><a class="anchor" id="autotoc_md2524"></a>
Chapter 5: Array Printing (<code>arrayprint</code>)</h1>
<p>In the previous chapter, <a class="el" href="../../d4/d1f/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2NumPy_01Core_204__numeric__types______numerictypes____.html">Chapter 4: Numeric Types (<code>numerictypes</code>)</a>, we explored the different kinds of data NumPy can store in its arrays, like <code>int32</code>, <code>float64</code>, and more. Now that we know about the arrays (<a class="el" href="../../de/d16/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2NumPy_01Core_201__ndarray____n__dimensional__array__.html"><code>ndarray</code></a>), their data types (<a class="el" href="../../d6/d31/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2NumPy_01Core_202__dtype____data__type__object__.html"><code>dtype</code></a>), the functions that operate on them (<a class="el" href="../../d6/def/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2NumPy_01Core_203__ufunc____universal__function__.html"><code>ufunc</code></a>), and the specific number types (<code>numerictypes</code>), a practical question arises: How do we actually <em>look</em> at these arrays, especially if they are very large?</p>
<h2><a class="anchor" id="autotoc_md2525"></a>
What Problem Does <code>arrayprint</code> Solve? Making Arrays Readable</h2>
<p>Imagine you have a NumPy array representing a large image, maybe with millions of pixel values. Or perhaps you have simulation data with thousands of temperature readings.</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Imagine this is a huge array, maybe thousands of numbers</span></div>
<div class="line">large_array = np.arange(2000)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># If Python just tried to print every single number...</span></div>
<div class="line"><span class="comment"># it would flood your screen and be impossible to read!</span></div>
<div class="line"><span class="comment"># print(list(large_array)) # &lt;-- Don&#39;t run this! It would be too long.</span></div>
</div><!-- fragment --><p>If NumPy just dumped <em>all</em> the numbers onto your screen whenever you tried to display a large array, it would be overwhelming and useless. We need a way to show the array's contents in a concise, human-friendly format. How can we get a <em>sense</em> of the array's data without printing every single element?</p>
<p>This is the job of NumPy's <b>array printing</b> mechanism, often referred to internally by the name of its main Python module, <code>arrayprint</code>.</p>
<h2><a class="anchor" id="autotoc_md2526"></a>
What is Array Printing (<code>arrayprint</code>)?</h2>
<p><code>arrayprint</code> is NumPy's <b>"pretty printer"</b> for <code>ndarray</code> objects. It's responsible for converting a NumPy array into a nicely formatted string representation that's easy to read and understand when you display it (e.g., in your Python console, Jupyter notebook, or using the <code>print()</code> function).</p>
<p>Think of it like getting a summary report instead of the raw database dump. <code>arrayprint</code> intelligently decides how to show the array, considering things like:</p>
<ul>
<li><b>Summarization:</b> For large arrays, it shows only the beginning and end elements, using ellipsis (<code>...</code>) to indicate the omitted parts.</li>
<li><b>Precision:</b> It controls how many decimal places are shown for floating-point numbers.</li>
<li><b>Line Wrapping:</b> It breaks long rows of data into multiple lines to fit within a certain width.</li>
<li><b>Special Values:</b> It uses consistent strings for "Not a Number" (<code>nan</code>) and infinity (<code>inf</code>).</li>
<li><b>Customization:</b> It allows you to change these settings to suit your needs.</li>
</ul>
<p>Let's see it in action with our <code>large_array</code>:</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div>
<div class="line"> </div>
<div class="line">large_array = np.arange(2000)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Let NumPy&#39;s array printing handle it</span></div>
<div class="line">print(large_array)</div>
</div><!-- fragment --><p><b>Output:</b></p>
<div class="fragment"><div class="line">[   0    1    2 ... 1997 1998 1999]</div>
</div><!-- fragment --><p>Instead of 2000 numbers flooding the screen, NumPy smartly printed only the first three and the last three, with <code>...</code> in between. This gives us a good idea of the array's contents (a sequence starting from 0) without being overwhelming.</p>
<h2><a class="anchor" id="autotoc_md2527"></a>
Key Features and Options</h2>
<p><code>arrayprint</code> has several options you can control to change how arrays are displayed.</p>
<h3><a class="anchor" id="autotoc_md2528"></a>
1. Summarization (<code>threshold</code> and <code>edgeitems</code>)</h3>
<ul>
<li><code>threshold</code>: The total number of array elements that triggers summarization. If the array's <code>size</code> is greater than <code>threshold</code>, the array gets summarized. (Default: 1000)</li>
<li><code>edgeitems</code>: When summarizing, this is the number of items shown at the beginning and end of each dimension. (Default: 3)</li>
</ul>
<p>Let's try printing a smaller array and then changing the threshold:</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div>
<div class="line"> </div>
<div class="line"><span class="comment"># An array with 10 elements</span></div>
<div class="line">arr = np.arange(10)</div>
<div class="line">print(<span class="stringliteral">&quot;Original:&quot;</span>)</div>
<div class="line">print(arr)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Temporarily set the threshold lower (e.g., 5)</span></div>
<div class="line"><span class="comment"># We use np.printoptions as a context manager for temporary settings</span></div>
<div class="line"><span class="keyword">with</span> np.printoptions(threshold=5):</div>
<div class="line">  print(<span class="stringliteral">&quot;\nWith threshold=5:&quot;</span>)</div>
<div class="line">  print(arr)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Change edgeitems too</span></div>
<div class="line"><span class="keyword">with</span> np.printoptions(threshold=5, edgeitems=2):</div>
<div class="line">  print(<span class="stringliteral">&quot;\nWith threshold=5, edgeitems=2:&quot;</span>)</div>
<div class="line">  print(arr)</div>
</div><!-- fragment --><p><b>Output:</b></p>
<div class="fragment"><div class="line">Original:</div>
<div class="line">[0 1 2 3 4 5 6 7 8 9]</div>
<div class="line"> </div>
<div class="line">With threshold=5:</div>
<div class="line">[0 1 2 ... 7 8 9]</div>
<div class="line"> </div>
<div class="line">With threshold=5, edgeitems=2:</div>
<div class="line">[0 1 ... 8 9]</div>
</div><!-- fragment --><p> You can see how lowering the <code>threshold</code> caused the array (size 10) to be summarized, and <code>edgeitems</code> controlled how many elements were shown at the ends.</p>
<h3><a class="anchor" id="autotoc_md2529"></a>
2. Floating-Point Precision (<code>precision</code> and <code>suppress</code>)</h3>
<ul>
<li><code>precision</code>: Controls the number of digits displayed after the decimal point for floats. (Default: 8)</li>
<li><code>suppress</code>: If <code>True</code>, prevents NumPy from using scientific notation for very small numbers and prints them as zero if they are smaller than the current precision. (Default: False)</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div>
<div class="line"> </div>
<div class="line"><span class="comment"># An array with floating-point numbers</span></div>
<div class="line">float_arr = np.array([0.123456789, 1.5e-10, 2.987])</div>
<div class="line">print(<span class="stringliteral">&quot;Default precision:&quot;</span>)</div>
<div class="line">print(float_arr)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Set precision to 3</span></div>
<div class="line"><span class="keyword">with</span> np.printoptions(precision=3):</div>
<div class="line">  print(<span class="stringliteral">&quot;\nWith precision=3:&quot;</span>)</div>
<div class="line">  print(float_arr)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Set precision to 3 and suppress small numbers</span></div>
<div class="line"><span class="keyword">with</span> np.printoptions(precision=3, suppress=<span class="keyword">True</span>):</div>
<div class="line">  print(<span class="stringliteral">&quot;\nWith precision=3, suppress=True:&quot;</span>)</div>
<div class="line">  print(float_arr)</div>
</div><!-- fragment --><p><b>Output:</b></p>
<div class="fragment"><div class="line">Default precision:</div>
<div class="line">[1.23456789e-01 1.50000000e-10 2.98700000e+00]</div>
<div class="line"> </div>
<div class="line">With precision=3:</div>
<div class="line">[1.235e-01 1.500e-10 2.987e+00]</div>
<div class="line"> </div>
<div class="line">With precision=3, suppress=True:</div>
<div class="line">[0.123 0.    2.987]</div>
</div><!-- fragment --><p> Notice how <code>precision</code> changed the rounding, and <code>suppress=True</code> made the very small number (<code>1.5e-10</code>) display as <code>0.</code> and switched from scientific notation to fixed-point for the others. There's also a <code>floatmode</code> option for more fine-grained control over float formatting (e.g., 'fixed', 'unique').</p>
<h3><a class="anchor" id="autotoc_md2530"></a>
3. Line Width (<code>linewidth</code>)</h3>
<ul>
<li><code>linewidth</code>: The maximum number of characters allowed per line before wrapping. (Default: 75)</li>
</ul>
<div class="fragment"><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div>
<div class="line"> </div>
<div class="line"><span class="comment"># A 2D array</span></div>
<div class="line">arr2d = np.arange(12).reshape(3, 4) * 0.1</div>
<div class="line">print(<span class="stringliteral">&quot;Default linewidth:&quot;</span>)</div>
<div class="line">print(arr2d)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Set a narrow linewidth</span></div>
<div class="line"><span class="keyword">with</span> np.printoptions(linewidth=30):</div>
<div class="line">  print(<span class="stringliteral">&quot;\nWith linewidth=30:&quot;</span>)</div>
<div class="line">  print(arr2d)</div>
</div><!-- fragment --><p><b>Output:</b></p>
<div class="fragment"><div class="line">Default linewidth:</div>
<div class="line">[[0.  0.1 0.2 0.3]</div>
<div class="line"> [0.4 0.5 0.6 0.7]</div>
<div class="line"> [0.8 0.9 1.  1.1]]</div>
<div class="line"> </div>
<div class="line">With linewidth=30:</div>
<div class="line">[[0.  0.1 0.2 0.3]</div>
<div class="line"> [0.4 0.5 0.6 0.7]</div>
<div class="line"> [0.8 0.9 1.  1.1]]</div>
</div><!-- fragment --><p> <em>(Note: The output might not actually wrap here because the lines are short. If the array was wider, you'd see the rows break across multiple lines with the narrower <code>linewidth</code> setting.)</em></p>
<h3><a class="anchor" id="autotoc_md2531"></a>
4. Other Options</h3>
<ul>
<li><code>nanstr</code>: String representation for Not a Number. (Default: 'nan')</li>
<li><code>infstr</code>: String representation for Infinity. (Default: 'inf')</li>
<li><code>sign</code>: Control sign display for floats ('-', '+', or ' ').</li>
<li><code>formatter</code>: A dictionary to provide completely custom formatting functions for specific data types (like bool, int, float, datetime, etc.). This is more advanced.</li>
</ul>
<h2><a class="anchor" id="autotoc_md2532"></a>
Using and Customizing Array Printing</h2>
<p>You usually interact with array printing implicitly just by displaying an array:</p>
<div class="fragment"><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div>
<div class="line">arr = np.linspace(0, 1, 5)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># These both use NumPy&#39;s array printing behind the scenes</span></div>
<div class="line">print(arr)         <span class="comment"># Calls __str__ -&gt; array_str -&gt; array2string</span></div>
<div class="line">arr                <span class="comment"># In interactive sessions, calls __repr__ -&gt; array_repr -&gt; array2string</span></div>
</div><!-- fragment --><p>To customize the output, you can use:</p>
<ol type="1">
<li><b><code>np.set_printoptions(...)</code>:</b> Sets options globally (for your entire Python session).</li>
<li><b><code>np.get_printoptions()</code>:</b> Returns a dictionary of the current settings.</li>
<li><b><code>np.printoptions(...)</code>:</b> A context manager to set options <em>temporarily</em> within a <code>with</code> block (as used in the examples above). This is often the preferred way to avoid changing settings permanently.</li>
<li><b><code>np.array2string(...)</code>:</b> A function to get the string representation directly, allowing you to override options just for that one call.</li>
</ol>
<div class="fragment"><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div>
<div class="line"><span class="keyword">import</span> sys <span class="comment"># Needed for sys.maxsize</span></div>
<div class="line"> </div>
<div class="line">arr = np.random.rand(10, 10) * 1000</div>
<div class="line"> </div>
<div class="line"><span class="comment"># --- Global Setting ---</span></div>
<div class="line">print(<span class="stringliteral">&quot;--- Setting threshold globally ---&quot;</span>)</div>
<div class="line">original_options = np.get_printoptions() <span class="comment"># Store original settings</span></div>
<div class="line">np.set_printoptions(threshold=50)</div>
<div class="line">print(arr)</div>
<div class="line">np.set_printoptions(**original_options) <span class="comment"># Restore original settings</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># --- Temporary Setting (Context Manager) ---</span></div>
<div class="line">print(<span class="stringliteral">&quot;\n--- Setting precision temporarily ---&quot;</span>)</div>
<div class="line"><span class="keyword">with</span> np.printoptions(precision=2, suppress=<span class="keyword">True</span>):</div>
<div class="line">    print(arr)</div>
<div class="line">print(<span class="stringliteral">&quot;\n--- Back to default precision ---&quot;</span>)</div>
<div class="line">print(arr) <span class="comment"># Options are automatically restored outside the &#39;with&#39; block</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># --- Direct Call with Overrides ---</span></div>
<div class="line">print(<span class="stringliteral">&quot;\n--- Using array2string with summarization off ---&quot;</span>)</div>
<div class="line"><span class="comment"># Use sys.maxsize to effectively disable summarization</span></div>
<div class="line">arr_string = np.array2string(arr, threshold=sys.maxsize, precision=1)</div>
<div class="line"><span class="comment"># print(arr_string) # This might still be very long! Let&#39;s just print the first few lines</span></div>
<div class="line">print(<span class="stringliteral">&#39;\n&#39;</span>.join(arr_string.splitlines()[:5]) + <span class="stringliteral">&#39;\n...&#39;</span>)</div>
</div><!-- fragment --><p><b>Output (will vary due to random numbers):</b></p>
<div class="fragment"><div class="line">--- Setting threshold globally ---</div>
<div class="line">[[992.84337197 931.73648142 119.68616987 ... 305.61919366 516.97897205</div>
<div class="line">  707.69140878]</div>
<div class="line"> [507.45895986 253.00740626 739.97091378 ... 755.69943511 813.11931119</div>
<div class="line">   19.84654589]</div>
<div class="line"> [941.25264871 689.43209981 820.11954711 ... 709.83933545 192.49837505</div>
<div class="line">  609.30358618]</div>
<div class="line"> ...</div>
<div class="line"> [498.86686503 872.79555956 401.19333028 ... 552.97492858 303.59379464</div>
<div class="line">  308.61881807]</div>
<div class="line"> [797.51920685 427.86020151 783.2019203  ... 511.63382762 322.52764881</div>
<div class="line">  778.22766019]</div>
<div class="line"> [ 54.84391309 938.24403397 796.7431406  ... 495.90873227 267.16620292</div>
<div class="line">  409.51491904]]</div>
<div class="line"> </div>
<div class="line">--- Setting precision temporarily ---</div>
<div class="line">[[992.84 931.74 119.69 ... 305.62 516.98 707.69]</div>
<div class="line"> [507.46 253.01 739.97 ... 755.7  813.12  19.85]</div>
<div class="line"> [941.25 689.43 820.12 ... 709.84 192.5  609.3 ]</div>
<div class="line"> ...</div>
<div class="line"> [498.87 872.8  401.19 ... 552.97 303.59 308.62]</div>
<div class="line"> [797.52 427.86 783.2  ... 511.63 322.53 778.23]</div>
<div class="line"> [ 54.84 938.24 796.74 ... 495.91 267.17 409.51]]</div>
<div class="line"> </div>
<div class="line">--- Back to default precision ---</div>
<div class="line">[[992.84337197 931.73648142 119.68616987 ... 305.61919366 516.97897205</div>
<div class="line">  707.69140878]</div>
<div class="line"> [507.45895986 253.00740626 739.97091378 ... 755.69943511 813.11931119</div>
<div class="line">   19.84654589]</div>
<div class="line"> [941.25264871 689.43209981 820.11954711 ... 709.83933545 192.49837505</div>
<div class="line">  609.30358618]</div>
<div class="line"> ...</div>
<div class="line"> [498.86686503 872.79555956 401.19333028 ... 552.97492858 303.59379464</div>
<div class="line">  308.61881807]</div>
<div class="line"> [797.51920685 427.86020151 783.2019203  ... 511.63382762 322.52764881</div>
<div class="line">  778.22766019]</div>
<div class="line"> [ 54.84391309 938.24403397 796.7431406  ... 495.90873227 267.16620292</div>
<div class="line">  409.51491904]]</div>
<div class="line"> </div>
<div class="line">--- Using array2string with summarization off ---</div>
<div class="line">[[992.8 931.7 119.7 922.  912.2 156.5 459.4 305.6 517.  707.7]</div>
<div class="line"> [507.5 253.  740.  640.3 420.3 652.1 197.  755.7 813.1  19.8]</div>
<div class="line"> [941.3 689.4 820.1 125.8 598.2 219.3 466.7 709.8 192.5 609.3]</div>
<div class="line"> [ 32.  855.2 362.1 434.9 133.5 148.1 522.6 725.1 395.5 377.9]</div>
<div class="line"> [332.7 782.2 587.3 320.3 905.5 412.8 378.  911.9 972.1 400.2]</div>
<div class="line">...</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2533"></a>
A Glimpse Under the Hood</h2>
<p>What happens when you call <code>print(my_array)</code>?</p>
<ol type="1">
<li>Python calls the <code>__str__</code> method of the <code>ndarray</code> object.</li>
<li>NumPy's <code>ndarray.__str__</code> method typically calls the internal function <code>_array_str_implementation</code>.</li>
<li><code>_array_str_implementation</code> checks for simple cases (like 0-dimensional arrays) and then calls the main workhorse: <code>array2string</code>.</li>
<li><b><code>array2string</code></b> (defined in <code>numpy/core/arrayprint.py</code>) takes the array and any specified options (like <code>precision</code>, <code>threshold</code>, etc.). It also reads the current default print options (managed by <code>numpy/core/printoptions.py</code> using context variables).</li>
<li>It determines if the array needs <b>summarization</b> based on its <code>size</code> and the <code>threshold</code> option.</li>
<li>It figures out the <b>correct formatting function</b> for the array's <code>dtype</code> (e.g., <code>IntegerFormat</code>, <code>FloatingFormat</code>, <code>DatetimeFormat</code>). These formatters handle details like precision, sign, and scientific notation for individual elements. <code>FloatingFormat</code>, for example, might use the efficient <code>dragon4</code> algorithm (implemented in C) to convert floats to strings accurately.</li>
<li>It recursively processes the array's dimensions:<ul>
<li>For each element (or summarized chunk), it calls the chosen formatting function to get its string representation.</li>
<li>It arranges these strings, adding separators (like spaces or commas) and brackets (<code>[</code> <code>]</code>).</li>
<li>It checks the <code>linewidth</code> and inserts line breaks and indentation as needed.</li>
<li>If summarizing, it inserts the ellipsis (<code>...</code>) string (<code>summary_insert</code>).</li>
</ul>
</li>
<li>Finally, <code>array2string</code> returns the complete, formatted string representation of the array.</li>
</ol>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant User</div>
<div class="line">    participant Python as print() / REPL</div>
<div class="line">    participant NDArray as my_array object</div>
<div class="line">    participant ArrayPrint as numpy.core.arrayprint module</div>
<div class="line">    participant PrintOpts as numpy.core.printoptions module</div>
<div class="line"> </div>
<div class="line">    User-&gt;&gt;Python: print(my_array) or my_array</div>
<div class="line">    Python-&gt;&gt;NDArray: call __str__ or __repr__</div>
<div class="line">    NDArray-&gt;&gt;ArrayPrint: call array_str or array_repr</div>
<div class="line">    ArrayPrint-&gt;&gt;ArrayPrint: call array2string(my_array, ...)</div>
<div class="line">    ArrayPrint-&gt;&gt;PrintOpts: Get current print options (threshold, precision, etc.)</div>
<div class="line">    ArrayPrint-&gt;&gt;ArrayPrint: Check size vs threshold -&gt; Summarize?</div>
<div class="line">    ArrayPrint-&gt;&gt;ArrayPrint: Select Formatter based on my_array.dtype</div>
<div class="line">    loop For each element/chunk</div>
<div class="line">        ArrayPrint-&gt;&gt;ArrayPrint: Format element using Formatter</div>
<div class="line">    end</div>
<div class="line">    ArrayPrint-&gt;&gt;ArrayPrint: Arrange strings, add brackets, wrap lines</div>
<div class="line">    ArrayPrint--&gt;&gt;NDArray: Return formatted string</div>
<div class="line">    NDArray--&gt;&gt;Python: Return formatted string</div>
<div class="line">    Python--&gt;&gt;User: Display formatted string</div>
</div><!-- fragment --><p>The core logic resides in <code>numpy/core/arrayprint.py</code>. This file contains <code>array2string</code>, <code>array_repr</code>, <code>array_str</code>, and various formatter classes (<code>FloatingFormat</code>, <code>IntegerFormat</code>, <code>BoolFormat</code>, <code>ComplexFloatingFormat</code>, <code>DatetimeFormat</code>, <code>TimedeltaFormat</code>, <code>StructuredVoidFormat</code>, etc.). The global print options themselves are managed using Python's <code>contextvars</code> in <code>numpy/core/printoptions.py</code>, allowing settings to be changed globally or temporarily within a context.</p>
<h2><a class="anchor" id="autotoc_md2534"></a>
Conclusion</h2>
<p>You've now learned how NumPy takes potentially huge and complex arrays and turns them into readable string representations using its <code>arrayprint</code> mechanism. Key takeaways:</p>
<ul>
<li><code>arrayprint</code> is NumPy's "pretty printer" for arrays.</li>
<li>It uses <b>summarization</b> (<code>threshold</code>, <code>edgeitems</code>) for large arrays.</li>
<li>It controls <b>formatting</b> (like <code>precision</code>, <code>suppress</code> for floats) and <b>layout</b> (<code>linewidth</code>).</li>
<li>You can customize printing <b>globally</b> (<code>set_printoptions</code>), <b>temporarily</b> (<code>printoptions</code> context manager), or for <b>single calls</b> (<code>array2string</code>).</li>
<li>The core logic resides in <code>numpy/core/arrayprint.py</code>, using formatters tailored to different dtypes and reading options from <code>numpy/core/printoptions.py</code>.</li>
</ul>
<p>Understanding array printing helps you effectively inspect and share your NumPy data.</p>
<p>Next, we'll start looking at the specific C and Python modules that form the core of NumPy's implementation, beginning with the central <a class="el" href="../../db/d8b/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2NumPy_01Core_206__multiarray__module.html">Chapter 6: multiarray Module</a>.</p>
<hr  />
<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
