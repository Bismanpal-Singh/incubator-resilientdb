#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: 03_a2a_protocol___core_types</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d8/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Google_01A2A_203__a2a__protocol______core__types.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">03_a2a_protocol___core_types</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md1978"></a>
autotoc_md1978</h2>
<p>layout: default title: "A2A Protocol &amp; Core Types" parent: "Google A2A" </p>
<h2><a class="anchor" id="autotoc_md1979"></a>
nav_order: 3</h2>
<h1><a class="anchor" id="autotoc_md1980"></a>
Chapter 3: A2A Protocol &amp; Core Types</h1>
<p>In the previous chapters, we learned how to find an agent using its <a class="el" href="../../d7/d4e/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Google_01A2A_201__agent__card.html">Agent Card</a> and how to give it work using a <a class="el" href="../../d2/d9c/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Google_01A2A_202__task.html">Task</a>. Think of it like finding a specific workshop (Agent Card) and submitting a work order (Task).</p>
<p>But how do the client (who submits the order) and the agent (the workshop) actually <em>talk</em> to each other? What language do they use? If the client writes the order in English, but the workshop only understands Spanish, nothing will get done!</p>
<p>This chapter tackles that problem: <b>How do different AI agents, possibly built by different teams using different technologies, communicate reliably?</b></p>
<p>The answer lies in the <b>A2A Protocol</b> and its <b>Core Types</b>.</p>
<h2><a class="anchor" id="autotoc_md1981"></a>
What is a Protocol? The Rules of the Road</h2>
<p>Imagine trying to drive in a country where you don't know the traffic rules. Do you drive on the left or right? What do the signs mean? It would be chaos! Traffic rules are a <b>protocol</b> – a shared set of rules everyone agrees on so things run smoothly.</p>
<p>Similarly, the <b>A2A Protocol</b> is the set of rules for how AI agents communicate. It defines:</p>
<ol type="1">
<li><b>The Transport:</b> <em>How</em> messages physically travel (usually over the internet using standard HTTP requests, like your web browser uses).</li>
<li><b>The Format:</b> <em>What</em> the messages look like (the structure and language used).</li>
<li><b>The Actions:</b> <em>What</em> commands one agent can send to another (like "start a task" or "cancel a task").</li>
</ol>
<p>Think of it as the <b>shared language</b> for AI agents. Just like humans use languages like English or Spanish, which have grammar (rules) and vocabulary (words), the A2A protocol provides the grammar and vocabulary for agents.</p>
<h2><a class="anchor" id="autotoc_md1982"></a>
The Grammar: JSON-RPC 2.0</h2>
<p>For the A2A protocol, the chosen "grammar" is a standard called <b>JSON-RPC 2.0</b>. Don't let the name scare you! It's just a simple way to structure messages using JSON (JavaScript Object Notation - a very common text format for data).</p>
<p>Here's the basic idea:</p>
<ul>
<li><b>Client sends a Request:</b> The client wanting the agent to do something sends a <code>Request</code> message.</li>
<li><b>Agent sends a Response:</b> The agent replies with a <code>Response</code> message.</li>
</ul>
<p>A typical JSON-RPC Request looks like this:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;jsonrpc&quot;: &quot;2.0&quot;,        // Specifies the protocol version</div>
<div class="line">  &quot;method&quot;: &quot;some_action&quot;, // What the client wants the agent to DO</div>
<div class="line">  &quot;params&quot;: { ... },       // The details needed for the action</div>
<div class="line">  &quot;id&quot;: &quot;request-123&quot;      // A unique ID to match request and response</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ul>
<li><code>jsonrpc</code>: Always "2.0".</li>
<li><code>method</code>: The name of the command or function the client wants the agent to run (like <code>tasks/send</code> from Chapter 2).</li>
<li><code>params</code>: The input data needed for that command (like the text to translate). This can be an object <code>{}</code> or a list <code>[]</code>.</li>
<li><code>id</code>: A unique identifier the client makes up.</li>
</ul>
<p>The agent then processes this request and sends back a Response matching that <code>id</code>:</p>
<p><b>Success Response:</b></p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</div>
<div class="line">  &quot;result&quot;: { ... },      // The output/result of the action</div>
<div class="line">  &quot;id&quot;: &quot;request-123&quot;     // The SAME ID as the request</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Error Response:</b></p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</div>
<div class="line">  &quot;error&quot;: {             // Details about what went wrong</div>
<div class="line">    &quot;code&quot;: -32601,</div>
<div class="line">    &quot;message&quot;: &quot;Method not found&quot;</div>
<div class="line">  },</div>
<div class="line">  &quot;id&quot;: &quot;request-123&quot;     // The SAME ID as the request (or null if error was severe)</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ul>
<li>If the action worked, the response includes a <code>result</code> field containing the output.</li>
<li>If something went wrong, it includes an <code>error</code> field with a numeric <code>code</code> and a descriptive <code>message</code>.</li>
<li>Crucially, the <code>id</code> matches the request, so the client knows which request this response belongs to.</li>
</ul>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant C as Client App</div>
<div class="line">    participant A as Agent Server</div>
<div class="line"> </div>
<div class="line">    C-&gt;&gt;A: JSON-RPC Request (id: &quot;req-abc&quot;, method: &quot;tasks/send&quot;, params: {...})</div>
<div class="line">    Note right of A: Agent parses JSON, finds method &#39;tasks/send&#39;</div>
<div class="line"> </div>
<div class="line">    alt Action Successful</div>
<div class="line">        A--&gt;&gt;C: JSON-RPC Response (id: &quot;req-abc&quot;, result: {Task Object})</div>
<div class="line">    else Action Failed</div>
<div class="line">        A--&gt;&gt;C: JSON-RPC Response (id: &quot;req-abc&quot;, error: {code:..., message:...})</div>
<div class="line">    end</div>
<div class="line">    Note left of C: Client matches response &#39;id&#39; to original request</div>
</div><!-- fragment --><p>This simple request/response structure using JSON-RPC is the foundation of how A2A agents talk.</p>
<h2><a class="anchor" id="autotoc_md1983"></a>
The Vocabulary: Core Data Types</h2>
<p>If JSON-RPC is the grammar, then the <b>Core Types</b> are the standard vocabulary – the specific kinds of "words" or data structures used within the <code>params</code> and <code>result</code> fields. We've already seen some of these!</p>
<p>Let's recap the most important ones:</p>
<ul>
<li><b><code>AgentCard</code></b>: (<a class="el" href="../../d7/d4e/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Google_01A2A_201__agent__card.html">Chapter 1</a>) The agent's profile. Describes its name, skills, and communication endpoint (<code>url</code>). Found in <code>/.well-known/agent.json</code>.<ul>
<li>Defined in: <code>samples/js/src/schema.ts:AgentCard</code>, <code>samples/python/common/types.py:AgentCard</code></li>
</ul>
</li>
<li><b><code>Task</code></b>: (<a class="el" href="../../d2/d9c/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Google_01A2A_202__task.html">Chapter 2</a>) The work order. Contains the unique <code>id</code>, current <code>status</code>, final <code>artifacts</code> (results), etc.<ul>
<li>Defined in: <code>samples/python/common/types.py:Task</code>, <code>samples/js/src/schema.ts:Task</code></li>
</ul>
</li>
<li><b><code>Message</code></b>: Represents one turn in the conversation (either from the <code>user</code> or the <code>agent</code>). Contains one or more <code>Parts</code>.<ul>
<li>Defined in: <code>samples/python/common/types.py:Message</code>, <code>samples/js/src/schema.ts:Message</code></li>
</ul>
</li>
<li><b><code>Part</code></b>: The actual content within a <code>Message</code> or <code>Artifact</code>. This is how we send different kinds of data:<ul>
<li><code>TextPart</code>: For plain text.</li>
<li><code>FilePart</code>: For files (either included directly as encoded text (<code>bytes</code>) or as a link (<code>uri</code>)).</li>
<li><code>DataPart</code>: For structured JSON data (like filling out a form).</li>
<li>Defined in: <code>samples/python/common/types.py:Part</code>, <code>samples/js/src/schema.ts:Part</code></li>
</ul>
</li>
<li><b><code>Artifact</code></b>: Represents an output generated by the agent during a <code>Task</code>. It also contains <code>Parts</code>. For example, if a Task was "create a presentation about cats", an Artifact might be a <code>FilePart</code> containing the presentation file.<ul>
<li>Defined in: <code>samples/python/common/types.py:Artifact</code>, <code>samples/js/src/schema.ts:Artifact</code></li>
</ul>
</li>
<li><b><code>TaskStatus</code></b>: Holds the current progress state of a <code>Task</code>. Includes the <code>state</code> itself and a <code>timestamp</code>.<ul>
<li>Defined in: <code>samples/python/common/types.py:TaskStatus</code>, <code>samples/js/src/schema.ts:TaskStatus</code></li>
</ul>
</li>
<li><b><code>TaskState</code></b>: The specific state within <code>TaskStatus</code>. Common values are: <code>submitted</code>, <code>working</code>, <code>completed</code>, <code>failed</code>, <code>canceled</code>.<ul>
<li>Defined in: <code>samples/python/common/types.py:TaskState</code>, <code>samples/js/src/schema.ts:TaskState</code></li>
</ul>
</li>
</ul>
<p><b>Example: Building a <code>Message</code></b></p>
<p>Let's say the user wants to send the text "Translate 'hello' to French". This would be structured as a <code>Message</code> containing a <code>TextPart</code>:</p>
<div class="fragment"><div class="line">// This structure would go inside the &quot;params&quot; of a tasks/send request</div>
<div class="line">{</div>
<div class="line">  &quot;role&quot;: &quot;user&quot;, // Who is sending this message</div>
<div class="line">  &quot;parts&quot;: [      // List of content parts (here, just one)</div>
<div class="line">    {</div>
<div class="line">      &quot;type&quot;: &quot;text&quot;, // Specifies this is a TextPart</div>
<div class="line">      &quot;text&quot;: &quot;Translate &#39;hello&#39; to French&quot;</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>If the user also wanted to attach a document for translation, the <code>parts</code> list would have two items: a <code>TextPart</code> with instructions and a <code>FilePart</code> with the document.</p>
<h2><a class="anchor" id="autotoc_md1984"></a>
Putting It Together: The <code>tasks/send</code> Example</h2>
<p>Remember the <code>tasks/send</code> request from Chapter 2? Let's look at the full JSON-RPC structure that the client sends over HTTP:</p>
<div class="fragment"><div class="line">// Client Sends This (HTTP POST body to Agent&#39;s URL)</div>
<div class="line">{</div>
<div class="line">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</div>
<div class="line">  &quot;method&quot;: &quot;tasks/send&quot;, // The action: start/continue a task</div>
<div class="line">  &quot;params&quot;: {            // The details (TaskSendParams structure)</div>
<div class="line">    &quot;id&quot;: &quot;task-xyz-789&quot;, // Unique Task ID</div>
<div class="line">    &quot;message&quot;: {         // The user&#39;s message</div>
<div class="line">      &quot;role&quot;: &quot;user&quot;,</div>
<div class="line">      &quot;parts&quot;: [</div>
<div class="line">        {</div>
<div class="line">          &quot;type&quot;: &quot;text&quot;,</div>
<div class="line">          &quot;text&quot;: &quot;Translate &#39;hello&#39; to French&quot;</div>
<div class="line">        }</div>
<div class="line">      ]</div>
<div class="line">    }</div>
<div class="line">    // Other optional params like sessionId could go here</div>
<div class="line">  },</div>
<div class="line">  &quot;id&quot;: &quot;client-req-001&quot; // Unique ID for *this specific request*</div>
<div class="line">}</div>
</div><!-- fragment --><p>If the agent accepts the task, it sends back a success response containing the initial <code>Task</code> object:</p>
<div class="fragment"><div class="line">// Agent Sends This Back (HTTP Response body)</div>
<div class="line">{</div>
<div class="line">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</div>
<div class="line">  &quot;result&quot;: {          // The result: a Task object</div>
<div class="line">    &quot;id&quot;: &quot;task-xyz-789&quot;, // The same Task ID</div>
<div class="line">    &quot;status&quot;: {        // The initial status</div>
<div class="line">      &quot;state&quot;: &quot;submitted&quot;,</div>
<div class="line">      &quot;timestamp&quot;: &quot;2023-10-27T10:00:00Z&quot;</div>
<div class="line">    },</div>
<div class="line">    &quot;artifacts&quot;: null, // No results yet</div>
<div class="line">    &quot;history&quot;: null    // History might be omitted initially</div>
<div class="line">    // Other Task fields</div>
<div class="line">  },</div>
<div class="line">  &quot;id&quot;: &quot;client-req-001&quot; // Matches the request ID</div>
<div class="line">}</div>
</div><!-- fragment --><p>This exchange uses the JSON-RPC grammar (<code>method</code>, <code>params</code>, <code>result</code>, <code>id</code>) and the A2A vocabulary (<code>Task</code>, <code>Message</code>, <code>Part</code>, <code>TaskStatus</code>, <code>TaskState</code>) to communicate clearly.</p>
<h2><a class="anchor" id="autotoc_md1985"></a>
Handling Mistakes: Errors in the Protocol</h2>
<p>What if the client sends a request for a method the agent doesn't understand, like <code>tasks/make_coffee</code>? The agent would respond with a JSON-RPC error:</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;jsonrpc&quot;: &quot;2.0&quot;,</div>
<div class="line">  &quot;error&quot;: {</div>
<div class="line">    &quot;code&quot;: -32601, // Standard JSON-RPC code for &quot;Method not found&quot;</div>
<div class="line">    &quot;message&quot;: &quot;Method not found: tasks/make_coffee&quot;</div>
<div class="line">  },</div>
<div class="line">  &quot;id&quot;: &quot;client-req-002&quot;</div>
<div class="line">}</div>
</div><!-- fragment --><p>The A2A protocol also defines some specific error codes for common agent issues:</p>
<ul>
<li><code>-32001</code>: <code>Task Not Found</code> (e.g., client asks for status of a task ID that doesn't exist)</li>
<li><code>-32002</code>: <code>Task Not Cancelable</code> (e.g., trying to cancel an already completed task)</li>
<li><code>-32004</code>: <code>Unsupported Operation</code></li>
</ul>
<p>These standard errors help clients understand what went wrong in a predictable way. You can find definitions in the schema files:</p>
<ul>
<li><code>samples/js/src/schema.ts</code> (search for <code>ErrorCode</code>)</li>
<li><code>samples/python/common/types.py</code> (search for error classes like <code>MethodNotFoundError</code>, <code>TaskNotFoundError</code>)</li>
</ul>
<h2><a class="anchor" id="autotoc_md1986"></a>
Conclusion</h2>
<p>The A2A Protocol acts as the universal translator for AI agents. By defining:</p>
<ol type="1">
<li>A common <b>grammar</b> (JSON-RPC 2.0) for structuring requests and responses.</li>
<li>A standard <b>vocabulary</b> (Core Types like <code>Task</code>, <code>Message</code>, <code>Part</code>, <code>Artifact</code>) for the data being exchanged.</li>
</ol>
<p>...it allows agents built by anyone, using any framework, to communicate and collaborate effectively. It ensures that when one agent asks another to do something, the request is understood, progress can be tracked, and results can be returned in a predictable format.</p>
<p>Now that we understand the language agents speak, let's see how to build an agent that can actually listen and respond using this protocol.</p>
<p><b>Next:</b> <a class="el" href="../../d6/dcb/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Google_01A2A_204__a2a__server__implementation.html">Chapter 4: A2A Server Implementation</a></p>
<hr  />
<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
