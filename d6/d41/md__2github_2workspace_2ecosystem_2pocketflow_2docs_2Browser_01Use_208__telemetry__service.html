#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: 08_telemetry_service</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d6/d41/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_208__telemetry__service.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">08_telemetry_service</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md939"></a>
autotoc_md939</h2>
<p>layout: default title: "Telemetry Service" parent: "Browser Use" </p>
<h2><a class="anchor" id="autotoc_md940"></a>
nav_order: 8</h2>
<h1><a class="anchor" id="autotoc_md941"></a>
Chapter 8: Telemetry Service - Helping Improve the Project (Optional)</h1>
<p>In the <a class="el" href="../../dc/db2/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_207__data__structures____views__.html">previous chapter</a>, we explored the essential blueprints (<code>Data Structures (Views)</code>) that keep communication clear and consistent between all the parts of <code>Browser Use</code>. We saw how components like the <a class="el" href="../../de/d8f/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_201__agent.html">Agent</a> and the <a class="el" href="../../de/dc1/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_205__action__controller______registry.html">Action Controller &amp; Registry</a> use these blueprints to exchange information reliably.</p>
<p>Now, let's think about the project itself. How do the developers who build <code>Browser Use</code> know if it's working well for users? How do they find out about common errors or which features are most popular, so they can make the tool better?</p>
<h2><a class="anchor" id="autotoc_md942"></a>
What Problem Does the Telemetry Service Solve?</h2>
<p>Imagine you released a new tool, like <code>Browser Use</code>. You want it to be helpful, but you don't know how people are actually using it. Are they running into unexpected errors? Are certain actions (like clicking vs. scrolling) causing problems? Is the performance okay? Without some feedback, it's hard to know where to focus improvements.</p>
<p>One way to get feedback is through bug reports or feature requests, but that only captures a small fraction of user experiences. We need a way to get a broader, anonymous picture of how the tool is performing "in the wild."</p>
<p>The <b>Telemetry Service</b> solves this by providing an <em>optional</em> and <em>anonymous</em> way to send basic usage statistics back to the project developers. Think of it like an anonymous suggestion box or an automatic crash report that doesn't include any personal information.</p>
<p><b>Crucially:</b> This service is designed to protect user privacy. It doesn't collect website content, personal data, or anything sensitive. It only sends anonymous statistics about the tool's operation, and <b>it can be completely disabled</b>.</p>
<h2><a class="anchor" id="autotoc_md943"></a>
Meet <code>ProductTelemetry</code>: The Anonymous Reporter</h2>
<p>The component responsible for this is the <code>ProductTelemetry</code> service, found in <code>telemetry/service.py</code>.</p>
<ul>
<li><b>Collects Usage Data:</b> It gathers anonymized information about events like:<ul>
<li>When an <a class="el" href="../../de/d8f/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_201__agent.html">Agent</a> starts or finishes a run.</li>
<li>Details about each step the Agent takes (like which actions were used).</li>
<li>Errors encountered during agent runs.</li>
<li>Which actions are defined in the <a class="el" href="../../de/dc1/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_205__action__controller______registry.html">Action Controller &amp; Registry</a>.</li>
</ul>
</li>
<li><b>Anonymizes Data:</b> It uses a randomly generated user ID (stored locally, not linked to you) to group events from the same installation without knowing <em>who</em> the user is.</li>
<li><b>Sends Data:</b> It sends this anonymous data to a secure third-party service (PostHog) used by the developers to analyze trends and identify potential issues.</li>
<li><b>Optional:</b> You can easily turn it off.</li>
</ul>
<h2><a class="anchor" id="autotoc_md944"></a>
How is Telemetry Used? (Mostly Automatic)</h2>
<p>You usually don't interact with the <code>ProductTelemetry</code> service directly. Instead, other components like the <code>Agent</code> and <code>Controller</code> automatically call it at key moments.</p>
<p><b>Example: Agent Run Start/End</b></p>
<p>When you create an <code>Agent</code> and call <code>agent.run()</code>, the Agent automatically notifies the Telemetry Service.</p>
<div class="fragment"><div class="line"><span class="comment"># --- File: agent/service.py (Simplified Agent run method) ---</span></div>
<div class="line"><span class="keyword">class </span>Agent:</div>
<div class="line">    <span class="comment"># ... (other methods) ...</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Agent has a telemetry object initialized in __init__</span></div>
<div class="line">    <span class="comment"># self.telemetry = ProductTelemetry()</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">async def </span>run(self, max_steps: int = 100) -&gt; AgentHistoryList:</div>
<div class="line">        <span class="comment"># ---&gt; Tell Telemetry: Agent run is starting &lt;---</span></div>
<div class="line">        self._log_agent_run() <span class="comment"># This includes a telemetry.capture() call</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">try</span>:</div>
<div class="line">            <span class="comment"># ... (main agent loop runs here) ...</span></div>
<div class="line">            <span class="keywordflow">for</span> step_num <span class="keywordflow">in</span> range(max_steps):</div>
<div class="line">                <span class="comment"># ... (agent takes steps) ...</span></div>
<div class="line">                <span class="keywordflow">if</span> self.state.history.is_done():</div>
<div class="line">                    <span class="keywordflow">break</span></div>
<div class="line">            <span class="comment"># ...</span></div>
<div class="line">        <span class="keywordflow">finally</span>:</div>
<div class="line">            <span class="comment"># ---&gt; Tell Telemetry: Agent run is ending &lt;---</span></div>
<div class="line">            self.telemetry.capture(</div>
<div class="line">                AgentEndTelemetryEvent( <span class="comment"># Uses a specific data structure</span></div>
<div class="line">                    agent_id=self.state.agent_id,</div>
<div class="line">                    is_done=self.state.history.is_done(),</div>
<div class="line">                    success=self.state.history.is_successful(),</div>
<div class="line">                    <span class="comment"># ... other anonymous stats ...</span></div>
<div class="line">                )</div>
<div class="line">            )</div>
<div class="line">            <span class="comment"># ... (cleanup browser etc.) ...</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> self.state.history</div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ol type="1">
<li>When the <code>Agent</code> is created, it gets an instance of <code>ProductTelemetry</code>.</li>
<li>Inside the <code>run</code> method, before the main loop starts, <code>_log_agent_run()</code> is called, which internally uses <code>self.telemetry.capture()</code> to send an <code>AgentRunTelemetryEvent</code>.</li>
<li>After the loop finishes (or an error occurs), the <code>finally</code> block ensures that another <code>self.telemetry.capture()</code> call is made, this time sending an <code>AgentEndTelemetryEvent</code> with summary statistics about the run.</li>
</ol>
<p>Similarly, the <code>Agent.step</code> method captures an <code>AgentStepTelemetryEvent</code>, and the <code>Controller</code>'s <code>Registry</code> captures a <code>ControllerRegisteredFunctionsTelemetryEvent</code> when it's initialized. This happens automatically in the background if telemetry is enabled.</p>
<h2><a class="anchor" id="autotoc_md945"></a>
How to Disable Telemetry</h2>
<p>If you prefer not to send any anonymous usage data, you can easily disable the Telemetry Service.</p>
<p>Set the environment variable <code>ANONYMIZED_TELEMETRY</code> to <code>False</code>.</p>
<p>How you set environment variables depends on your operating system:</p>
<ul>
<li><b>Linux/macOS (in terminal):</b> <code>bash export ANONYMIZED_TELEMETRY=False @section autotoc_md946 Now run your Python script in the same terminal python your_agent_script.py </code></li>
<li><b>Windows (Command Prompt):</b> <code>cmd set ANONYMIZED_TELEMETRY=False python your_agent_script.py </code></li>
<li><b>Windows (PowerShell):</b> <code>powershell $env:ANONYMIZED_TELEMETRY="False" python your_agent_script.py </code></li>
<li><b>In Python Code (using <code>os</code> module, <em>before</em> importing <code>browser_use</code>):</b> ``&lsquo;python import os os.environ['ANONYMIZED_TELEMETRY&rsquo;] = 'False'</li>
</ul>
<h1><a class="anchor" id="autotoc_md947"></a>
Now import and use browser_use</h1>
<p>from browser_use import Agent # ... other imports </p>
<h1><a class="anchor" id="autotoc_md948"></a>
... rest of your script ...</h1>
<p>```</p>
<p>If this environment variable is set to <code>False</code>, the <code>ProductTelemetry</code> service will be initialized in a disabled state, and no data will be collected or sent.</p>
<h2><a class="anchor" id="autotoc_md949"></a>
How It Works Under the Hood: Sending Anonymous Data</h2>
<p>When telemetry is enabled and an event occurs (like <code>agent.run()</code> starting):</p>
<ol type="1">
<li><b>Component Calls Capture:</b> The <code>Agent</code> (or <code>Controller</code>) calls <code>telemetry.capture(event_data)</code>.</li>
<li><b>Telemetry Service Checks:</b> The <code>ProductTelemetry</code> service checks if it's enabled. If not, it does nothing.</li>
<li><b>Get User ID:</b> It retrieves or generates a unique, anonymous user ID. This is typically a random UUID (like <code>a1b2c3d4-e5f6-7890-abcd-ef1234567890</code>) stored in a hidden file on your computer (<code>~/.cache/browser_use/telemetry_user_id</code>). This ID helps group events from the same installation without identifying the actual user.</li>
<li><b>Send to PostHog:</b> It sends the event data (structured using Pydantic models like <code>AgentRunTelemetryEvent</code>) along with the anonymous user ID to PostHog, a third-party service specialized in product analytics.</li>
<li><b>Analysis:</b> Developers can then look at aggregated, anonymous trends in PostHog (e.g., "What percentage of agent runs finish successfully?", "What are the most common errors?") to understand usage patterns and prioritize improvements.</li>
</ol>
<p>Here's a simplified diagram:</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant Agent</div>
<div class="line">    participant TelemetrySvc as ProductTelemetry</div>
<div class="line">    participant LocalFile as ~/.cache/.../user_id</div>
<div class="line">    participant PostHog</div>
<div class="line"> </div>
<div class="line">    Agent-&gt;&gt;TelemetrySvc: capture(AgentRunEvent)</div>
<div class="line">    Note over TelemetrySvc: Telemetry Enabled? Yes.</div>
<div class="line">    TelemetrySvc-&gt;&gt;LocalFile: Read existing User ID (or create new)</div>
<div class="line">    LocalFile--&gt;&gt;TelemetrySvc: Anonymous User ID (UUID)</div>
<div class="line">    Note over TelemetrySvc: Package Event + User ID</div>
<div class="line">    TelemetrySvc-&gt;&gt;PostHog: Send(EventData, UserID)</div>
<div class="line">    PostHog--&gt;&gt;TelemetrySvc: Acknowledgment (Optional)</div>
</div><!-- fragment --><p>Let's look at the simplified code involved.</p>
<p><b>1. Initializing Telemetry (<code>telemetry/service.py</code>)</b></p>
<p>The service checks the environment variable during initialization.</p>
<div class="fragment"><div class="line"><span class="comment"># --- File: telemetry/service.py (Simplified __init__) ---</span></div>
<div class="line"><span class="keyword">import</span> os</div>
<div class="line"><span class="keyword">import</span> uuid</div>
<div class="line"><span class="keyword">import</span> logging</div>
<div class="line"><span class="keyword">from</span> pathlib <span class="keyword">import</span> Path</div>
<div class="line"><span class="keyword">from</span> posthog <span class="keyword">import</span> Posthog <span class="comment"># The library for the external service</span></div>
<div class="line"><span class="keyword">from</span> browser_use.utils <span class="keyword">import</span> singleton</div>
<div class="line"> </div>
<div class="line">logger = logging.getLogger(__name__)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">@singleton</span> <span class="comment"># Ensures only one instance exists</span></div>
<div class="line"><span class="keyword">class </span>ProductTelemetry:</div>
<div class="line">    USER_ID_PATH = str(Path.home() / <span class="stringliteral">&#39;.cache&#39;</span> / <span class="stringliteral">&#39;browser_use&#39;</span> / <span class="stringliteral">&#39;telemetry_user_id&#39;</span>)</div>
<div class="line">    <span class="comment"># ... (API key constants) ...</span></div>
<div class="line">    _curr_user_id = <span class="keywordtype">None</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>__init__(self) -&gt; None:</div>
<div class="line">        <span class="comment"># Check the environment variable</span></div>
<div class="line">        telemetry_disabled = os.getenv(<span class="stringliteral">&#39;ANONYMIZED_TELEMETRY&#39;</span>, <span class="stringliteral">&#39;true&#39;</span>).lower() == <span class="stringliteral">&#39;false&#39;</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> telemetry_disabled:</div>
<div class="line">            self._posthog_client = <span class="keywordtype">None</span> <span class="comment"># Telemetry is off</span></div>
<div class="line">            logger.debug(<span class="stringliteral">&#39;Telemetry disabled by environment variable.&#39;</span>)</div>
<div class="line">        <span class="keywordflow">else</span>:</div>
<div class="line">            <span class="comment"># Initialize the PostHog client if enabled</span></div>
<div class="line">            self._posthog_client = Posthog(...)</div>
<div class="line">            logger.info(</div>
<div class="line">                <span class="stringliteral">&#39;Anonymized telemetry enabled.&#39;</span> <span class="comment"># Inform the user</span></div>
<div class="line">            )</div>
<div class="line">            <span class="comment"># Optionally silence PostHog&#39;s own logs</span></div>
<div class="line">            <span class="comment"># ...</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># ... (other methods) ...</span></div>
</div><!-- fragment --><p><b>2. Capturing an Event (<code>telemetry/service.py</code>)</b></p>
<p>The <code>capture</code> method sends the data if the client is active.</p>
<div class="fragment"><div class="line"><span class="comment"># --- File: telemetry/service.py (Simplified capture) ---</span></div>
<div class="line"><span class="comment"># Assume BaseTelemetryEvent is the base Pydantic model for events</span></div>
<div class="line"><span class="keyword">from</span> browser_use.telemetry.views <span class="keyword">import</span> BaseTelemetryEvent</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>ProductTelemetry:</div>
<div class="line">    <span class="comment"># ... (init) ...</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>capture(self, event: BaseTelemetryEvent) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line">        <span class="comment"># Do nothing if telemetry is disabled</span></div>
<div class="line">        <span class="keywordflow">if</span> self._posthog_client <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line">            <span class="keywordflow">return</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">try</span>:</div>
<div class="line">            <span class="comment"># Get the anonymous user ID (lazy loaded)</span></div>
<div class="line">            anon_user_id = self.user_id</div>
<div class="line"> </div>
<div class="line">            <span class="comment"># Send the event name and its properties (as a dictionary)</span></div>
<div class="line">            self._posthog_client.capture(</div>
<div class="line">                distinct_id=anon_user_id,</div>
<div class="line">                event=event.name, <span class="comment"># e.g., &quot;agent_run&quot;</span></div>
<div class="line">                properties=event.properties <span class="comment"># Data from the event model</span></div>
<div class="line">            )</div>
<div class="line">            logger.debug(f<span class="stringliteral">&#39;Telemetry event captured: {event.name}&#39;</span>)</div>
<div class="line">        <span class="keywordflow">except</span> Exception <span class="keyword">as</span> e:</div>
<div class="line">            <span class="comment"># Don&#39;t crash the main application if telemetry fails</span></div>
<div class="line">            logger.error(f<span class="stringliteral">&#39;Failed to send telemetry event {event.name}: {e}&#39;</span>)</div>
<div class="line"> </div>
<div class="line">    <span class="preprocessor">@property</span></div>
<div class="line">    <span class="keyword">def </span>user_id(self) -&gt; str:</div>
<div class="line">        <span class="stringliteral">&quot;&quot;&quot;Gets or creates the anonymous user ID.&quot;&quot;&quot;</span></div>
<div class="line">        <span class="keywordflow">if</span> self._curr_user_id:</div>
<div class="line">            <span class="keywordflow">return</span> self._curr_user_id</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">try</span>:</div>
<div class="line">            <span class="comment"># Check if the ID file exists</span></div>
<div class="line">            id_file = Path(self.USER_ID_PATH)</div>
<div class="line">            <span class="keywordflow">if</span> <span class="keywordflow">not</span> id_file.exists():</div>
<div class="line">                <span class="comment"># Create directory and generate a new UUID if it doesn&#39;t exist</span></div>
<div class="line">                id_file.parent.mkdir(parents=<span class="keyword">True</span>, exist_ok=<span class="keyword">True</span>)</div>
<div class="line">                new_user_id = str(uuid.uuid4())</div>
<div class="line">                id_file.write_text(new_user_id)</div>
<div class="line">                self._curr_user_id = new_user_id</div>
<div class="line">            <span class="keywordflow">else</span>:</div>
<div class="line">                <span class="comment"># Read the existing UUID from the file</span></div>
<div class="line">                self._curr_user_id = id_file.read_text().strip()</div>
<div class="line">        <span class="keywordflow">except</span> Exception:</div>
<div class="line">            <span class="comment"># Fallback if file access fails</span></div>
<div class="line">            self._curr_user_id = <span class="stringliteral">&#39;UNKNOWN_USER_ID&#39;</span></div>
<div class="line">        <span class="keywordflow">return</span> self._curr_user_id</div>
</div><!-- fragment --><p><b>3. Event Data Structures (<code>telemetry/views.py</code>)</b></p>
<p>Like other components, Telemetry uses Pydantic models to define the structure of the data being sent.</p>
<div class="fragment"><div class="line"><span class="comment"># --- File: telemetry/views.py (Simplified Event Example) ---</span></div>
<div class="line"><span class="keyword">from</span> dataclasses <span class="keyword">import</span> dataclass, asdict</div>
<div class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> Any, Dict, Sequence</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Base class for all telemetry events (conceptual)</span></div>
<div class="line"><span class="preprocessor">@dataclass</span></div>
<div class="line"><span class="keyword">class </span>BaseTelemetryEvent:</div>
<div class="line">    <span class="preprocessor">@property</span></div>
<div class="line">    <span class="keyword">def </span>name(self) -&gt; str:</div>
<div class="line">        <span class="keywordflow">raise</span> NotImplementedError</div>
<div class="line">    <span class="preprocessor">@property</span></div>
<div class="line">    <span class="keyword">def </span>properties(self) -&gt; Dict[str, Any]:</div>
<div class="line">        <span class="comment"># Helper to convert the dataclass fields to a dictionary</span></div>
<div class="line">        <span class="keywordflow">return</span> {k: v <span class="keywordflow">for</span> k, v <span class="keywordflow">in</span> asdict(self).items() <span class="keywordflow">if</span> k != <span class="stringliteral">&#39;name&#39;</span>}</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Specific event for when an agent run starts</span></div>
<div class="line"><span class="preprocessor">@dataclass</span></div>
<div class="line"><span class="keyword">class </span>AgentRunTelemetryEvent(BaseTelemetryEvent):</div>
<div class="line">    agent_id: str        <span class="comment"># Anonymous ID for the specific agent instance</span></div>
<div class="line">    use_vision: bool     <span class="comment"># Was vision enabled?</span></div>
<div class="line">    task: str            <span class="comment"># The task description (anonymized/hashed in practice)</span></div>
<div class="line">    model_name: str      <span class="comment"># Name of the LLM used</span></div>
<div class="line">    chat_model_library: str <span class="comment"># Library used for the LLM (e.g., ChatOpenAI)</span></div>
<div class="line">    version: str         <span class="comment"># browser-use version</span></div>
<div class="line">    source: str          <span class="comment"># How browser-use was installed (e.g., pip, git)</span></div>
<div class="line">    name: str = <span class="stringliteral">&#39;agent_run&#39;</span> <span class="comment"># The event name sent to PostHog</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># ... other event models like AgentEndTelemetryEvent, AgentStepTelemetryEvent ...</span></div>
</div><!-- fragment --><p>These structures ensure the data sent to PostHog is consistent and well-defined.</p>
<h2><a class="anchor" id="autotoc_md950"></a>
Conclusion</h2>
<p>The <b>Telemetry Service</b> (<code>ProductTelemetry</code>) provides an optional and privacy-conscious way for the <code>Browser Use</code> project to gather anonymous feedback about how the tool is being used. It automatically captures events like agent runs, steps, and errors, sending anonymized statistics to developers via PostHog.</p>
<p>This feedback loop is vital for identifying common issues, understanding feature usage, and ultimately improving the <code>Browser Use</code> library for everyone. Remember, you have full control and can easily disable this service by setting the <code>ANONYMIZED_TELEMETRY=False</code> environment variable.</p>
<p>This chapter concludes our tour of the core components within the <code>Browser Use</code> project. You've learned about the <a class="el" href="../../de/d8f/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_201__agent.html">Agent</a>, the guiding <a class="el" href="../../dd/d81/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_202__system__prompt.html">System Prompt</a>, the isolated <a class="el" href="../../dd/da5/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_203__browsercontext.html">BrowserContext</a>, the webpage map (<a class="el" href="../../d0/df8/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_204__dom__representation.html">DOM Representation</a>), the action execution engine (<a class="el" href="../../de/dc1/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_205__action__controller______registry.html">Action Controller &amp; Registry</a>), the conversation tracker (<a class="el" href="../../db/dee/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_206__message__manager.html">Message Manager</a>), the data blueprints (<a class="el" href="../../dc/db2/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_207__data__structures____views__.html">Data Structures (Views)</a>), and now the optional feedback mechanism (<a class="el" href="../../d6/d41/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Browser_01Use_208__telemetry__service.html">Telemetry Service</a>). We hope this gives you a solid foundation for understanding and using <code>Browser Use</code>!</p>
<hr  />
<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
