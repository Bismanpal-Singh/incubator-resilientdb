#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: 06_configuration___config__</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d9/d88/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Flask_206__configuration______config____.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">06_configuration___config__</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md1897"></a>
autotoc_md1897</h2>
<p>layout: default title: "Configuration (config)" parent: "Flask" </p>
<h2><a class="anchor" id="autotoc_md1898"></a>
nav_order: 6</h2>
<h1><a class="anchor" id="autotoc_md1899"></a>
Chapter 6: Configuration (<code>Config</code>)</h1>
<p>Welcome back! In <a class="el" href="../../d2/d15/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Flask_205__context__globals______current__a0f66e55a619b85550f70ee0df6dbdc86.html">Chapter 5: Context Globals (<code>current_app</code>, <code>request</code>, <code>session</code>, <code>g</code>)</a>, we saw how Flask uses context globals like <code>current_app</code> and <code>session</code>. We even learned that using the <code>session</code> requires setting a <code>SECRET_KEY</code> on our application object. But where is the best place to put settings like the secret key, or maybe a database connection string, or a flag to turn debugging features on or off? We definitely don't want to hardcode these directly into our main application logic!</p>
<p>This chapter introduces Flask's built-in solution: the <b>Configuration</b> system.</p>
<h2><a class="anchor" id="autotoc_md1900"></a>
What Problem Does It Solve? The Need for a Settings Panel</h2>
<p>Imagine building a piece of electronic equipment, like a stereo amplifier. It has various knobs and switches: volume, bass, treble, input source selectors. These controls allow you to adjust the amplifier's behavior without opening it up and rewiring things.</p>
<p>A web application also needs settings to control its behavior:</p>
<ul>
<li><b>Security:</b> A <code>SECRET_KEY</code> is needed for secure sessions.</li>
<li><b>Debugging:</b> Should detailed error messages be shown (useful for development, dangerous for production)?</li>
<li><b>Database:</b> Where is the database located? What are the login credentials?</li>
<li><b>External Services:</b> What are the API keys for services like email sending or payment processing?</li>
</ul>
<p>Hardcoding these values directly in your view functions or application setup code is messy and inflexible. If you need to change the database location when deploying your app from your laptop to a real server, you'd have to find and change the code. This is prone to errors and makes managing different environments (development, testing, production) difficult.</p>
<p>Flask provides a central object, usually accessed via <code>app.config</code>, that acts like your application's main <b>settings panel</b>. It's a dictionary-like object where you can store all your configuration values. Flask itself uses this object for its own settings (like <code>DEBUG</code> or <code>SECRET_KEY</code>), and you can add your own custom settings too. Crucially, Flask provides convenient ways to load these settings from different places, like files or environment variables, keeping your configuration separate from your code.</p>
<p>Our primary use case right now is setting the <code>SECRET_KEY</code> properly so we can use the <code>session</code> object securely, as discussed in <a class="el" href="../../d2/d15/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Flask_205__context__globals______current__a0f66e55a619b85550f70ee0df6dbdc86.html">Chapter 5</a>.</p>
<h2><a class="anchor" id="autotoc_md1901"></a>
Meet <code>app.config</code></h2>
<p>When you create a Flask application object (<code>app = Flask(__name__)</code>), Flask automatically creates a configuration object for you, accessible as <code>app.config</code>.</p>
<ul>
<li>It works like a standard Python dictionary: you can store values using keys (e.g., &lsquo;app.config['SECRET_KEY&rsquo;] = '...'<code>) and retrieve them (e.g.,</code>key = app.config['SECRET_KEY']<code>).</code></li>
<li><code> Keys are typically uppercase strings (e.g.,</code>DEBUG<code>,</code>DATABASE_URI`). Flask's built-in settings follow this convention, and it's recommended for your own settings too.</li>
<li>It comes pre-populated with some default values.</li>
<li>It has special methods to load configuration from various sources.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1902"></a>
Populating the Configuration</h2>
<p>There are several ways to add settings to <code>app.config</code>. Let's explore the most common ones.</p>
<h3><a class="anchor" id="autotoc_md1903"></a>
1. Directly from Code (In-Place)</h3>
<p>You can set configuration values directly like you would with a dictionary. This is often done right after creating the <code>app</code> object.</p>
<div class="fragment"><div class="line"><span class="comment"># hello.py (or your main app file)</span></div>
<div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</div>
<div class="line"><span class="keyword">import</span> os</div>
<div class="line"> </div>
<div class="line">app = Flask(__name__)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Setting configuration directly</span></div>
<div class="line">app.config[<span class="stringliteral">&#39;DEBUG&#39;</span>] = <span class="keyword">True</span> <span class="comment"># Turn on debug mode</span></div>
<div class="line">app.config[<span class="stringliteral">&#39;SECRET_KEY&#39;</span>] = os.urandom(24) <span class="comment"># Generate a random key (OK for simple dev)</span></div>
<div class="line">app.config[<span class="stringliteral">&#39;MY_CUSTOM_SETTING&#39;</span>] = <span class="stringliteral">&#39;Hello Config!&#39;</span></div>
<div class="line"> </div>
<div class="line">print(f<span class="stringliteral">&quot;Debug mode is: {app.config[&#39;DEBUG&#39;]}&quot;</span>)</div>
<div class="line">print(f<span class="stringliteral">&quot;My custom setting: {app.config.get(&#39;MY_CUSTOM_SETTING&#39;)}&quot;</span>)</div>
<div class="line"><span class="comment"># Using .get() is safer if the key might not exist</span></div>
<div class="line">print(f<span class="stringliteral">&quot;Another setting: {app.config.get(&#39;NON_EXISTENT_KEY&#39;, &#39;Default Value&#39;)}&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># ... rest of your app (routes, etc.) ...</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Example route accessing config</span></div>
<div class="line"><span class="preprocessor">@app.route(&#39;/config-example&#39;)</span></div>
<div class="line"><span class="keyword">def </span>config_example():</div>
<div class="line">  custom_val = app.config.get(<span class="stringliteral">&#39;MY_CUSTOM_SETTING&#39;</span>, <span class="stringliteral">&#39;Not set&#39;</span>)</div>
<div class="line">  <span class="keywordflow">return</span> f<span class="stringliteral">&#39;The custom setting is: {custom_val}&#39;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line">  <span class="comment"># The app.run(debug=True) argument also sets app.config[&#39;DEBUG&#39;] = True</span></div>
<div class="line">  <span class="comment"># but setting it explicitly ensures it&#39;s set even if run differently.</span></div>
<div class="line">  app.run()</div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ul>
<li>We directly assign values to keys in <code>app.config</code>.</li>
<li><code>os.urandom(24)</code> generates a random byte string suitable for a secret key during development. <b>Never hardcode a predictable secret key, especially in production!</b></li>
<li>We can access values using <code>[]</code> or the safer <code>.<a class="el" href="../../d7/da6/pybind__kv__service_8cpp.html#abe6524afb3a69dc9a4c314e11f96f29f">get()</a></code> method which allows providing a default.</li>
</ul>
<p><b>When to use:</b> Good for setting Flask's built-in defaults (like <code>DEBUG</code>) temporarily during development or setting simple, non-sensitive values. <b>Not ideal for secrets or complex configurations</b>, especially for deployment, as it mixes configuration with code.</p>
<h3><a class="anchor" id="autotoc_md1904"></a>
2. From a Python Object (<code>from_object</code>)</h3>
<p>You can define your configuration in a separate Python object (like a class) or a dedicated module (<code>.py</code> file) and then load it using <code>app.config.from_object()</code>. This method only loads attributes whose names are <b>all uppercase</b>.</p>
<p>First, create a configuration file, say <code><a class="el" href="../../dd/deb/config_8py.html">config.py</a></code>:</p>
<div class="fragment"><div class="line"><span class="comment"># config.py</span></div>
<div class="line"><span class="comment"># Note: Only uppercase variables will be loaded by from_object</span></div>
<div class="line"> </div>
<div class="line">DEBUG = <span class="keyword">True</span> <span class="comment"># Set debug mode</span></div>
<div class="line">SECRET_KEY = <span class="stringliteral">&#39;a-very-secret-and-complex-key-loaded-from-object&#39;</span> <span class="comment"># KEEP SECRET IN REAL APPS</span></div>
<div class="line">DATABASE_URI = <span class="stringliteral">&#39;sqlite:///mydatabase.db&#39;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># This lowercase variable will NOT be loaded into app.config</span></div>
<div class="line">internal_value = <span class="stringliteral">&#39;ignore me&#39;</span></div>
</div><!-- fragment --><p>Now, load it in your main application file:</p>
<div class="fragment"><div class="line"><span class="comment"># hello.py</span></div>
<div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</div>
<div class="line"> </div>
<div class="line">app = Flask(__name__)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Load configuration from the config.py file (using its import path as a string)</span></div>
<div class="line">app.config.from_object(<span class="stringliteral">&#39;config&#39;</span>)</div>
<div class="line"><span class="comment"># Alternatively, if you imported the module:</span></div>
<div class="line"><span class="comment"># import config</span></div>
<div class="line"><span class="comment"># app.config.from_object(config)</span></div>
<div class="line"> </div>
<div class="line">print(f<span class="stringliteral">&quot;Loaded Debug: {app.config.get(&#39;DEBUG&#39;)}&quot;</span>)</div>
<div class="line">print(f<span class="stringliteral">&quot;Loaded Secret Key: {app.config.get(&#39;SECRET_KEY&#39;)}&quot;</span>)</div>
<div class="line">print(f<span class="stringliteral">&quot;Loaded DB URI: {app.config.get(&#39;DATABASE_URI&#39;)}&quot;</span>)</div>
<div class="line">print(f<span class="stringliteral">&quot;Internal Value (should be None): {app.config.get(&#39;internal_value&#39;)}&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># ... rest of your app ...</span></div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line">  app.run()</div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ul>
<li>&lsquo;app.config.from_object('config&rsquo;)<code>tells Flask to import the module named</code>config<code>(which corresponds to</code><a class="el" href="../../dd/deb/config_8py.html">config.py</a><code>) and look for any uppercase attributes (</code>DEBUG<code>,</code>SECRET_KEY<code>,</code>DATABASE_URI<code>).</code></li>
<li><code> It copies the values of these uppercase attributes into the</code>app.config<code>dictionary. *</code>internal_value` is ignored because it's lowercase.</li>
</ul>
<p><b>When to use:</b> Great for organizing your default configuration or different configurations (e.g., <code>DevelopmentConfig</code>, <code>ProductionConfig</code> classes) within your project structure. Helps keep settings separate from application logic.</p>
<h3><a class="anchor" id="autotoc_md1905"></a>
3. From a Python File (<code>from_pyfile</code>)</h3>
<p>Similar to <code>from_object</code>, but instead of importing a module, <code>app.config.from_pyfile()</code> executes a Python file (it doesn't have to end in <code>.py</code>, often <code>.cfg</code> is used by convention) and loads its uppercase variables.</p>
<p>Create a configuration file, say <code>settings.cfg</code>:</p>
<div class="fragment"><div class="line"><span class="comment"># settings.cfg</span></div>
<div class="line"><span class="comment"># This file will be executed by Python</span></div>
<div class="line"> </div>
<div class="line">SECRET_KEY = <span class="stringliteral">&#39;secret-key-loaded-from-pyfile&#39;</span></div>
<div class="line">SERVER_NAME = <span class="stringliteral">&#39;127.0.0.1:5000&#39;</span> <span class="comment"># Example setting</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># You can even have simple logic if needed</span></div>
<div class="line"><span class="keyword">import</span> os</div>
<div class="line">APP_ROOT = os.path.dirname(__file__)</div>
</div><!-- fragment --><p>Load it in your application:</p>
<div class="fragment"><div class="line"><span class="comment"># hello.py</span></div>
<div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</div>
<div class="line"><span class="keyword">import</span> os</div>
<div class="line"> </div>
<div class="line">app = Flask(__name__)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Construct the path to the config file relative to this file</span></div>
<div class="line"><span class="comment"># __file__ is the path to the current python script (hello.py)</span></div>
<div class="line"><span class="comment"># os.path.dirname gets the directory containing hello.py</span></div>
<div class="line"><span class="comment"># os.path.join creates the full path to settings.cfg</span></div>
<div class="line">config_file_path = os.path.join(os.path.dirname(__file__), <span class="stringliteral">&#39;settings.cfg&#39;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Load configuration from the file</span></div>
<div class="line"><span class="comment"># Set silent=True to ignore errors if the file doesn&#39;t exist</span></div>
<div class="line">loaded = app.config.from_pyfile(config_file_path, silent=<span class="keyword">False</span>)</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> loaded:</div>
<div class="line">    print(<span class="stringliteral">&quot;Loaded config from settings.cfg&quot;</span>)</div>
<div class="line">    print(f<span class="stringliteral">&quot;Loaded Secret Key: {app.config.get(&#39;SECRET_KEY&#39;)}&quot;</span>)</div>
<div class="line">    print(f<span class="stringliteral">&quot;Loaded Server Name: {app.config.get(&#39;SERVER_NAME&#39;)}&quot;</span>)</div>
<div class="line">    print(f<span class="stringliteral">&quot;Calculated APP_ROOT: {app.config.get(&#39;APP_ROOT&#39;)}&quot;</span>)</div>
<div class="line"><span class="keywordflow">else</span>:</div>
<div class="line">    print(<span class="stringliteral">&quot;Could not load settings.cfg&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># ... rest of your app ...</span></div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line">  app.run()</div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ul>
<li>&lsquo;app.config.from_pyfile('settings.cfg&rsquo;)<code>reads the specified file, executes it as Python code, and loads the uppercase variables into</code>app.config<code>.</code></li>
<li><code> This allows configuration files to be simple variable assignments but also include basic Python logic if needed.</code></li>
<li><code> The</code>silent=True` argument is useful if the config file is optional.</li>
</ul>
<p><b>When to use:</b> Very flexible. Good for separating configuration completely from your application package. Often used for instance-specific configurations (settings for a particular deployment).</p>
<h3><a class="anchor" id="autotoc_md1906"></a>
4. From Environment Variables (<code>from_envvar</code>)</h3>
<p>This is a common pattern, especially for production deployment. Instead of hardcoding the <em>path</em> to a configuration file, you store the path in an environment variable. <code>app.config.from_envvar()</code> reads the filename from the specified environment variable and then loads that file using <code>from_pyfile</code>.</p>
<p>Imagine you have your <code>settings.cfg</code> from the previous example.</p>
<p>Before running your app, you set an environment variable in your terminal:</p>
<ul>
<li><b>Linux/macOS:</b> <code>export YOURAPP_SETTINGS=/path/to/your/settings.cfg</code></li>
<li><b>Windows (cmd):</b> <code>set YOURAPP_SETTINGS=C:\path\to\your\settings.cfg</code></li>
<li><b>Windows (PowerShell):</b> <code>$env:YOURAPP_SETTINGS="C:\path\to\your\settings.cfg"</code></li>
</ul>
<p>Then, in your code:</p>
<div class="fragment"><div class="line"><span class="comment"># hello.py</span></div>
<div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</div>
<div class="line"> </div>
<div class="line">app = Flask(__name__)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Load configuration from the file specified by the YOURAPP_SETTINGS env var</span></div>
<div class="line"><span class="comment"># Set silent=True to allow the app to run even if the env var isn&#39;t set</span></div>
<div class="line">loaded = app.config.from_envvar(<span class="stringliteral">&#39;YOURAPP_SETTINGS&#39;</span>, silent=<span class="keyword">True</span>)</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> loaded:</div>
<div class="line">    print(f<span class="stringliteral">&quot;Loaded config from file specified in YOURAPP_SETTINGS: {app.config.get(&#39;SECRET_KEY&#39;)}&quot;</span>)</div>
<div class="line"><span class="keywordflow">else</span>:</div>
<div class="line">    print(<span class="stringliteral">&quot;YOURAPP_SETTINGS environment variable not set or file not found.&quot;</span>)</div>
<div class="line">    <span class="comment"># You might want to set default configs here or raise an error</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># ... rest of your app ...</span></div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line">  app.run()</div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ul>
<li>&lsquo;app.config.from_envvar('YOURAPP_SETTINGS&rsquo;)<code>looks for the environment variable</code>YOURAPP_SETTINGS<code>.</code></li>
<li><code> If found, it takes the value (which should be a file path, e.g.,</code>/path/to/your/settings.cfg<code>) and loads that file using</code>from_pyfile()`.</li>
<li>This decouples the <em>location</em> of the config file from your application code.</li>
</ul>
<p><b>When to use:</b> Excellent for production and deployment. Allows operators to specify the configuration file location without modifying the application code. Essential for managing different environments (development, staging, production) where configuration files might reside in different places or contain different values (especially secrets).</p>
<h3><a class="anchor" id="autotoc_md1907"></a>
Loading Order and Overrides</h3>
<p>You can use multiple loading methods. Each subsequent method will <b>override</b> any values set by previous methods if the keys are the same.</p>
<p>A common pattern is:</p>
<ol type="1">
<li>Set default values directly in <code>app.config</code> or load from a default <code><a class="el" href="../../dd/deb/config_8py.html">config.py</a></code> using <code>from_object</code>.</li>
<li>Load settings from an instance-specific file (e.g., <code>settings.cfg</code>) using <code>from_pyfile</code> or <code>from_envvar</code>. This allows deployment-specific settings (like database URLs or secret keys) to override the defaults.</li>
</ol>
<div class="fragment"><div class="line"><span class="comment"># hello.py</span></div>
<div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</div>
<div class="line"><span class="keyword">import</span> os</div>
<div class="line"> </div>
<div class="line">app = Flask(__name__)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># 1. Set built-in defaults maybe? Or load from a base config object.</span></div>
<div class="line">app.config[<span class="stringliteral">&#39;DEBUG&#39;</span>] = <span class="keyword">False</span> <span class="comment"># Default to False for safety</span></div>
<div class="line">app.config[<span class="stringliteral">&#39;SECRET_KEY&#39;</span>] = <span class="stringliteral">&#39;default-insecure-key&#39;</span> <span class="comment"># Default bad key</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># You could load more defaults from an object here:</span></div>
<div class="line"><span class="comment"># app.config.from_object(&#39;yourapp.default_config&#39;)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># 2. Try to load from an environment variable pointing to a deployment-specific file</span></div>
<div class="line">config_file_path = os.environ.get(<span class="stringliteral">&#39;YOURAPP_SETTINGS&#39;</span>)</div>
<div class="line"><span class="keywordflow">if</span> config_file_path:</div>
<div class="line">    <span class="keywordflow">try</span>:</div>
<div class="line">        app.config.from_pyfile(config_file_path)</div>
<div class="line">        print(f<span class="stringliteral">&quot;Loaded overrides from {config_file_path}&quot;</span>)</div>
<div class="line">    <span class="keywordflow">except</span> OSError <span class="keyword">as</span> e:</div>
<div class="line">        print(f<span class="stringliteral">&quot;Warning: Could not load config file {config_file_path}: {e}&quot;</span>)</div>
<div class="line"><span class="keywordflow">else</span>:</div>
<div class="line">    print(<span class="stringliteral">&quot;Info: YOURAPP_SETTINGS environment variable not set, using defaults.&quot;</span>)</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">print(f<span class="stringliteral">&quot;Final Debug value: {app.config[&#39;DEBUG&#39;]}&quot;</span>)</div>
<div class="line">print(f<span class="stringliteral">&quot;Final Secret Key: {app.config[&#39;SECRET_KEY&#39;]}&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># ... rest of your app ...</span></div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line">  app.run()</div>
</div><!-- fragment --><p>Now, if <code>YOURAPP_SETTINGS</code> points to a file containing <code>DEBUG = True</code> and a different <code>SECRET_KEY</code>, those values will override the defaults set earlier.</p>
<h2><a class="anchor" id="autotoc_md1908"></a>
Accessing Configuration Values</h2>
<p>Once loaded, you can access configuration values anywhere you have access to the application object (<code>app</code>) or the <code>current_app</code> proxy (within a request or application context, see <a class="el" href="../../d2/d15/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Flask_205__context__globals______current__a0f66e55a619b85550f70ee0df6dbdc86.html">Chapter 5</a>).</p>
<div class="fragment"><div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> current_app, session</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Inside a view function or other request-context code:</span></div>
<div class="line"><span class="preprocessor">@app.route(&#39;/some-route&#39;)</span></div>
<div class="line"><span class="keyword">def </span>some_view():</div>
<div class="line">    <span class="comment"># Using current_app proxy</span></div>
<div class="line">    api_key = current_app.config.get(<span class="stringliteral">&#39;MY_API_KEY&#39;</span>)</div>
<div class="line">    <span class="keywordflow">if</span> <span class="keywordflow">not</span> api_key:</div>
<div class="line">        <span class="keywordflow">return</span> <span class="stringliteral">&quot;Error: API Key not configured!&quot;</span>, 500</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Flask extensions often use app.config too</span></div>
<div class="line">    session[<span class="stringliteral">&#39;user_id&#39;</span>] = 123 <span class="comment"># Uses current_app.config[&#39;SECRET_KEY&#39;] implicitly</span></div>
<div class="line">    </div>
<div class="line">    <span class="comment"># ... use api_key ...</span></div>
<div class="line">    <span class="keywordflow">return</span> f<span class="stringliteral">&quot;Using API Key starting with: {api_key[:5]}...&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Accessing outside a request context (e.g., in setup code)</span></div>
<div class="line"><span class="comment"># Requires the app object directly or an app context</span></div>
<div class="line"><span class="keyword">with</span> app.app_context():</div>
<div class="line">    print(f<span class="stringliteral">&quot;Accessing SECRET_KEY via current_app: {current_app.config[&#39;SECRET_KEY&#39;]}&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Or directly via the app object if available</span></div>
<div class="line">print(f<span class="stringliteral">&quot;Accessing SECRET_KEY via app: {app.config[&#39;SECRET_KEY&#39;]}&quot;</span>)</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md1909"></a>
Under the Hood: The <code>Config</code> Object</h2>
<p>What's happening when you call these methods?</p>
<ol type="1">
<li><b><code>app.config</code> Object:</b> When you create <code>Flask(__name__)</code>, the <code>Flask</code> constructor creates an instance of <code>app.config_class</code> (which defaults to <code>flask.Config</code>) and assigns it to <code>app.config</code>. The constructor passes the application's <code>root_path</code> and the <code>default_config</code> dictionary. (See <code>Flask.__init__</code> in <code><a class="el" href="../../de/d0e/app_8py.html">app.py</a></code> calling <code>self.make_config</code>, which uses <code>self.config_class</code> defined in <code>sansio/app.py</code>).</li>
<li><b><code>Config</code> Class:</b> The <code>flask.Config</code> class (in <code><a class="el" href="../../dd/deb/config_8py.html">config.py</a></code>) inherits directly from Python's built-in <code>dict</code>. This is why you can use standard dictionary methods like <code>[]</code>, <code>.<a class="el" href="../../d7/da6/pybind__kv__service_8cpp.html#abe6524afb3a69dc9a4c314e11f96f29f">get()</a></code>, <code>.update()</code>, etc.</li>
<li><b>Loading Methods:</b><ul>
<li><code>from_object(obj)</code>: If <code>obj</code> is a string, it imports it using <code>werkzeug.utils.import_string</code>. Then, it iterates through the attributes of the object (<code>dir(obj)</code>) and copies any attribute whose name is entirely uppercase into the config dictionary (<code>self[key] = getattr(obj, key)</code>).</li>
<li><code>from_pyfile(filename)</code>: It constructs the full path to the file using <code>os.path.join(self.root_path, filename)</code>. It creates a temporary module object (<code>types.ModuleType</code>). It opens and reads the file, compiles the content (<code>compile()</code>), and then executes it within the temporary module's dictionary (<code>exec(..., d.__dict__)</code>). Finally, it calls <code>self.from_object()</code> on the temporary module object to load the uppercase variables.</li>
<li><code>from_envvar(variable_name)</code>: It simply reads the environment variable (<code>os.environ.get(variable_name)</code>). If the variable exists and is not empty, it calls <code>self.from_pyfile()</code> using the value of the environment variable as the filename.</li>
</ul>
</li>
</ol>
<p>Here's a simplified diagram for <code>from_pyfile</code>:</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant UserCode as Your App Code</div>
<div class="line">    participant AppConfig as app.config (Config obj)</div>
<div class="line">    participant OS as File System</div>
<div class="line">    participant PythonExec as Python Interpreter</div>
<div class="line"> </div>
<div class="line">    UserCode-&gt;&gt;+AppConfig: app.config.from_pyfile(&#39;settings.cfg&#39;)</div>
<div class="line">    AppConfig-&gt;&gt;+OS: Find file &#39;settings.cfg&#39; relative to root_path</div>
<div class="line">    OS--&gt;&gt;-AppConfig: Return file handle</div>
<div class="line">    AppConfig-&gt;&gt;+PythonExec: Compile and Execute file content in a temporary module scope</div>
<div class="line">    PythonExec--&gt;&gt;-AppConfig: Execution complete (vars defined in temp scope)</div>
<div class="line">    AppConfig-&gt;&gt;AppConfig: Iterate temp scope, copy UPPERCASE vars to self (dict)</div>
<div class="line">    AppConfig--&gt;&gt;-UserCode: Return True (if successful)</div>
</div><!-- fragment --><p>The key takeaway is that <code>app.config</code> is fundamentally a Python dictionary enhanced with convenient methods for populating itself from common configuration sources like Python objects, files, and environment variables, filtering for uppercase keys.</p>
<h2><a class="anchor" id="autotoc_md1910"></a>
Conclusion</h2>
<p>Configuration is essential for any non-trivial Flask application. The <code>app.config</code> object provides a centralized, dictionary-like store for all your application settings.</p>
<ul>
<li>We learned that configuration helps separate settings (like <code>SECRET_KEY</code>, <code>DEBUG</code>, database URLs) from application code.</li>
<li><code>app.config</code> is the central object, behaving like a dictionary.</li>
<li>We explored various ways to load configuration: directly in code, from Python objects (<code>from_object</code>), from Python files (<code>from_pyfile</code>), and via environment variables pointing to files (<code>from_envvar</code>).</li>
<li>We saw that loading order matters, allowing defaults to be overridden by deployment-specific settings.</li>
<li>Configuration can be accessed using <code>app.config</code> or <code>current_app.config</code>.</li>
</ul>
<p>Properly managing configuration makes your application more secure, flexible, and easier to deploy and maintain across different environments.</p>
<p>Now that we've covered the main building blocks – the application object, routing, request/response handling, templating, context globals, and configuration – you might be wondering about the "magic" behind those context globals (<code>request</code>, <code>current_app</code>, etc.). How does Flask manage their state, especially when handling multiple requests? Let's delve deeper into the mechanics of contexts.</p>
<p>Ready to understand the context lifecycle? Let's move on to <a class="el" href="../../d6/da8/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Flask_207__application__and__request__contexts.html">Chapter 7: Application and Request Contexts</a>.</p>
<hr  />
<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
