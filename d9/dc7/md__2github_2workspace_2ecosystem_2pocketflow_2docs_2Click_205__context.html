#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: 05_context</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d9/dc7/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Click_205__context.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">05_context</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md1238"></a>
autotoc_md1238</h2>
<p>layout: default title: "Context" parent: "Click" </p>
<h2><a class="anchor" id="autotoc_md1239"></a>
nav_order: 5</h2>
<h1><a class="anchor" id="autotoc_md1240"></a>
Chapter 5: Context - The Command's Nervous System</h1>
<p>In the last chapter, <a class="el" href="../../d8/d25/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Click_204__paramtype.html">ParamType</a>, we saw how Click helps validate and convert user input into the right Python types, making our commands more robust. We used types like <code>click.INT</code> and <code>click.Path</code> to ensure data correctness.</p>
<p>But what happens <em>while</em> a command is running? How does Click keep track of which command is being executed, what parameters were passed, or even shared information between different commands in a nested structure (like <code>git remote add ...</code>)?</p>
<p>This is where the <b>Context</b> object, often referred to as <code>ctx</code>, comes into play. Think of the Context as the central nervous system for a single command invocation. It carries all the vital information about the current state of execution.</p>
<h2><a class="anchor" id="autotoc_md1241"></a>
Why Do We Need a Context?</h2>
<p>Imagine you have a command that needs to behave differently based on a global configuration, maybe a <code>--verbose</code> flag set on the main application group. Or perhaps one command needs to call another command within the same application. How do they communicate?</p>
<p>The Context object solves these problems by providing a central place to:</p>
<ul>
<li>Access parameters passed to the <em>current</em> command.</li>
<li>Access parameters or settings from <em>parent</em> commands.</li>
<li>Share application-level objects (like configuration settings or database connections) between commands.</li>
<li>Manage resources that need cleanup (like automatically closing files opened with <code>click.File</code>).</li>
<li>Invoke other commands programmatically.</li>
</ul>
<p>Let's explore how to access and use this powerful object.</p>
<h2><a class="anchor" id="autotoc_md1242"></a>
Getting the Context: <code>@pass_context</code></h2>
<p>Click doesn't automatically pass the Context object to your command function. You need to explicitly ask for it using a special decorator: <code>@click.pass_context</code>.</p>
<p>When you add <code>@click.pass_context</code> <em>above</em> your function definition (but typically <em>below</em> the <code>@click.command</code> or <code>@click.option</code> decorators), Click will automatically <b>inject</b> the <code>Context</code> object as the <b>very first argument</b> to your function.</p>
<p>Let's see a simple example:</p>
<div class="fragment"><div class="line"><span class="comment"># context_basics.py</span></div>
<div class="line"><span class="keyword">import</span> click</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">@click.group()</span></div>
<div class="line"><span class="preprocessor">@click.pass_context</span> <span class="comment"># Request the context for the group function</span></div>
<div class="line"><span class="keyword">def </span>cli(ctx):</div>
<div class="line">  <span class="stringliteral">&quot;&quot;&quot;A simple CLI with context.&quot;&quot;&quot;</span></div>
<div class="line">  <span class="comment"># We can store arbitrary data on the context&#39;s &#39;obj&#39; attribute</span></div>
<div class="line">  ctx.obj = {<span class="stringliteral">&#39;verbose&#39;</span>: <span class="keyword">False</span>} <span class="comment"># Initialize a shared dictionary</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">@cli.command()</span></div>
<div class="line"><span class="preprocessor">@click.option(&#39;--verbose&#39;, is_flag=True, help=&#39;Enable verbose mode.&#39;)</span></div>
<div class="line"><span class="preprocessor">@click.pass_context</span> <span class="comment"># Request the context for the command function</span></div>
<div class="line"><span class="keyword">def </span>info(ctx, verbose):</div>
<div class="line">  <span class="stringliteral">&quot;&quot;&quot;Prints info, possibly verbosely.&quot;&quot;&quot;</span></div>
<div class="line">  <span class="comment"># Access the command name from the context</span></div>
<div class="line">  click.echo(f<span class="stringliteral">&quot;Executing command: {ctx.command.name}&quot;</span>)</div>
<div class="line"> </div>
<div class="line">  <span class="comment"># Access parameters passed to *this* command</span></div>
<div class="line">  click.echo(f<span class="stringliteral">&quot;Verbose flag (local): {verbose}&quot;</span>)</div>
<div class="line"> </div>
<div class="line">  <span class="comment"># We can modify the shared object from the parent context</span></div>
<div class="line">  <span class="keywordflow">if</span> verbose:</div>
<div class="line">    ctx.obj[<span class="stringliteral">&#39;verbose&#39;</span>] = <span class="keyword">True</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment"># Access the shared object from the parent context</span></div>
<div class="line">  click.echo(f<span class="stringliteral">&quot;Verbose setting (shared): {ctx.obj[&#39;verbose&#39;]}&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line">  cli()</div>
</div><!-- fragment --><p>Let's break it down:</p>
<ol type="1">
<li><code>@click.pass_context</code>: We apply this decorator to both the <code>cli</code> group function and the <code>info</code> command function.</li>
<li><code>def cli(ctx): ...</code>: Because of <code>@pass_context</code>, the <code>cli</code> function now receives the <code>Context</code> object as its first argument, which we've named <code>ctx</code>.</li>
<li>&lsquo;ctx.obj = {'verbose&rsquo;: False}<code>: The</code>ctx.obj<code>attribute is a special place designed for you to store and share *your own* application data. Here, the main</code>cli<code>group initializes it as a dictionary. This object will be automatically inherited by child command contexts. 4.</code>def info(ctx, verbose): ...<code>: The</code>info<code>command function also receives the</code>Context<code>(</code>ctx<code>) as its first argument, followed by its own parameters (</code>verbose<code>). 5.</code>ctx.command.name<code>: We access the</code>Command<code>object associated with the current context via</code>ctx.command<code>and get its name. 6.</code>ctx.obj['verbose'] = True<code>: We can *modify* the shared</code>ctx.obj<code>from within the subcommand. 7.</code>click.echo(f"Verbose setting (shared): {ctx.obj['verbose']}")`: We access the potentially modified shared state.</li>
</ol>
<p><b>Run it!</b></p>
<div class="fragment"><div class="line">$ python context_basics.py info</div>
<div class="line">Executing command: info</div>
<div class="line">Verbose flag (local): False</div>
<div class="line">Verbose setting (shared): False</div>
<div class="line"> </div>
<div class="line">$ python context_basics.py info --verbose</div>
<div class="line">Executing command: info</div>
<div class="line">Verbose flag (local): True</div>
<div class="line">Verbose setting (shared): True</div>
</div><!-- fragment --><p>You can see how <code>@pass_context</code> gives us access to the runtime environment (<code>ctx.command.name</code>) and allows us to use <code>ctx.obj</code> to share state between the parent group (<code>cli</code>) and the subcommand (<code>info</code>).</p>
<h2><a class="anchor" id="autotoc_md1243"></a>
Key Context Attributes</h2>
<p>The <code>Context</code> object has several useful attributes:</p>
<ul>
<li><code>ctx.command</code>: The <a class="el" href="../../dd/db0/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Click_201__command______group.html">Command</a> object that this context belongs to. You can get its name (<code>ctx.command.name</code>), parameters, etc.</li>
<li><code>ctx.parent</code>: The context of the invoking command. If this is the top-level command, <code>ctx.parent</code> will be <code>None</code>. This forms a linked list or chain back to the root context.</li>
<li><code>ctx.params</code>: A dictionary mapping parameter names to the <em>final</em> values passed to the command, after parsing, type conversion, and defaults have been applied. ```python </li>
</ul>
<h1><a class="anchor" id="autotoc_md1244"></a>
access_params.py</h1>
<p>import click</p>
<p>@click.command() @click.option('&ndash;name', default='Guest') @click.pass_context def hello(ctx, name): click.echo(f"Hello, {name}!") </p>
<h1><a class="anchor" id="autotoc_md1245"></a>
Access the parameter value directly via ctx.params</h1>
<p>click.echo(f"(Value from ctx.params: {ctx.params['name']})")</p>
<p>if <b>name</b> == '<b>main</b>': hello() ``<code> Running</code>python access_params.py &ndash;name Alice<code>would show</code>Hello, Alice!<code>and</code>(Value from ctx.params: Alice)<code>. *</code>ctx.obj<code>: As seen before, this is an arbitrary object that gets passed down the context chain. It's commonly used for shared configuration, database connections, or other application-level state. You can also use</code>@click.pass_obj<code>as a shortcut if you *only* need</code>ctx.obj<code>. *</code>ctx.info_name<code>: The name that was used on the command line to invoke this command or group (e.g.,</code>info<code>in</code>python context_basics.py info<code>). *</code>ctx.invoked_subcommand<code>: For groups, this holds the name of the subcommand that was invoked (or</code>None` if no subcommand was called).</p>
<h2><a class="anchor" id="autotoc_md1246"></a>
Calling Other Commands</h2>
<p>Sometimes, you want one command to trigger another. The Context provides methods for this:</p>
<ul>
<li><code>ctx.invoke(other_command, **params)</code>: Calls another Click command (<code>other_command</code>), passing the current context's parent (<code>ctx.parent</code>) as the new command's parent. It uses the provided <code>params</code> for the call.</li>
<li><code>ctx.forward(other_command)</code>: Similar to <code>invoke</code>, but it automatically passes all parameters from the <em>current</em> context (<code>ctx.params</code>) to the <code>other_command</code>. This is useful for creating alias commands.</li>
</ul>
<div class="fragment"><div class="line"><span class="comment"># invoke_example.py</span></div>
<div class="line"><span class="keyword">import</span> click</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">@click.group()</span></div>
<div class="line"><span class="keyword">def </span>cli():</div>
<div class="line">  <span class="keywordflow">pass</span></div>
<div class="line"> </div>
<div class="line">@cli.command()</div>
<div class="line"><span class="preprocessor">@click.argument(&#39;text&#39;)</span></div>
<div class="line"><span class="keyword">def </span>print_it(text):</div>
<div class="line">  <span class="stringliteral">&quot;&quot;&quot;Prints the given text.&quot;&quot;&quot;</span></div>
<div class="line">  click.echo(f<span class="stringliteral">&quot;Printing: {text}&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">@cli.command()</span></div>
<div class="line"><span class="preprocessor">@click.argument(&#39;message&#39;)</span></div>
<div class="line"><span class="preprocessor">@click.pass_context</span> <span class="comment"># Need context to call invoke</span></div>
<div class="line"><span class="keyword">def </span>shout(ctx, message):</div>
<div class="line">  <span class="stringliteral">&quot;&quot;&quot;Shouts the message by calling print_it.&quot;&quot;&quot;</span></div>
<div class="line">  click.echo(<span class="stringliteral">&quot;About to invoke print_it...&quot;</span>)</div>
<div class="line">  <span class="comment"># Call the &#39;print_it&#39; command, passing the uppercased message</span></div>
<div class="line">  ctx.invoke(print_it, text=message.upper())</div>
<div class="line">  click.echo(<span class="stringliteral">&quot;Finished invoking print_it.&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line">  cli()</div>
</div><!-- fragment --><p>Running <code>python invoke_example.py shout "hello world"</code> will output:</p>
<div class="fragment"><div class="line">About to invoke print_it...</div>
<div class="line">Printing: HELLO WORLD</div>
<div class="line">Finished invoking print_it.</div>
</div><!-- fragment --><p>The <code>shout</code> command successfully called the <code>print_it</code> command programmatically using <code>ctx.invoke()</code>.</p>
<h2><a class="anchor" id="autotoc_md1247"></a>
Resource Management (<code>ctx.call_on_close</code>)</h2>
<p>Click uses the context internally to manage resources. For instance, when you use &lsquo;type=click.File('w&rsquo;)<code>, Click opens the file and registers a cleanup function using</code>ctx.call_on_close(file.close)`. This ensures the file is closed when the context is finished, even if errors occur.</p>
<p>You can use this mechanism yourself if you need custom resource cleanup tied to the command's lifecycle.</p>
<div class="fragment"><div class="line"><span class="comment"># resource_management.py</span></div>
<div class="line"><span class="keyword">import</span> click</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>MockResource:</div>
<div class="line">  <span class="keyword">def </span>__init__(self, name):</div>
<div class="line">    self.name = name</div>
<div class="line">    click.echo(f<span class="stringliteral">&quot;Resource &#39;{self.name}&#39; opened.&quot;</span>)</div>
<div class="line">  <span class="keyword">def </span>close(self):</div>
<div class="line">    click.echo(f<span class="stringliteral">&quot;Resource &#39;{self.name}&#39; closed.&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">@click.command()</span></div>
<div class="line"><span class="preprocessor">@click.pass_context</span></div>
<div class="line"><span class="keyword">def </span>process(ctx):</div>
<div class="line">  <span class="stringliteral">&quot;&quot;&quot;Opens and closes a mock resource.&quot;&quot;&quot;</span></div>
<div class="line">  res = MockResource(<span class="stringliteral">&quot;DataFile&quot;</span>)</div>
<div class="line">  <span class="comment"># Register the close method to be called when the context ends</span></div>
<div class="line">  ctx.call_on_close(res.close)</div>
<div class="line">  click.echo(<span class="stringliteral">&quot;Processing with resource...&quot;</span>)</div>
<div class="line">  <span class="comment"># Function ends, context tears down, call_on_close triggers</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line">  process()</div>
</div><!-- fragment --><p>Running this script will show:</p>
<div class="fragment"><div class="line">Resource &#39;DataFile&#39; opened.</div>
<div class="line">Processing with resource...</div>
<div class="line">Resource &#39;DataFile&#39; closed.</div>
</div><!-- fragment --><p>The resource was automatically closed because we registered its <code>close</code> method with <code>ctx.call_on_close</code>.</p>
<h2><a class="anchor" id="autotoc_md1248"></a>
How Context Works Under the Hood</h2>
<ol type="1">
<li><b>Initial Context:</b> When you run your Click application (e.g., by calling <code>cli()</code>), Click creates the first <code>Context</code> object associated with the top-level command or group (<code>cli</code> in our examples).</li>
<li><b>Parsing and Subcommand:</b> Click parses the command-line arguments. If a subcommand is identified (like <code>info</code> in <code>python context_basics.py info</code>), Click finds the corresponding <code>Command</code> object.</li>
<li><b>Child Context Creation:</b> Before executing the subcommand's callback function, Click creates a <em>new</em> <code>Context</code> object for the subcommand. Crucially, it sets the <code>parent</code> attribute of this new context to the context of the invoking command (the <code>cli</code> context in our example).</li>
<li><b>Object Inheritance:</b> The <code>ctx.obj</code> attribute is automatically passed down from the parent context to the child context <em>by reference</em> (unless the child explicitly sets its own <code>ctx.obj</code>).</li>
<li>**<code>@pass_context</code> Decorator:** This decorator (defined in <code>decorators.py</code>) wraps your callback function. When the wrapped function is called, the decorator uses <code>click.globals.get_current_context()</code> (which accesses a thread-local stack of contexts) to fetch the <em>currently active</em> context and inserts it as the first argument before calling your original function.</li>
<li><b><code>ctx.invoke</code>:</b> When you call <code>ctx.invoke(other_cmd, ...)</code>, Click finds the <code>other_cmd</code> object, creates a <em>new</em> context for it (setting its parent to <code>ctx.parent</code>), populates its <code>params</code> from the arguments you provided, and then executes <code>other_cmd</code>'s callback within that new context.</li>
<li><b>Cleanup:</b> Once a command function finishes (or raises an exception that Click handles), its corresponding context is "torn down". This is when any functions registered with <code>ctx.call_on_close</code> are executed.</li>
</ol>
<p>Here's a simplified diagram showing context creation and <code>ctx.obj</code> flow for <code>python context_basics.py info --verbose</code>:</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant User</div>
<div class="line">    participant CLI as python context_basics.py</div>
<div class="line">    participant ClickRuntime</div>
<div class="line">    participant cli_ctx as cli Context</div>
<div class="line">    participant info_ctx as info Context</div>
<div class="line">    participant cli_func as cli(ctx)</div>
<div class="line">    participant info_func as info(ctx, verbose)</div>
<div class="line"> </div>
<div class="line">    User-&gt;&gt;CLI: info --verbose</div>
<div class="line">    CLI-&gt;&gt;ClickRuntime: Calls cli() entry point</div>
<div class="line">    ClickRuntime-&gt;&gt;cli_ctx: Creates root context for &#39;cli&#39; group</div>
<div class="line">    Note over ClickRuntime, cli_func: ClickRuntime calls cli&#39;s callback (due to @click.group)</div>
<div class="line">    ClickRuntime-&gt;&gt;cli_func: cli(ctx=cli_ctx)</div>
<div class="line">    cli_func-&gt;&gt;cli_ctx: Sets ctx.obj = {&#39;verbose&#39;: False}</div>
<div class="line">    cli_func--&gt;&gt;ClickRuntime: Returns</div>
<div class="line">    ClickRuntime-&gt;&gt;ClickRuntime: Parses args, finds &#39;info&#39; subcommand, &#39;--verbose&#39; option</div>
<div class="line">    ClickRuntime-&gt;&gt;info_ctx: Creates child context for &#39;info&#39; command</div>
<div class="line">    info_ctx-&gt;&gt;cli_ctx: Sets info_ctx.parent = cli_ctx</div>
<div class="line">    info_ctx-&gt;&gt;info_ctx: Inherits ctx.obj from parent (value = {&#39;verbose&#39;: False})</div>
<div class="line">    Note over ClickRuntime, info_func: ClickRuntime prepares to call info&#39;s callback</div>
<div class="line">    ClickRuntime-&gt;&gt;ClickRuntime: Uses @pass_context to get info_ctx</div>
<div class="line">    ClickRuntime-&gt;&gt;info_func: info(ctx=info_ctx, verbose=True)</div>
<div class="line">    info_func-&gt;&gt;info_ctx: Accesses ctx.command.name</div>
<div class="line">    info_func-&gt;&gt;info_ctx: Accesses ctx.params[&#39;verbose&#39;] (or local &#39;verbose&#39;)</div>
<div class="line">    info_func-&gt;&gt;info_ctx: Modifies ctx.obj[&#39;verbose&#39;] = True</div>
<div class="line">    info_func-&gt;&gt;info_ctx: Accesses ctx.obj[&#39;verbose&#39;] (now True)</div>
<div class="line">    info_func--&gt;&gt;ClickRuntime: Returns</div>
<div class="line">    ClickRuntime-&gt;&gt;info_ctx: Tears down info_ctx (runs call_on_close)</div>
<div class="line">    ClickRuntime-&gt;&gt;cli_ctx: Tears down cli_ctx (runs call_on_close)</div>
<div class="line">    ClickRuntime--&gt;&gt;CLI: Exits</div>
</div><!-- fragment --><p>The core <code>Context</code> class is defined in <code>click/core.py</code>. The decorators <code>pass_context</code> and <code>pass_obj</code> are in <code>click/decorators.py</code>, and the mechanism for tracking the current context is in <code>click/globals.py</code>.</p>
<h2><a class="anchor" id="autotoc_md1249"></a>
Conclusion</h2>
<p>The <code>Context</code> (<code>ctx</code>) is a cornerstone concept in Click, acting as the runtime carrier of information for a command invocation.</p>
<p>You've learned:</p>
<ul>
<li>The Context holds data like the current command, parameters, parent context, and shared application objects (<code>ctx.obj</code>).</li>
<li>The <code>@click.pass_context</code> decorator injects the current Context into your command function.</li>
<li><code>ctx.obj</code> is essential for sharing state between nested commands.</li>
<li><code>ctx.invoke()</code> and <code>ctx.forward()</code> allow commands to call each other programmatically.</li>
<li>Click uses the context for resource management (<code>ctx.call_on_close</code>), ensuring cleanup.</li>
</ul>
<p>Understanding the Context is key to building more complex Click applications where commands need to interact with each other or with shared application state. It provides the structure and communication channels necessary for sophisticated CLI tools.</p>
<p>So far, we've focused on the logic and structure of commands. But how can we make the interaction in the terminal itself more engaging? How do we prompt users for input, show progress bars, or display colored output? Let's explore Click's terminal UI capabilities next!</p>
<p>Next up: <a class="el" href="../../d7/df7/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Click_206__term__ui____terminal__user__interface__.html">Chapter 6: Term UI (Terminal User Interface)</a></p>
<hr  />
<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
