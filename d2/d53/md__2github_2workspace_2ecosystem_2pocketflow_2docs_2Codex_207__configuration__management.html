#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: 07_configuration_management</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d2/d53/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Codex_207__configuration__management.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">07_configuration_management</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md1319"></a>
autotoc_md1319</h2>
<p>layout: default title: "Configuration Management" parent: "Codex" </p>
<h2><a class="anchor" id="autotoc_md1320"></a>
nav_order: 7</h2>
<h1><a class="anchor" id="autotoc_md1321"></a>
Chapter 7: Configuration Management</h1>
<p>In the <a class="el" href="../../dd/deb/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Codex_206__command__execution______sandboxing.html">previous chapter</a>, we saw how Codex carefully executes commands, using sandboxing for safety when needed. But how does Codex remember your preferences between sessions? For instance, how does it know which AI model you like to use, or whether you prefer <code>auto-edit</code> mode? And how can you give Codex persistent instructions about how you want it to behave?</p>
<p>This is where <b>Configuration Management</b> comes in. Think of it like the settings menu or preferences file for Codex.</p>
<h2><a class="anchor" id="autotoc_md1322"></a>
What's the Big Idea? Remembering Your Settings</h2>
<p>Imagine you prefer using the powerful <code>gpt-4o</code> model instead of the default <code>o4-mini</code>. Or perhaps you always want Codex to follow a specific coding style or avoid using certain commands unless you explicitly ask. It would be annoying to tell Codex this <em>every single time</em> you run it using command-line flags like <code>--model gpt-4o</code>.</p>
<p>Configuration Management solves this by allowing Codex to:</p>
<ol type="1">
<li><b>Load Default Settings:</b> Read a special file to know your preferred model, default <a class="el" href="../../d9/dc7/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Codex_204__approval__policy______security.html">Approval Policy</a> mode, etc.</li>
<li><b>Load Custom Instructions:</b> Read other special files containing your personal guidelines or project-specific rules for the AI.</li>
</ol>
<p>This way, Codex behaves consistently according to your setup without needing constant reminders. It's like setting up your favorite text editor with your preferred theme and plugins â€“ you do it once, and it remembers.</p>
<h2><a class="anchor" id="autotoc_md1323"></a>
Key Concepts</h2>
<ol type="1">
<li><b>Configuration File (<code>config.yaml</code>)</b>:<ul>
<li><b>Where:</b> Lives in your home directory, inside a hidden folder: <code>~/.codex/config.yaml</code> (it might also be <code>.json</code> or <code>.yml</code>).</li>
<li><b>What:</b> Stores your default settings. The most common setting is the AI <code>model</code> you want Codex to use. You can also set things like the default error handling behavior in <code>full-auto</code> mode (<code>fullAutoErrorMode</code>).</li>
<li><b>Format:</b> Usually written in YAML (or JSON), which is a simple, human-readable format.</li>
</ul>
</li>
<li><b>Instruction Files (<code>instructions.md</code>, <code>codex.md</code>)</b>:<ul>
<li><b>Where:</b><ul>
<li><b>Global:</b> <code>~/.codex/instructions.md</code> - These instructions apply every time you run Codex, anywhere on your system.</li>
<li><b>Project-Specific:</b> <code>codex.md</code> (or <code>.codex.md</code>) - Placed in the root directory of your code project (or sometimes in subdirectories). These instructions apply only when you run Codex within that specific project.</li>
</ul>
</li>
<li><b>What:</b> Contain text instructions (written in Markdown) that guide the AI's behavior. Think of it as giving your AI assistant standing orders.</li>
<li><b>Format:</b> Plain Markdown text.</li>
</ul>
</li>
<li><b>Loading Order:</b> Codex combines these instructions intelligently:<ul>
<li>It first reads the global instructions (<code>~/.codex/instructions.md</code>).</li>
<li>Then, if it finds a project-specific <code>codex.md</code> in your current working directory (or its parent Git repository root), it adds those instructions too. This lets project-specific rules override or add to your global ones.</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md1324"></a>
How to Use It: Setting Your Preferences</h2>
<p>Let's make Codex always use <code>gpt-4o</code> and give it a global instruction.</p>
<p><b>1. Set the Default Model:</b></p>
<p>Create or edit the file <code>~/.codex/config.yaml</code> (you might need to create the <code>.codex</code> directory first). Add the following content:</p>
<div class="fragment"><div class="line"># File: ~/.codex/config.yaml</div>
<div class="line"> </div>
<div class="line"># Use the gpt-4o model by default for all Codex runs</div>
<div class="line">model: gpt-4o</div>
<div class="line"> </div>
<div class="line"># Optional: How to handle errors when running commands in full-auto</div>
<div class="line"># fullAutoErrorMode: ask-user # (Default) Ask user what to do</div>
<div class="line"># fullAutoErrorMode: ignore-and-continue # Don&#39;t stop on error</div>
</div><!-- fragment --><ul>
<li><b>Explanation:</b> This simple YAML file tells Codex that your preferred <code>model</code> is <code>gpt-4o</code>. Now, you don't need to type <code>--model gpt-4o</code> every time!</li>
</ul>
<p><b>2. Add Global Instructions:</b></p>
<p>Create or edit the file <code>~/.codex/instructions.md</code>. Add some guidelines:</p>
<div class="fragment"><div class="line"># File: ~/.codex/instructions.md</div>
<div class="line"> </div>
<div class="line">- Always explain your reasoning step-by-step before suggesting code or commands.</div>
<div class="line">- Prefer using Python for scripting tasks unless otherwise specified.</div>
<div class="line">- Use emojis in your responses! ðŸŽ‰</div>
</div><!-- fragment --><ul>
<li><b>Explanation:</b> This Markdown file gives the AI assistant general rules to follow during <em>any</em> conversation.</li>
</ul>
<p><b>3. (Optional) Add Project Instructions:</b></p>
<p>Navigate to your project's root directory (e.g., <code>~/my-cool-project/</code>) and create a file named <code>codex.md</code>:</p>
<div class="fragment"><div class="line"># File: ~/my-cool-project/codex.md</div>
<div class="line"> </div>
<div class="line">- This project uses TypeScript and adheres to the Prettier style guide.</div>
<div class="line">- When adding new features, always include unit tests using Jest.</div>
<div class="line">- Do not run `git push` directly; always suggest creating a pull request.</div>
</div><!-- fragment --><ul>
<li><b>Explanation:</b> When you run <code>codex</code> inside <code>~/my-cool-project/</code>, the AI will get <em>both</em> the global instructions <em>and</em> these project-specific ones.</li>
</ul>
<p>Now, when you run <code>codex</code> (without any flags overriding these settings), it will automatically:</p>
<ul>
<li>Use the <code>gpt-4o</code> model.</li>
<li>Receive the combined instructions (global + project-specific, if applicable) to guide its responses and actions.</li>
</ul>
<p>You can disable loading the project <code>codex.md</code> file by using the <code>--no-project-doc</code> flag if needed.</p>
<h2><a class="anchor" id="autotoc_md1325"></a>
Under the Hood: How Codex Loads Configuration</h2>
<p>When you start the Codex CLI, one of the first things it does is figure out its configuration.</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant CLI as Codex CLI Process</div>
<div class="line">    participant ConfigLoader as config.ts (loadConfig)</div>
<div class="line">    participant FileSystem as Your Computer&#39;s Files</div>
<div class="line"> </div>
<div class="line">    CLI-&gt;&gt;ConfigLoader: Start: Call loadConfig()</div>
<div class="line">    ConfigLoader-&gt;&gt;FileSystem: Check for ~/.codex/config.yaml (or .json, .yml)?</div>
<div class="line">    FileSystem--&gt;&gt;ConfigLoader: Found config.yaml</div>
<div class="line">    ConfigLoader-&gt;&gt;FileSystem: Read ~/.codex/config.yaml</div>
<div class="line">    FileSystem--&gt;&gt;ConfigLoader: YAML content (e.g., model: gpt-4o)</div>
<div class="line">    ConfigLoader-&gt;&gt;ConfigLoader: Parse YAML, store model=&#39;gpt-4o&#39;</div>
<div class="line">    ConfigLoader-&gt;&gt;FileSystem: Check for ~/.codex/instructions.md?</div>
<div class="line">    FileSystem--&gt;&gt;ConfigLoader: Found instructions.md</div>
<div class="line">    ConfigLoader-&gt;&gt;FileSystem: Read ~/.codex/instructions.md</div>
<div class="line">    FileSystem--&gt;&gt;ConfigLoader: Global instructions text</div>
<div class="line">    ConfigLoader-&gt;&gt;FileSystem: Check for project &#39;codex.md&#39; (discoverProjectDocPath)?</div>
<div class="line">    FileSystem--&gt;&gt;ConfigLoader: Found project/codex.md</div>
<div class="line">    ConfigLoader-&gt;&gt;FileSystem: Read project/codex.md</div>
<div class="line">    FileSystem--&gt;&gt;ConfigLoader: Project instructions text</div>
<div class="line">    ConfigLoader-&gt;&gt;ConfigLoader: Combine global + project instructions</div>
<div class="line">    ConfigLoader--&gt;&gt;CLI: Return AppConfig object { model, instructions }</div>
<div class="line">    CLI-&gt;&gt;CLI: Use AppConfig for AgentLoop, etc.</div>
</div><!-- fragment --><ol type="1">
<li><b>Start:</b> The main CLI process (<code>cli.tsx</code>) starts up.</li>
<li><b>Load Config:</b> It calls the <code>loadConfig</code> function (from <code>utils/config.ts</code>).</li>
<li><b>Read Settings:</b> <code>loadConfig</code> looks for <code>~/.codex/config.yaml</code> (or <code>.json</code>/<code>.yml</code>). If found, it reads the file, parses the YAML/JSON, and stores the settings (like <code>model</code>). If not found, it uses defaults (like <code>o4-mini</code>).</li>
<li><b>Read Global Instructions:</b> It looks for <code>~/.codex/instructions.md</code>. If found, it reads the content.</li>
<li><b>Find Project Instructions:</b> It calls helper functions like <code>discoverProjectDocPath</code> to search the current directory and parent directories (up to the Git root) for a <code>codex.md</code> file.</li>
<li><b>Read Project Instructions:</b> If <code>codex.md</code> is found, it reads the content.</li>
<li><b>Combine:</b> <code>loadConfig</code> concatenates the global and project instructions (if any) into a single string.</li>
<li><b>Return:</b> It returns an <code>AppConfig</code> object containing the final model choice, the combined instructions, and other settings.</li>
<li><b>Use Config:</b> The CLI process then uses this <code>AppConfig</code> object when setting up the <a class="el" href="../../d0/dbd/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Codex_203__agent__loop.html">Agent Loop</a> and other parts of the application.</li>
</ol>
<h2><a class="anchor" id="autotoc_md1326"></a>
Diving into Code (<code>config.ts</code>)</h2>
<p>The magic happens mainly in <code>codex-cli/src/utils/config.ts</code>.</p>
<p>Here's how the CLI entry point (<code>cli.tsx</code>) uses <code>loadConfig</code>:</p>
<div class="fragment"><div class="line">// File: codex-cli/src/cli.tsx (Simplified)</div>
<div class="line"> </div>
<div class="line">import { loadConfig } from &quot;./utils/config&quot;;</div>
<div class="line">import App from &quot;./app&quot;;</div>
<div class="line">// ... other imports: React, render, meow ...</div>
<div class="line"> </div>
<div class="line">// --- Get command line arguments ---</div>
<div class="line">const cli = meow(/* ... cli setup ... */);</div>
<div class="line">const prompt = cli.input[0];</div>
<div class="line">const modelOverride = cli.flags.model; // e.g., --model gpt-4</div>
<div class="line"> </div>
<div class="line">// --- Load Configuration ---</div>
<div class="line">// loadConfig handles reading files and combining instructions</div>
<div class="line">let config = loadConfig(</div>
<div class="line">  undefined, // Use default config file paths</div>
<div class="line">  undefined, // Use default instructions file paths</div>
<div class="line">  {</div>
<div class="line">    cwd: process.cwd(), // Where are we running from? (for project docs)</div>
<div class="line">    disableProjectDoc: Boolean(cli.flags.noProjectDoc), // Did user pass --no-project-doc?</div>
<div class="line">    projectDocPath: cli.flags.projectDoc as string | undefined, // Explicit project doc?</div>
<div class="line">  }</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">// --- Apply Overrides ---</div>
<div class="line">// Command-line flags take precedence over config file settings</div>
<div class="line">config = {</div>
<div class="line">  ...config, // Start with loaded config</div>
<div class="line">  model: modelOverride ?? config.model, // Use flag model if provided, else keep loaded one</div>
<div class="line">  apiKey: process.env[&quot;OPENAI_API_KEY&quot;] || &quot;&quot;, // Get API key from environment</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">// --- Check Model Support ---</div>
<div class="line">// ... check if config.model is valid ...</div>
<div class="line"> </div>
<div class="line">// --- Render the App ---</div>
<div class="line">// Pass the final, combined config object to the main UI component</div>
<div class="line">const instance = render(</div>
<div class="line">  &lt;App</div>
<div class="line">    prompt={prompt}</div>
<div class="line">    config={config} // Use the loaded and merged configuration</div>
<div class="line">    // ... other props: approvalPolicy, etc. ...</div>
<div class="line">  /&gt;,</div>
<div class="line">);</div>
</div><!-- fragment --><ul>
<li><b>Explanation:</b> The code first calls <code>loadConfig</code>, passing options related to finding the project <code>codex.md</code>. It then merges these loaded settings with any overrides provided via command-line flags (like <code>--model</code>). The final <code>config</code> object is passed to the main React <code>&lt;App&gt;</code> component.</li>
</ul>
<p>Inside <code>config.ts</code>, the loading logic looks something like this:</p>
<div class="fragment"><div class="line">// File: codex-cli/src/utils/config.ts (Simplified)</div>
<div class="line"> </div>
<div class="line">import { existsSync, readFileSync } from &quot;fs&quot;;</div>
<div class="line">import { load as loadYaml } from &quot;js-yaml&quot;;</div>
<div class="line">import { homedir } from &quot;os&quot;;</div>
<div class="line">import { join, dirname, resolve as resolvePath } from &quot;path&quot;;</div>
<div class="line"> </div>
<div class="line">export const CONFIG_DIR = join(homedir(), &quot;.codex&quot;);</div>
<div class="line">export const CONFIG_YAML_FILEPATH = join(CONFIG_DIR, &quot;config.yaml&quot;);</div>
<div class="line">// ... other paths: .json, .yml, instructions.md ...</div>
<div class="line">export const DEFAULT_AGENTIC_MODEL = &quot;o4-mini&quot;;</div>
<div class="line"> </div>
<div class="line">// Represents full runtime config</div>
<div class="line">export type AppConfig = {</div>
<div class="line">  apiKey?: string;</div>
<div class="line">  model: string;</div>
<div class="line">  instructions: string;</div>
<div class="line">  // ... other settings ...</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">// Options for loading</div>
<div class="line">export type LoadConfigOptions = {</div>
<div class="line">  cwd?: string;</div>
<div class="line">  disableProjectDoc?: boolean;</div>
<div class="line">  projectDocPath?: string;</div>
<div class="line">  isFullContext?: boolean; // Affects default model choice</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">export const loadConfig = (</div>
<div class="line">  configPath: string | undefined = CONFIG_YAML_FILEPATH, // Default path</div>
<div class="line">  instructionsPath: string | undefined = join(CONFIG_DIR, &quot;instructions.md&quot;),</div>
<div class="line">  options: LoadConfigOptions = {},</div>
<div class="line">): AppConfig =&gt; {</div>
<div class="line">  let storedConfig: Record&lt;string, any&gt; = {}; // Holds data from config.yaml</div>
<div class="line"> </div>
<div class="line">  // 1. Find and read config.yaml/.json/.yml</div>
<div class="line">  let actualConfigPath = /* ... logic to find existing config file ... */ ;</div>
<div class="line">  if (existsSync(actualConfigPath)) {</div>
<div class="line">    try {</div>
<div class="line">      const raw = readFileSync(actualConfigPath, &quot;utf-8&quot;);</div>
<div class="line">      // Parse based on file extension (.yaml, .yml, .json)</div>
<div class="line">      storedConfig = /* ... parse YAML or JSON ... */ raw;</div>
<div class="line">    } catch { /* ignore parse errors */ }</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  // 2. Read global instructions.md</div>
<div class="line">  const userInstructions = existsSync(instructionsPath)</div>
<div class="line">    ? readFileSync(instructionsPath, &quot;utf-8&quot;)</div>
<div class="line">    : &quot;&quot;;</div>
<div class="line"> </div>
<div class="line">  // 3. Read project codex.md (if enabled)</div>
<div class="line">  let projectDoc = &quot;&quot;;</div>
<div class="line">  if (!options.disableProjectDoc /* ... and env var check ... */) {</div>
<div class="line">     const cwd = options.cwd ?? process.cwd();</div>
<div class="line">     // loadProjectDoc handles discovery and reading the file</div>
<div class="line">     projectDoc = loadProjectDoc(cwd, options.projectDocPath);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  // 4. Combine instructions</div>
<div class="line">  const combinedInstructions = [userInstructions, projectDoc]</div>
<div class="line">    .filter((s) =&gt; s?.trim()) // Remove empty strings</div>
<div class="line">    .join(&quot;\n\n--- project-doc ---\n\n&quot;); // Join with separator</div>
<div class="line"> </div>
<div class="line">  // 5. Determine final model (use stored, else default)</div>
<div class="line">  const model = storedConfig.model?.trim()</div>
<div class="line">      ? storedConfig.model.trim()</div>
<div class="line">      : (options.isFullContext ? /* full ctx default */ : DEFAULT_AGENTIC_MODEL);</div>
<div class="line"> </div>
<div class="line">  // 6. Assemble the final config object</div>
<div class="line">  const config: AppConfig = {</div>
<div class="line">    model: model,</div>
<div class="line">    instructions: combinedInstructions,</div>
<div class="line">    // ... merge other settings from storedConfig ...</div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line">  // ... First-run bootstrap logic to create default files if missing ...</div>
<div class="line"> </div>
<div class="line">  return config;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">// Helper to find and read project doc</div>
<div class="line">function loadProjectDoc(cwd: string, explicitPath?: string): string {</div>
<div class="line">  const filepath = explicitPath</div>
<div class="line">      ? resolvePath(cwd, explicitPath)</div>
<div class="line">      : discoverProjectDocPath(cwd); // Search logic</div>
<div class="line"> </div>
<div class="line">  if (!filepath || !existsSync(filepath)) return &quot;&quot;;</div>
<div class="line"> </div>
<div class="line">  try {</div>
<div class="line">    const buf = readFileSync(filepath);</div>
<div class="line">    // Limit size, return content</div>
<div class="line">    return buf.slice(0, /* MAX_BYTES */).toString(&quot;utf-8&quot;);</div>
<div class="line">  } catch { return &quot;&quot;; }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// Helper to find codex.md by walking up directories</div>
<div class="line">function discoverProjectDocPath(startDir: string): string | null {</div>
<div class="line">  // ... logic to check current dir, then walk up to git root ...</div>
<div class="line">  // ... checks for codex.md, .codex.md etc. ...</div>
<div class="line">  return /* path or null */;</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li><b>Explanation:</b> <code>loadConfig</code> reads the YAML/JSON config file, reads the global <code>instructions.md</code>, uses helpers like <code>loadProjectDoc</code> and <code>discoverProjectDocPath</code> to find and read the project-specific <code>codex.md</code>, combines the instructions, determines the final model name (using defaults if necessary), and returns everything in a structured <code>AppConfig</code> object.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1327"></a>
Conclusion</h2>
<p>Configuration Management makes Codex much more convenient and personalized. By reading settings from <code>~/.codex/config.yaml</code> and instructions from <code>~/.codex/instructions.md</code> and project-specific <code>codex.md</code> files, it remembers your preferences (like your favorite AI model) and follows your standing orders without you needing to repeat them every time. This allows for a smoother and more consistent interaction tailored to your workflow and project needs.</p>
<p>So far, we've mostly seen Codex working interactively in a chat-like loop. But what if you want Codex to perform a task and exit, perhaps as part of a script?</p>
<p>Next up: <a class="el" href="../../d5/d1b/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Codex_208__single__pass__mode.html">Single-Pass Mode</a></p>
<hr  />
<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
