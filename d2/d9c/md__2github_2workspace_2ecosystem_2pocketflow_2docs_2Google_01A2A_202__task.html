#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: 02_task</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d2/d9c/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Google_01A2A_202__task.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">02_task</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md1944"></a>
autotoc_md1944</h2>
<p>layout: default title: "Task" parent: "Google A2A" </p>
<h2><a class="anchor" id="autotoc_md1945"></a>
nav_order: 2</h2>
<h1><a class="anchor" id="autotoc_md1946"></a>
Chapter 2: Task - The AI's Work Order</h1>
<p>In the <a class="el" href="../../d7/d4e/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Google_01A2A_201__agent__card.html">previous chapter</a>, we learned how to find an AI agent and read its "business card" – the <b>Agent Card</b> – to understand what it can do and how to contact it. Think of it like finding a translator's contact information.</p>
<p>But just knowing the translator exists isn't enough. You need to actually <em>give them something to translate</em>! How do you formally request work from an A2A agent?</p>
<p>That's where the <b>Task</b> comes in. It solves the problem of <b>requesting and tracking work</b>.</p>
<h2><a class="anchor" id="autotoc_md1947"></a>
What is a Task?</h2>
<p>Imagine you run a busy workshop. When a customer comes in wanting something built or fixed, you don't just rely on a verbal request. You create a <b>work order</b> or a <b>job ticket</b>. This ticket contains:</p>
<ol type="1">
<li><b>What needs to be done?</b> (The customer's request - e.g., "Build a small bookshelf")</li>
<li><b>Who requested it?</b> (Customer details)</li>
<li><b>A unique ID</b> to track this specific job.</li>
<li><b>The current status</b> (e.g., "Not Started", "In Progress", "Awaiting Materials", "Completed").</li>
<li><b>The final result</b> (e.g., the finished bookshelf, or notes about why it couldn't be done).</li>
</ol>
<p>In the A2A world, a <b>Task</b> is exactly like that work order. It's the main way agents exchange work:</p>
<ol type="1">
<li><b>Instructions:</b> It starts with the initial request message from the client (e.g., "Translate 'hello world' to French").</li>
<li><b>Tracking ID:</b> Each task gets a unique ID so both the client and the agent know which job they're talking about.</li>
<li><b>Status:</b> It has a state that changes as the agent works on it (e.g., <code>submitted</code>, <code>working</code>, <code>completed</code>, <code>failed</code>).</li>
<li><b>Results:</b> When finished, it holds the output, called <b>Artifacts</b> (e.g., the translated text "Bonjour le monde").</li>
</ol>
<p>So, if our "Translator Agent" receives a Task asking for a translation, that Task object will contain the text to translate, track whether the agent is currently translating it, and eventually hold the French translation once it's done.</p>
<h2><a class="anchor" id="autotoc_md1948"></a>
Creating and Sending a Task</h2>
<p>How does a client (like your application, or another agent) actually create and send a Task to an agent server? It uses a specific command defined by the A2A protocol, usually called <code>tasks/send</code>.</p>
<p>Let's say our client found the "Translator Agent" from Chapter 1 and knows its <code>url</code> is <code><a href="http://translator-agent.com/a2a">http://translator-agent.com/a2a</a></code>. The client wants to translate "hello".</p>
<p>Here's a simplified Python example of how the client might send this request:</p>
<div class="fragment"><div class="line"><span class="comment"># File: samples/python/hosts/cli/cli_host.py (Conceptual Snippet)</span></div>
<div class="line"><span class="keyword">import</span> requests</div>
<div class="line"><span class="keyword">import</span> json</div>
<div class="line"><span class="keyword">import</span> uuid <span class="comment"># To generate unique IDs</span></div>
<div class="line"><span class="keyword">from</span> common.types <span class="keyword">import</span> TaskSendParams, Message, TextPart, Task</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Agent&#39;s communication endpoint (from Agent Card)</span></div>
<div class="line">agent_a2a_url = <span class="stringliteral">&quot;http://translator-agent.com/a2a&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># 1. Prepare the Task request details</span></div>
<div class="line">task_id = str(uuid.uuid4()) <span class="comment"># Generate a unique ID for this job</span></div>
<div class="line">user_message = Message(</div>
<div class="line">    role=<span class="stringliteral">&quot;user&quot;</span>,</div>
<div class="line">    parts=[TextPart(text=<span class="stringliteral">&quot;Translate &#39;hello&#39; to French&quot;</span>)]</div>
<div class="line">)</div>
<div class="line">task_params = TaskSendParams(id=task_id, message=user_message)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># 2. Create the JSON-RPC request structure</span></div>
<div class="line">request_payload = {</div>
<div class="line">    <span class="stringliteral">&quot;jsonrpc&quot;</span>: <span class="stringliteral">&quot;2.0&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;method&quot;</span>: <span class="stringliteral">&quot;tasks/send&quot;</span>, <span class="comment"># The command to send a task</span></div>
<div class="line">    <span class="stringliteral">&quot;params&quot;</span>: task_params.model_dump(exclude_none=<span class="keyword">True</span>), <span class="comment"># Our task details</span></div>
<div class="line">    <span class="stringliteral">&quot;id&quot;</span>: <span class="stringliteral">&quot;req-1&quot;</span> <span class="comment"># An ID for *this specific web request*</span></div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment"># 3. Send the request to the agent&#39;s URL</span></div>
<div class="line">print(f<span class="stringliteral">&quot;Sending task {task_id} to {agent_a2a_url}&quot;</span>)</div>
<div class="line">response = requests.post(agent_a2a_url, json=request_payload)</div>
<div class="line">response.raise_for_status() <span class="comment"># Check for HTTP errors</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># 4. Process the response</span></div>
<div class="line">response_data = response.json()</div>
<div class="line"><span class="keywordflow">if</span> response_data.get(<span class="stringliteral">&quot;result&quot;</span>):</div>
<div class="line">  <span class="comment"># Agent accepted the task! It returns the initial Task object.</span></div>
<div class="line">  initial_task = Task(**response_data[<span class="stringliteral">&quot;result&quot;</span>])</div>
<div class="line">  print(f<span class="stringliteral">&quot;Task created! ID: {initial_task.id}, State: {initial_task.status.state}&quot;</span>)</div>
<div class="line"><span class="keywordflow">elif</span> response_data.get(<span class="stringliteral">&quot;error&quot;</span>):</div>
<div class="line">  print(f<span class="stringliteral">&quot;Error creating task: {response_data[&#39;error&#39;]}&quot;</span>)</div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ol type="1">
<li><b>Prepare Details:</b> We generate a unique <code>task_id</code> and create the <code>Message</code> containing the text we want translated. These become the <code>params</code> for our request.</li>
<li><b>Build Request:</b> We wrap our <code>params</code> in a standard structure specifying the <code>method</code> (<code>tasks/send</code>) we want the agent to execute. (This structure is part of JSON-RPC, which is used by A2A - more on this in the <a class="el" href="../../d8/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Google_01A2A_203__a2a__protocol______core__types.html">next chapter</a>).</li>
<li><b>Send:</b> We use the <code>requests</code> library to send this structure as JSON data via an HTTP POST request to the agent's A2A <code>url</code>.</li>
<li><b>Process Response:</b> The agent sends back a response. If successful, the <code>result</code> contains the newly created <code>Task</code> object, likely in the <code>submitted</code> state. We print its ID and initial state. If something went wrong, the <code>error</code> field will contain details.</li>
</ol>
<p><b>Example Output:</b></p>
<div class="fragment"><div class="line">Sending task a1b2c3d4-e5f6-7890-abcd-ef1234567890 to http://translator-agent.com/a2a</div>
<div class="line">Task created! ID: a1b2c3d4-e5f6-7890-abcd-ef1234567890, State: submitted</div>
</div><!-- fragment --><p>Now the client knows the task was received and has its unique ID (<code>a1b2c3d4-...</code>). It can use this ID later to check the status or get the final result.</p>
<h2><a class="anchor" id="autotoc_md1949"></a>
Task Lifecycle: States</h2>
<p>A task doesn't just get created and instantly completed. It goes through different stages, represented by its <code>state</code> field. Here are the main states:</p>
<ul>
<li><code>submitted</code>: The agent has received the task request but hasn't started working on it yet.</li>
<li><code>working</code>: The agent is actively processing the request (e.g., performing the translation).</li>
<li><code>input-required</code>: (Optional) The agent needs more information from the client to continue. The client would then send another message using the same Task ID.</li>
<li><code>completed</code>: The agent finished successfully. The results are available in the Task's <code>artifacts</code>.</li>
<li><code>failed</code>: The agent encountered an error and could not complete the task.</li>
<li><code>canceled</code>: The client (or agent) explicitly canceled the task before completion.</li>
<li><code>unknown</code>: The state couldn't be determined.</li>
</ul>
<p>These states allow the client to understand the progress of their request. For long-running tasks, the agent might even send updates as the state changes (we'll cover this in <a class="el" href="../../d0/d60/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Google_01A2A_207__streaming__communication____sse__.html">Chapter 7: Streaming Communication (SSE)</a>).</p>
<h2><a class="anchor" id="autotoc_md1950"></a>
Under the Hood: How a Task is Handled</h2>
<p>Let's trace what happens when the client sends that <code>tasks/send</code> request:</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant C as Client App</div>
<div class="line">    participant A as Agent Server (A2A Endpoint)</div>
<div class="line">    participant TS as Task Store (e.g., Memory, DB)</div>
<div class="line">    participant TL as Task Logic (e.g., Translator)</div>
<div class="line"> </div>
<div class="line">    C-&gt;&gt;A: POST /a2a (JSON-RPC: method=&quot;tasks/send&quot;, params={id=&quot;T1&quot;, msg=&quot;Translate...&quot;})</div>
<div class="line">    Note right of A: Receives HTTP request, parses JSON-RPC</div>
<div class="line"> </div>
<div class="line">    A-&gt;&gt;TS: Create/Find Task Record (ID: &quot;T1&quot;)</div>
<div class="line">    Note right of TS: Creates a new Task object in &#39;submitted&#39; state</div>
<div class="line">    TS--&gt;&gt;A: New Task Object (ID: &quot;T1&quot;, state: &quot;submitted&quot;)</div>
<div class="line"> </div>
<div class="line">    A--&gt;&gt;C: 200 OK (JSON-RPC: result={Task Object with state &#39;submitted&#39;})</div>
<div class="line">    Note left of C: Client receives confirmation Task is created</div>
<div class="line"> </div>
<div class="line">    Note over A,TL: Agent asynchronously starts processing...</div>
<div class="line">    A-&gt;&gt;TL: Start processing Task &quot;T1&quot; (Input: &quot;Translate...&quot;)</div>
<div class="line">    A-&gt;&gt;TS: Update Task &quot;T1&quot; status to &#39;working&#39;</div>
<div class="line">    Note right of TS: Updates Task record state</div>
<div class="line"> </div>
<div class="line">    TL-&gt;&gt;A: Processing finished (Output: &quot;Bonjour&quot;)</div>
<div class="line">    Note over A,TS: Agent updates Task with result and &#39;completed&#39; state</div>
<div class="line">    A-&gt;&gt;TS: Update Task &quot;T1&quot; (state: &#39;completed&#39;, artifacts: [&quot;Bonjour&quot;])</div>
</div><!-- fragment --><p><b>Steps:</b></p>
<ol type="1">
<li><b>Client Sends Request:</b> The client sends the <code>tasks/send</code> JSON-RPC request via HTTP POST to the agent's A2A URL.</li>
<li><b>Server Receives:</b> The agent server receives the request and understands it wants to start a task.</li>
<li><b>Server Stores Task:</b> The server creates a new <code>Task</code> record (using something like the <code>InMemoryTaskStore</code> or <code>FileStore</code> shown in <code>samples/js/src/server/store.ts</code> or conceptually managed by <code>samples/python/common/server/task_manager.py</code>). It assigns the initial <code>submitted</code> state and stores the user's message.</li>
<li><b>Server Responds:</b> The server immediately sends a response back to the client confirming the task was created, including the initial <code>Task</code> object.</li>
<li><b>Server Processes (Async):</b> The server (likely in the background) triggers the actual work (e.g., calls its internal translation logic). It updates the task's state in the store to <code>working</code>.</li>
<li><b>Server Completes:</b> Once the translation is done, the server updates the task's state to <code>completed</code> and adds the result ("Bonjour") as an <code>Artifact</code> in the task record within the store.</li>
</ol>
<p>The client can later use the Task ID (<code>T1</code>) to fetch the updated Task object (using a different command like <code>tasks/get</code>) and retrieve the final translation from the <code>artifacts</code>.</p>
<h3><a class="anchor" id="autotoc_md1951"></a>
Key Data Structures</h3>
<p>The definition of these structures can be found in the protocol specification and helper libraries:</p>
<ul>
<li><b>Task:</b> (<code>samples/python/common/types.py:Task</code>, <code>samples/js/src/schema.ts:Task</code>) Holds the ID, status, artifacts, history, etc.</li>
<li><b>Message:</b> (<code>samples/python/common/types.py:Message</code>, <code>samples/js/src/schema.ts:Message</code>) Represents a communication turn (user or agent) containing Parts.</li>
<li><b>Part:</b> (<code>samples/python/common/types.py:Part</code>, <code>samples/js/src/schema.ts:Part</code>) The actual content (text, file, or structured data).</li>
<li><b>Artifact:</b> (<code>samples/python/common/types.py:Artifact</code>, <code>samples/js/src/schema.ts:Artifact</code>) Output generated by the agent, also composed of Parts.</li>
<li><b>TaskStatus:</b> (<code>samples/python/common/types.py:TaskStatus</code>, <code>samples/js/src/schema.ts:TaskStatus</code>) Contains the <code>TaskState</code> and timestamp.</li>
</ul>
<div class="fragment"><div class="line">// File: samples/js/src/schema.ts (Simplified Task Structure)</div>
<div class="line"> </div>
<div class="line">export interface Task {</div>
<div class="line">  // Unique identifier for the task.</div>
<div class="line">  id: string;</div>
<div class="line">  // The current status of the task.</div>
<div class="line">  status: TaskStatus;</div>
<div class="line">  // Optional list of artifacts (outputs).</div>
<div class="line">  artifacts?: Artifact[] | null;</div>
<div class="line">  // (Optional) History of messages for this task</div>
<div class="line">  // history?: Message[] | null;</div>
<div class="line">  // ... other fields like sessionId, metadata</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">export interface TaskStatus {</div>
<div class="line">  // The current state (e.g., &quot;submitted&quot;, &quot;working&quot;, &quot;completed&quot;).</div>
<div class="line">  state: TaskState;</div>
<div class="line">  // Optional message associated with this status.</div>
<div class="line">  message?: Message | null;</div>
<div class="line">  // Timestamp of this status update.</div>
<div class="line">  timestamp?: string;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">// Example Artifact containing translated text</div>
<div class="line">// artifact = { parts: [ { type: &quot;text&quot;, text: &quot;Bonjour le monde&quot; } ] }</div>
</div><!-- fragment --><p>This structure acts as the digital "work order" that travels between the client and the agent, carrying the request, tracking progress, and holding the final result.</p>
<h2><a class="anchor" id="autotoc_md1952"></a>
Conclusion</h2>
<p>The <b>Task</b> is the fundamental unit of work in the A2A protocol. It's how one agent asks another to do something. Think of it as a formal job request or work order that:</p>
<ul>
<li>Contains the initial instructions (as a <code>Message</code>).</li>
<li>Has a unique ID for tracking.</li>
<li>Goes through different states (<code>submitted</code>, <code>working</code>, <code>completed</code>, etc.) to show progress.</li>
<li>Holds the final results (<code>Artifacts</code>).</li>
</ul>
<p>By sending a <code>tasks/send</code> request, a client initiates a Task, and by checking the Task's status and artifacts later, the client gets the results.</p>
<p>Now that we understand the basic concepts of finding an agent (<a class="el" href="../../d7/d4e/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Google_01A2A_201__agent__card.html">Agent Card</a>) and giving it work (<a class="el" href="../../d2/d9c/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Google_01A2A_202__task.html">Task</a>), let's look closer at the communication rules and the specific data types used in the A2A protocol.</p>
<p><b>Next:</b> <a class="el" href="../../d8/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Google_01A2A_203__a2a__protocol______core__types.html">Chapter 3: A2A Protocol &amp; Core Types</a></p>
<hr  />
<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
