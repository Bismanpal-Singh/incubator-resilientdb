#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: 02_agent</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">02_agent</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md1479"></a>
autotoc_md1479</h2>
<p>layout: default title: "Agent" parent: "CrewAI" </p>
<h2><a class="anchor" id="autotoc_md1480"></a>
nav_order: 2</h2>
<h1><a class="anchor" id="autotoc_md1481"></a>
Chapter 2: Agent - Your Specialized AI Worker</h1>
<p>In <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Chapter 1</a>, we learned about the <code>Crew</code> – the manager that organizes our AI team. But a manager needs a team to manage! That's where <code>Agent</code>s come in.</p>
<h2><a class="anchor" id="autotoc_md1482"></a>
Why Do We Need Agents?</h2>
<p>Imagine our trip planning <code>Crew</code> again. The <code>Crew</code> knows the overall goal (plan a surprise trip), but it doesn't <em>do</em> the research or the planning itself. It needs specialists.</p>
<ul>
<li>One specialist could be excellent at researching travel destinations.</li>
<li>Another could be fantastic at creating detailed itineraries.</li>
</ul>
<p>In CrewAI, these specialists are called <b><code>Agent</code>s</b>. Instead of having one super-smart AI try to juggle everything, we create multiple <code>Agent</code>s, each with its own focus and expertise. This makes complex tasks more manageable and often leads to better results.</p>
<p><b>Problem Solved:</b> <code>Agent</code>s allow you to break down a large task into smaller pieces and assign each piece to an AI worker specifically designed for it.</p>
<h2><a class="anchor" id="autotoc_md1483"></a>
What is an Agent?</h2>
<p>Think of an <code>Agent</code> as a <b>dedicated AI worker</b> on your <code>Crew</code>. Each <code>Agent</code> has a unique profile that defines who they are and what they do:</p>
<ol type="1">
<li><b><code>role</code></b>: This is the Agent's job title. What function do they perform in the team? Examples: 'Travel Researcher', 'Marketing Analyst', 'Code Reviewer', 'Blog Post Writer'.</li>
<li><b><code>goal</code></b>: This is the Agent's primary objective. What specific outcome are they trying to achieve within their role? Examples: 'Find the top 3 family-friendly European destinations', 'Analyze competitor website traffic', 'Identify bugs in Python code', 'Draft an engaging blog post about AI'.</li>
<li><b><code>backstory</code></b>: This is the Agent's personality, skills, and history. It tells the AI <em>how</em> to behave and what expertise it possesses. It adds flavour and context. Examples: 'An expert travel agent with 20 years of experience in European travel.', 'A data-driven market analyst known for spotting emerging trends.', 'A meticulous senior software engineer obsessed with code quality.', 'A witty content creator known for simplifying complex topics.'</li>
<li><b><code>llm</code></b> (Optional): This is the Agent's "brain" – the specific Large Language Model (like GPT-4, Gemini, etc.) it uses to think, communicate, and execute tasks. We'll cover this more in the <a class="el" href="../../da/d0f/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_206__llm.html">LLM chapter</a>. If not specified, it usually inherits the <code>Crew</code>'s default LLM.</li>
<li><b><code>tools</code></b> (Optional): These are special capabilities the Agent can use, like searching the web, using a calculator, or reading files. Think of them as the Agent's equipment. We'll explore these in the <a class="el" href="../../d0/dbf/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_204__tool.html">Tool chapter</a>.</li>
<li><b><code>allow_delegation</code></b> (Optional, default <code>False</code>): Can this Agent ask other Agents in the <code>Crew</code> for help with a sub-task? If <code>True</code>, it enables collaboration.</li>
<li><b><code>verbose</code></b> (Optional, default <code>False</code>): If <code>True</code>, the Agent will print out its thought process as it works, which is great for debugging and understanding what's happening.</li>
</ol>
<p>An Agent takes the <a class="el" href="../../d1/dae/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_203__task.html">Tasks</a> assigned to it by the <code>Crew</code> and uses its <code>role</code>, <code>goal</code>, <code>backstory</code>, <code>llm</code>, and <code>tools</code> to complete them.</p>
<h2><a class="anchor" id="autotoc_md1484"></a>
Let's Define an Agent!</h2>
<p>Let's revisit the <code>researcher</code> Agent from Chapter 1 and look closely at how it's defined.</p>
<div class="fragment"><div class="line"><span class="comment"># Make sure you have crewai installed</span></div>
<div class="line"><span class="comment"># pip install crewai</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> crewai <span class="keyword">import</span> Agent</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Define our researcher agent</span></div>
<div class="line">researcher = Agent(</div>
<div class="line">  role=<span class="stringliteral">&#39;Expert Travel Researcher&#39;</span>,</div>
<div class="line">  goal=<span class="stringliteral">&#39;Find the most exciting and sunny European cities for a birthday trip in late May.&#39;</span>,</div>
<div class="line">  backstory=(</div>
<div class="line">      <span class="stringliteral">&quot;You are a world-class travel researcher with deep knowledge of &quot;</span></div>
<div class="line">      <span class="stringliteral">&quot;European destinations. You excel at finding hidden gems and understanding &quot;</span></div>
<div class="line">      <span class="stringliteral">&quot;weather patterns. Your recommendations are always insightful and tailored.&quot;</span></div>
<div class="line">  ),</div>
<div class="line">  verbose=<span class="keyword">True</span>, <span class="comment"># We want to see the agent&#39;s thinking process</span></div>
<div class="line">  allow_delegation=<span class="keyword">False</span> <span class="comment"># This agent focuses on its own research</span></div>
<div class="line">  <span class="comment"># tools=[...] # We&#39;ll add tools later!</span></div>
<div class="line">  <span class="comment"># llm=your_llm # We&#39;ll cover LLMs later!</span></div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># (You would typically define other agents, tasks, and a crew here)</span></div>
<div class="line"><span class="comment"># print(researcher) # Just to see the object</span></div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ul>
<li><code>from crewai import Agent</code>: We import the necessary <code>Agent</code> class.</li>
<li>&lsquo;role='Expert Travel Researcher&rsquo;<code>: We clearly define the agent's job title. This tells the LLM its primary function. *</code>goal='Find the most exciting...'<code>: We give it a specific, measurable objective. This guides its actions. *</code>backstory='You are a world-class...'<code>: We provide context and personality. This influences the *style* and *quality* of its output. Notice the detailed description – this helps the LLM adopt the persona. *</code>verbose=True<code>: We'll see detailed logs of this agent's thoughts and actions when it runs. *</code>allow_delegation=False`: This researcher won't ask other agents for help; it will complete its task independently.</li>
</ul>
<p>Running this code snippet creates an <code>Agent</code> object in Python. This object is now ready to be added to a <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a> and assigned <a class="el" href="../../d1/dae/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_203__task.html">Tasks</a>.</p>
<h2><a class="anchor" id="autotoc_md1485"></a>
How Agents Work "Under the Hood"</h2>
<p>So, what happens when an <code>Agent</code> is given a task by the <code>Crew</code>?</p>
<ol type="1">
<li><b>Receive Task &amp; Context:</b> The <code>Agent</code> gets the task description (e.g., "Find 3 sunny cities") and potentially some context from previous tasks (e.g., "The user prefers coastal cities").</li>
<li><b>Consult Profile:</b> It looks at its own <code>role</code>, <code>goal</code>, and <code>backstory</code>. This helps it frame <em>how</em> to tackle the task. Our 'Expert Travel Researcher' will approach this differently than a 'Budget Backpacker Blogger'.</li>
<li><b>Think &amp; Plan (Using LLM):</b> The <code>Agent</code> uses its assigned <code>llm</code> (its brain) to think. It breaks down the task, formulates a plan, and decides what information it needs. This often involves an internal "monologue" (which you can see if <code>verbose=True</code>).</li>
<li><b>Use Tools (If Necessary):</b> If the plan requires external information or actions (like searching the web for current weather or calculating travel times), and the agent <em>has</em> the right <a class="el" href="../../d0/dbf/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_204__tool.html">Tools</a>, it will use them.</li>
<li><b>Delegate (If Allowed &amp; Necessary):</b> If <code>allow_delegation=True</code> and the <code>Agent</code> decides a sub-part of the task is better handled by another specialist <code>Agent</code> in the <code>Crew</code>, it can ask the <code>Crew</code> to delegate that part.</li>
<li><b>Generate Output (Using LLM):</b> Based on its thinking, tool results, and potentially delegated results, the <code>Agent</code> uses its <code>llm</code> again to formulate the final response or output for the task.</li>
<li><b>Return Result:</b> The <code>Agent</code> passes its completed work back to the <code>Crew</code>.</li>
</ol>
<p>Let's visualize this simplified flow:</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant C as Crew</div>
<div class="line">    participant MyAgent as Agent (Researcher)</div>
<div class="line">    participant LLM as Agent&#39;s Brain</div>
<div class="line">    participant SearchTool as Tool</div>
<div class="line"> </div>
<div class="line">    C-&gt;&gt;MyAgent: Execute Task (&quot;Find sunny cities in May&quot;)</div>
<div class="line">    MyAgent-&gt;&gt;MyAgent: Consult profile (Role, Goal, Backstory)</div>
<div class="line">    MyAgent-&gt;&gt;LLM: Formulate plan &amp; Ask: &quot;Best way to find sunny cities?&quot;</div>
<div class="line">    LLM--&gt;&gt;MyAgent: Suggestion: &quot;Search web for &#39;Europe weather May&#39;&quot;</div>
<div class="line">    MyAgent-&gt;&gt;SearchTool: Use Tool(query=&quot;Europe weather May sunny cities&quot;)</div>
<div class="line">    SearchTool--&gt;&gt;MyAgent: Web search results (e.g., Lisbon, Seville, Malta)</div>
<div class="line">    MyAgent-&gt;&gt;LLM: Consolidate results &amp; Ask: &quot;Format these 3 cities nicely&quot;</div>
<div class="line">    LLM--&gt;&gt;MyAgent: Formatted list: &quot;1. Lisbon...&quot;</div>
<div class="line">    MyAgent--&gt;&gt;C: Task Result (&quot;Here are 3 sunny cities: Lisbon...&quot;)</div>
</div><!-- fragment --><p><b>Diving into the Code (<code>agent.py</code>)</b></p>
<p>The core logic for the <code>Agent</code> resides in the <code>crewai/agent.py</code> file.</p>
<p>The <code>Agent</code> class itself inherits from <code>BaseAgent</code> (<code>crewai/agents/agent_builder/base_agent.py</code>) and primarily stores the configuration you provide:</p>
<div class="fragment"><div class="line"><span class="comment"># Simplified view from crewai/agent.py</span></div>
<div class="line"><span class="keyword">from</span> crewai.agents.agent_builder.base_agent <span class="keyword">import</span> BaseAgent</div>
<div class="line"><span class="comment"># ... other imports</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>Agent(BaseAgent):</div>
<div class="line">    role: str = Field(description=<span class="stringliteral">&quot;Role of the agent&quot;</span>)</div>
<div class="line">    goal: str = Field(description=<span class="stringliteral">&quot;Objective of the agent&quot;</span>)</div>
<div class="line">    backstory: str = Field(description=<span class="stringliteral">&quot;Backstory of the agent&quot;</span>)</div>
<div class="line">    llm: Any = Field(default=<span class="keywordtype">None</span>, description=<span class="stringliteral">&quot;LLM instance&quot;</span>)</div>
<div class="line">    tools: Optional[List[BaseTool]] = Field(default_factory=list)</div>
<div class="line">    allow_delegation: bool = Field(default=<span class="keyword">False</span>)</div>
<div class="line">    verbose: bool = Field(default=<span class="keyword">False</span>)</div>
<div class="line">    <span class="comment"># ... other fields like memory, max_iter, etc.</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>execute_task(</div>
<div class="line">        self,</div>
<div class="line">        task: Task,</div>
<div class="line">        context: Optional[str] = <span class="keywordtype">None</span>,</div>
<div class="line">        tools: Optional[List[BaseTool]] = <span class="keywordtype">None</span>,</div>
<div class="line">    ) -&gt; str:</div>
<div class="line">        <span class="comment"># ... (steps 1 &amp; 2: Prepare task prompt with context, memory, knowledge) ...</span></div>
<div class="line"> </div>
<div class="line">        task_prompt = task.prompt() <span class="comment"># Get base task description</span></div>
<div class="line">        <span class="keywordflow">if</span> context:</div>
<div class="line">            task_prompt = f<span class="stringliteral">&quot;{task_prompt}\nContext:\n{context}&quot;</span></div>
<div class="line">        <span class="comment"># Add memory, knowledge, tool descriptions etc. to the prompt...</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment"># ... (Internal setup: Create AgentExecutor if needed) ...</span></div>
<div class="line">        self.create_agent_executor(tools=tools <span class="keywordflow">or</span> self.tools)</div>
<div class="line"> </div>
<div class="line">        <span class="comment"># ... (Step 3-7: Run the execution loop via AgentExecutor) ...</span></div>
<div class="line">        result = self.agent_executor.invoke({</div>
<div class="line">            <span class="stringliteral">&quot;input&quot;</span>: task_prompt,</div>
<div class="line">            <span class="stringliteral">&quot;tool_names&quot;</span>: self._get_tool_names(self.agent_executor.tools),</div>
<div class="line">            <span class="stringliteral">&quot;tools&quot;</span>: self._get_tool_descriptions(self.agent_executor.tools),</div>
<div class="line">            <span class="comment"># ... other inputs for the executor ...</span></div>
<div class="line">        })[<span class="stringliteral">&quot;output&quot;</span>] <span class="comment"># Extract the final string output</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> result</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>create_agent_executor(self, tools: Optional[List[BaseTool]] = <span class="keywordtype">None</span>) -&gt; <span class="keywordtype">None</span>:</div>
<div class="line">        <span class="comment"># Sets up the internal CrewAgentExecutor which handles the actual</span></div>
<div class="line">        <span class="comment"># interaction loop with the LLM and tools.</span></div>
<div class="line">        <span class="comment"># It uses the agent&#39;s profile (role, goal, backstory) to build the main prompt.</span></div>
<div class="line">        <span class="keywordflow">pass</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># ... other helper methods ...</span></div>
</div><!-- fragment --><p>Key takeaways from the code:</p>
<ul>
<li>The <code>Agent</code> class mainly holds the configuration (<code>role</code>, <code>goal</code>, <code>backstory</code>, <code>llm</code>, <code>tools</code>, etc.).</li>
<li>The <code>execute_task</code> method is called by the <code>Crew</code> when it's the agent's turn.</li>
<li>It prepares a detailed prompt for the underlying LLM, incorporating the task, context, the agent's profile, and available tools.</li>
<li>It uses an internal object called <code>agent_executor</code> (specifically <code>CrewAgentExecutor</code> from <code>crewai/agents/crew_agent_executor.py</code>) to manage the actual step-by-step thinking, tool use, and response generation loop with the LLM.</li>
</ul>
<p>You don't need to understand the <code>agent_executor</code> in detail right now, just know that it's the engine that drives the agent's execution based on the profile and task you provide.</p>
<h2><a class="anchor" id="autotoc_md1486"></a>
Conclusion</h2>
<p>You've now met the core members of your AI team: the <code>Agent</code>s! You learned that each <code>Agent</code> is a specialized worker defined by its <code>role</code>, <code>goal</code>, and <code>backstory</code>. They use an <a class="el" href="../../da/d0f/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_206__llm.html">LLM</a> as their brain and can be equipped with <a class="el" href="../../d0/dbf/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_204__tool.html">Tools</a> to perform specific actions.</p>
<p>We saw how to define an agent in code and got a glimpse into how they process information and execute the work assigned by the <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a>.</p>
<p>But defining an <code>Agent</code> is only half the story. What specific work should they <em>do</em>? How do we describe the individual steps needed to achieve the <code>Crew</code>'s overall objective? That's where the next concept comes in: the <a class="el" href="../../d1/dae/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_203__task.html">Task</a>. Let's dive into defining the actual work!</p>
<hr  />
<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
