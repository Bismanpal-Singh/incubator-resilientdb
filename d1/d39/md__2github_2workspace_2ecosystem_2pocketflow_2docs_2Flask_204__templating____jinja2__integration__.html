#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: 04_templating__jinja2_integration_</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d1/d39/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Flask_204__templating____jinja2__integration__.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">04_templating__jinja2_integration_</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md1895"></a>
autotoc_md1895</h2>
<p>layout: default title: "Templating (Jinja2 Integration)" parent: "Flask" </p>
<h2><a class="anchor" id="autotoc_md1896"></a>
nav_order: 4</h2>
<h1><a class="anchor" id="autotoc_md1897"></a>
Chapter 4: Templating (Jinja2 Integration)</h1>
<p>Welcome back! In <a class="el" href="../../d5/d48/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Flask_203__request__and__response__objects.html">Chapter 3: Request and Response Objects</a>, we saw how to handle incoming requests and craft outgoing responses. We even created a simple HTML form, but we had to write the HTML code directly as a string inside our Python function. Imagine building a whole website like that â€“ it would get very messy very quickly!</p>
<p>How can we separate the design and structure of our web pages (HTML) from the Python code that generates the dynamic content? This chapter introduces <b>Templating</b>.</p>
<h2><a class="anchor" id="autotoc_md1898"></a>
What Problem Does It Solve? Mixing Code and Design is Messy</h2>
<p>Think about writing a personalized email newsletter. You have a standard letter format (the design), but you need to insert specific details for each recipient (the dynamic data), like their name. You wouldn't want to write the entire letter from scratch in your code for every single person!</p>
<p>Similarly, when building a web page, you have the HTML structure (the design), but parts of it need to change based on data from your application (like showing the currently logged-in user's name, a list of products, or search results). Putting complex HTML directly into your Python view functions makes the code hard to read, hard to maintain, and difficult for web designers (who might not know Python) to work on.</p>
<p>We need a way to create HTML "templates" with special placeholders for the dynamic parts, and then have our Python code fill in those placeholders with actual data.</p>
<p>Flask uses a powerful template engine called <b>Jinja2</b> to solve this problem. Jinja2 lets you create HTML files (or other text files) that include variables and simple logic (like loops and conditions) directly within the template itself. Flask provides a convenient function, <code>render_template</code>, to take one of these template files, fill in the data, and give you back the final HTML ready to send to the user's browser.</p>
<p>It's exactly like <b>mail merge</b>:</p>
<ul>
<li><b>Template File (<code>.html</code>):</b> Your standard letter format.</li>
<li><b>Placeholders (<code>{{ variable }}</code>):</b> The spots where you'd put &lt;&lt;Name&gt;&gt; or &lt;&lt;Address&gt;&gt;.</li>
<li><b>Context Variables (Python dictionary):</b> The actual data (e.g., <code>name="Alice"</code>, <code>address="..."</code>).</li>
<li><b><code>render_template</code> Function:</b> The mail merge tool itself.</li>
<li><b>Final HTML:</b> The personalized letter ready to be sent.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1899"></a>
Creating Your First Template</h2>
<p>By default, Flask looks for template files in a folder named <code>templates</code> right next to your main application file (like <code>hello.py</code>).</p>
<ol type="1">
<li>Create a folder named <code>templates</code> in the same directory as your <code>hello.py</code> file.</li>
<li>Inside the <code>templates</code> folder, create a file named <code>hello.html</code>.</li>
</ol>
<div class="fragment"><div class="line">&lt;!-- templates/hello.html --&gt;</div>
<div class="line">{% raw %}</div>
<div class="line">&lt;!doctype html&gt;</div>
<div class="line">&lt;html&gt;</div>
<div class="line">  &lt;head&gt;</div>
<div class="line">    &lt;title&gt;Hello Flask!&lt;/title&gt;</div>
<div class="line">  &lt;/head&gt;</div>
<div class="line">  &lt;body&gt;</div>
<div class="line">    &lt;h1&gt;Hello, {{ name_in_template }}!&lt;/h1&gt;</div>
<div class="line">    &lt;p&gt;Welcome to our templated page.&lt;/p&gt;</div>
<div class="line">  &lt;/body&gt;</div>
<div class="line">&lt;/html&gt;</div>
<div class="line">{% endraw %}</div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ul>
<li>This is mostly standard HTML.</li>
<li><code>{{ name_in_template }}</code>: This is a Jinja2 <b>placeholder</b> or <b>expression</b>. It tells Jinja2: "When this template is rendered, replace this part with the value of the variable named `name_in_template` that the Python code provides."</li>
</ul>
<h2><a class="anchor" id="autotoc_md1900"></a>
Rendering Templates with <code>render_template</code></h2>
<p>Now, let's modify our Python code (<code>hello.py</code>) to use this template. We need to:</p>
<ol type="1">
<li>Import the <code>render_template</code> function from Flask.</li>
<li>Call <code>render_template</code> in our view function, passing the name of the template file and any variables we want to make available in the template.</li>
</ol>
<div class="fragment"><div class="line"><span class="comment"># hello.py</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Make sure &#39;request&#39; is imported if you use it elsewhere,</span></div>
<div class="line"><span class="comment"># otherwise remove it for this example.</span></div>
<div class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, render_template</div>
<div class="line"> </div>
<div class="line">app = Flask(__name__)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Route for the homepage</span></div>
<div class="line"><span class="preprocessor">@app.route(&#39;/&#39;)</span></div>
<div class="line"><span class="keyword">def </span>index():</div>
<div class="line">  <span class="comment"># The name we want to display in the template</span></div>
<div class="line">  user_name = <span class="stringliteral">&quot;World&quot;</span></div>
<div class="line">  <span class="comment"># Render the template, passing the user_name as a variable</span></div>
<div class="line">  <span class="comment"># The key on the left (&#39;name_in_template&#39;) is how we access it in HTML.</span></div>
<div class="line">  <span class="comment"># The value on the right (user_name) is the Python variable.</span></div>
<div class="line">  <span class="keywordflow">return</span> render_template(<span class="stringliteral">&#39;hello.html&#39;</span>, name_in_template=user_name)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># NEW Route to greet a specific user using the same template</span></div>
<div class="line"><span class="preprocessor">@app.route(&#39;/user/&lt;username&gt;&#39;)</span></div>
<div class="line"><span class="keyword">def </span>greet_user(username):</div>
<div class="line">  <span class="comment"># Here, &#39;username&#39; comes from the URL</span></div>
<div class="line">  <span class="comment"># We still use &#39;name_in_template&#39; as the key for the template</span></div>
<div class="line">  <span class="keywordflow">return</span> render_template(<span class="stringliteral">&#39;hello.html&#39;</span>, name_in_template=username)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Code to run the app (from Chapter 1)</span></div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&#39;__main__&#39;</span>:</div>
<div class="line">  app.run(debug=<span class="keyword">True</span>)</div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ul>
<li><code>from flask import render_template</code>: We import the necessary function.</li>
<li>&lsquo;render_template('hello.html&rsquo;, ...)<code>: This tells Flask to find the</code>hello.html<code>file (it looks in the</code>templates<code>folder). *</code>name_in_template=user_name<code>: This is the crucial part where we pass data *into* the template. This creates a "context" dictionary like</code>{'name_in_template': 'World'}<code>(or</code>{'name_in_template': 'Alice'}<code>in the second route). Jinja2 uses this context to fill in the placeholders. The keyword argument name (</code>name_in_template<code>) **must match** the variable name used inside the</code>{{ }}` in the HTML file.</li>
</ul>
<p><b>Running this:</b></p>
<ol type="1">
<li>Make sure you have the <code>templates</code> folder with <code>hello.html</code> inside it.</li>
<li>Save the updated <code>hello.py</code>.</li>
<li>Run <code>python hello.py</code> in your terminal.</li>
<li>Visit <code><a href="http://127.0.0.1:5000/">http://127.0.0.1:5000/</a></code>. Your browser will receive and display HTML generated from <code>hello.html</code>, showing: "Hello, World!".</li>
<li>Visit <code><a href="http://127.0.0.1:5000/user/Alice">http://127.0.0.1:5000/user/Alice</a></code>. Your browser will receive HTML generated from the <em>same</em> <code>hello.html</code> template, but this time showing: "Hello, Alice!".</li>
</ol>
<p>See how we reused the same HTML structure but dynamically changed the content using <code>render_template</code> and variables!</p>
<h2><a class="anchor" id="autotoc_md1901"></a>
Basic Jinja2 Syntax: Variables, Conditionals, and Loops</h2>
<p>Jinja2 offers more than just variable substitution. You can use basic programming constructs right inside your HTML.</p>
<p>There are two main types of delimiters:</p>
<p>{% raw %}</p><ul>
<li><code>{{ ... }}</code>: Used for <b>expressions</b>. This is where you put variables you want to display, or even simple calculations or function calls. The result is inserted into the HTML.</li>
<li><code>{% ... %}</code>: Used for <b>statements</b>. This includes things like <code>if</code>/<code>else</code> blocks, <code>for</code> loops, and other control structures. These don't directly output text but control how the template is rendered. {% endraw %}</li>
</ul>
<p>Let's look at some examples.</p>
<h3><a class="anchor" id="autotoc_md1902"></a>
Example: Using <code>if</code>/<code>else</code></h3>
<p>Imagine you want to show different content depending on whether a user is logged in.</p>
<p><b>Python (<code>hello.py</code>):</b></p>
<div class="fragment"><div class="line"><span class="comment"># hello.py (add this route)</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">@app.route(&#39;/profile&#39;)</span></div>
<div class="line"><span class="keyword">def </span>profile():</div>
<div class="line">  <span class="comment"># Simulate a logged-in user for demonstration</span></div>
<div class="line">  current_user = {<span class="stringliteral">&#39;name&#39;</span>: <span class="stringliteral">&#39;Charlie&#39;</span>, <span class="stringliteral">&#39;is_logged_in&#39;</span>: <span class="keyword">True</span>}</div>
<div class="line">  <span class="comment"># Simulate no user logged in</span></div>
<div class="line">  <span class="comment"># current_user = None</span></div>
<div class="line">  <span class="keywordflow">return</span> render_template(<span class="stringliteral">&#39;profile.html&#39;</span>, user=current_user)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># ... (keep other routes and run code)</span></div>
</div><!-- fragment --><p><b>Template (<code>templates/profile.html</code>):</b></p>
<div class="fragment"><div class="line">&lt;!-- templates/profile.html --&gt;</div>
<div class="line">{% raw %}</div>
<div class="line">&lt;!doctype html&gt;</div>
<div class="line">&lt;html&gt;</div>
<div class="line">&lt;head&gt;&lt;title&gt;User Profile&lt;/title&gt;&lt;/head&gt;</div>
<div class="line">&lt;body&gt;</div>
<div class="line">  {% if user and user.is_logged_in %}</div>
<div class="line">    &lt;h1&gt;Welcome back, {{ user.name }}!&lt;/h1&gt;</div>
<div class="line">    &lt;p&gt;You are logged in.&lt;/p&gt;</div>
<div class="line">  {% else %}</div>
<div class="line">    &lt;h1&gt;Welcome, Guest!&lt;/h1&gt;</div>
<div class="line">    &lt;p&gt;Please log in.&lt;/p&gt;</div>
<div class="line">  {% endif %}</div>
<div class="line">&lt;/body&gt;</div>
<div class="line">&lt;/html&gt;</div>
<div class="line">{% endraw %}</div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<p>{% raw %}</p><ul>
<li><code>{% if user and user.is_logged_in %}</code>: Starts an <code>if</code> block. Jinja2 checks if the <code>user</code> variable exists and if its <code>is_logged_in</code> attribute is true.</li>
<li><code>{% else %}</code>: If the <code>if</code> condition is false, the code under <code>else</code> is used.</li>
<li><code>{% endif %}</code>: Marks the end of the <code>if</code> block.</li>
<li><code>{{ user.name }}</code>: Accesses the <code>name</code> attribute of the <code>user</code> dictionary passed from Python. {% endraw %}</li>
</ul>
<p>If you run this and visit <code>/profile</code>, you'll see the "Welcome back, Charlie!" message. If you change <code>current_user</code> to <code>None</code> in the Python code and refresh, you'll see the "Welcome, Guest!" message.</p>
<h3><a class="anchor" id="autotoc_md1903"></a>
Example: Using <code>for</code> Loops</h3>
<p>Let's say you want to display a list of items.</p>
<p><b>Python (<code>hello.py</code>):</b></p>
<div class="fragment"><div class="line"><span class="comment"># hello.py (add this route)</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">@app.route(&#39;/items&#39;)</span></div>
<div class="line"><span class="keyword">def </span>show_items():</div>
<div class="line">  item_list = [<span class="stringliteral">&#39;Apple&#39;</span>, <span class="stringliteral">&#39;Banana&#39;</span>, <span class="stringliteral">&#39;Cherry&#39;</span>]</div>
<div class="line">  <span class="keywordflow">return</span> render_template(<span class="stringliteral">&#39;items.html&#39;</span>, items=item_list)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># ... (keep other routes and run code)</span></div>
</div><!-- fragment --><p><b>Template (<code>templates/items.html</code>):</b></p>
<div class="fragment"><div class="line">&lt;!-- templates/items.html --&gt;</div>
<div class="line">{% raw %}</div>
<div class="line">&lt;!doctype html&gt;</div>
<div class="line">&lt;html&gt;</div>
<div class="line">&lt;head&gt;&lt;title&gt;Item List&lt;/title&gt;&lt;/head&gt;</div>
<div class="line">&lt;body&gt;</div>
<div class="line">  &lt;h2&gt;Available Items:&lt;/h2&gt;</div>
<div class="line">  &lt;ul&gt;</div>
<div class="line">    {% for fruit in items %}</div>
<div class="line">      &lt;li&gt;{{ fruit }}&lt;/li&gt;</div>
<div class="line">    {% else %}</div>
<div class="line">      &lt;li&gt;No items available.&lt;/li&gt;</div>
<div class="line">    {% endfor %}</div>
<div class="line">  &lt;/ul&gt;</div>
<div class="line">&lt;/body&gt;</div>
<div class="line">&lt;/html&gt;</div>
<div class="line">{% endraw %}</div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<p>{% raw %}</p><ul>
<li><code>{% for fruit in items %}</code>: Starts a <code>for</code> loop. It iterates over the <code>items</code> list passed from Python. In each iteration, the current item is assigned to the variable <code>fruit</code>.</li>
<li><code>&lt;li&gt;{{ fruit }}&lt;/li&gt;</code>: Inside the loop, we display the current <code>fruit</code>.</li>
<li><code>{% else %}</code>: This optional block is executed if the <code>items</code> list was empty.</li>
<li><code>{% endfor %}</code>: Marks the end of the <code>for</code> loop. {% endraw %}</li>
</ul>
<p>Visiting <code>/items</code> will show a bulleted list of the fruits.</p>
<h2><a class="anchor" id="autotoc_md1904"></a>
Generating URLs within Templates using <code>url_for</code></h2>
<p>Just like we used <code>url_for</code> in Python (<a class="el" href="../../d0/d63/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Flask_202__routing__system.html">Chapter 2: Routing System</a>) to avoid hardcoding URLs, we often need to generate URLs within our HTML templates (e.g., for links or form actions). Flask automatically makes the <code>url_for</code> function available inside your Jinja2 templates.</p>
<p><b>Template (<code>templates/navigation.html</code>):</b></p>
<div class="fragment"><div class="line">&lt;!-- templates/navigation.html --&gt;</div>
<div class="line">{% raw %}</div>
<div class="line">&lt;nav&gt;</div>
<div class="line">  &lt;ul&gt;</div>
<div class="line">    &lt;li&gt;&lt;a href=&quot;{{ url_for(&#39;index&#39;) }}&quot;&gt;Home&lt;/a&gt;&lt;/li&gt;</div>
<div class="line">    &lt;li&gt;&lt;a href=&quot;{{ url_for(&#39;show_items&#39;) }}&quot;&gt;Items&lt;/a&gt;&lt;/li&gt;</div>
<div class="line">    &lt;li&gt;&lt;a href=&quot;{{ url_for(&#39;greet_user&#39;, username=&#39;Admin&#39;) }}&quot;&gt;Admin Profile&lt;/a&gt;&lt;/li&gt;</div>
<div class="line">    &lt;!-- Example link that might require login --&gt;</div>
<div class="line">    {% if user and user.is_logged_in %}</div>
<div class="line">      &lt;li&gt;&lt;a href=&quot;{{ url_for(&#39;profile&#39;) }}&quot;&gt;My Profile&lt;/a&gt;&lt;/li&gt;</div>
<div class="line">    {% else %}</div>
<div class="line">      &lt;li&gt;&lt;a href=&quot;#&quot;&gt;Login&lt;/a&gt;&lt;/li&gt; {# Replace # with login URL later #}</div>
<div class="line">    {% endif %}</div>
<div class="line">  &lt;/ul&gt;</div>
<div class="line">&lt;/nav&gt;</div>
<div class="line">{% endraw %}</div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<p>{% raw %}</p><ul>
<li>&lsquo;{{ url_for('index&rsquo;) }}<code>: Generates the URL for the view function associated with the endpoint</code>'index'<code>(which is likely</code>/<code>). *</code>{{ url_for('show_items') }}<code>: Generates the URL for the</code>show_items<code>endpoint (likely</code>/items<code>). *</code>{{ url_for('greet_user', username='Admin') }}<code>: Generates the URL for the</code>greet_user<code>endpoint, filling in the</code>username<code>variable (likely</code>/user/Admin`). {% endraw %}</li>
</ul>
<p>Using <code>url_for</code> in templates ensures that your links will always point to the correct place, even if you change the URL rules in your Python code later.</p>
<h2><a class="anchor" id="autotoc_md1905"></a>
Under the Hood: How <code>render_template</code> Works</h2>
<p>When you call &lsquo;render_template('some_template.html&rsquo;, var=value)`, here's a simplified sequence of what happens inside Flask and Jinja2:</p>
<p>{% raw %}</p><ol type="1">
<li><b>Get Jinja Environment:</b> Flask accesses its configured Jinja2 environment (<code>current_app.jinja_env</code>). This environment holds the settings, filters, globals, and crucially, the <b>template loader</b>. (See <code>templating.py:render_template</code> which accesses <code>current_app.jinja_env</code>).</li>
<li><b>Find Template:</b> The environment asks its loader (<code>app.jinja_env.loader</code>, which is typically a <code>DispatchingJinjaLoader</code> as created in <code><a class="el" href="../../de/d0e/app_8py.html">app.py</a>:create_jinja_environment</code> and <code>templating.py:Environment</code>) to find the template file (&lsquo;'some_template.html&rsquo;<code>).</code></li>
<li><code> **Loader Search:** The</code>DispatchingJinjaLoader<code>knows where to look:<ul>
<li>It first checks the application's</li>
</ul>
</code>template_folder<code>(usually</code>./templates<code>).<ul>
<li>If not found, it checks the</li>
</ul>
</code>template_folder<code>of any registered Blueprints (more on those in [Chapter 8: Blueprints](<a class="el" href="../../dd/d80/08__blueprints_8md.html">08_blueprints.md</a>)). (See</code>templating.py:DispatchingJinjaLoader._iter_loaders<code>).</code></li>
<li><code> **Load and Parse:** Once the loader finds the file, Jinja2 reads its content, parses it, and compiles it into an internal representation (a</code>Template<code>object) for efficient rendering. This might be cached. (Handled by</code>jinja_env.get_or_select_template<code>).</code></li>
<li><code> **Update Context:** Flask calls</code>app.update_template_context(context)<code>to add standard variables like</code>request<code>,</code>session<code>,</code>g<code>, and</code>config<code>to the dictionary of variables you passed (</code>{'var': value}<code>). This is done using "context processors" (more in [Chapter 5](<a class="el" href="../../d7/d69/05__context__globals______current__app________request________session________g_____8md.html">05_context_globals___current_app____request____session____g__.md</a>)). (See</code>templating.py:_render<code>).</code></li>
<li><code> **Signal:** Flask sends the</code>before_render_template<code>signal.</code></li>
<li><code> **Render:** The</code>Template<code>object's</code>render()<code>method is called with the combined context dictionary. Jinja2 processes the template, executing statements (</code>{% %}<code>) and substituting expressions (</code>{{ }}<code>) with values from the context.</code></li>
<li><code> **Return HTML:** The</code>render()<code>method returns the final, fully rendered HTML string.</code></li>
<li><code> **Signal:** Flask sends the</code>template_rendered` signal.</li>
<li><b>Send Response:</b> Flask takes this HTML string and builds an HTTP Response object to send back to the browser (<a class="el" href="../../d5/d48/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Flask_203__request__and__response__objects.html">Chapter 3</a>). {% endraw %}</li>
</ol>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant ViewFunc as Your View Function</div>
<div class="line">    participant RenderFunc as flask.render_template()</div>
<div class="line">    participant JinjaEnv as app.jinja_env</div>
<div class="line">    participant Loader as DispatchingJinjaLoader</div>
<div class="line">    participant TemplateObj as Template Object</div>
<div class="line">    participant Response as Flask Response</div>
<div class="line"> </div>
<div class="line">    ViewFunc-&gt;&gt;+RenderFunc: render_template(&#39;hello.html&#39;, name_in_template=&#39;Alice&#39;)</div>
<div class="line">    RenderFunc-&gt;&gt;+JinjaEnv: get_or_select_template(&#39;hello.html&#39;)</div>
<div class="line">    JinjaEnv-&gt;&gt;+Loader: Find &#39;hello.html&#39;</div>
<div class="line">    Loader--&gt;&gt;-JinjaEnv: Found template file content</div>
<div class="line">    JinjaEnv--&gt;&gt;-RenderFunc: Return compiled TemplateObj</div>
<div class="line">    Note over RenderFunc, Response: Update context (add request, g, etc.)</div>
<div class="line">    RenderFunc-&gt;&gt;+TemplateObj: render({&#39;name_in_template&#39;: &#39;Alice&#39;, &#39;request&#39;: ..., ...})</div>
<div class="line">    TemplateObj--&gt;&gt;-RenderFunc: Return &quot;&lt;html&gt;...Hello, Alice!...&lt;/html&gt;&quot;</div>
<div class="line">    RenderFunc--&gt;&gt;-ViewFunc: Return HTML string</div>
<div class="line">    ViewFunc-&gt;&gt;+Response: Create Response from HTML string</div>
<div class="line">    Response--&gt;&gt;-ViewFunc: Response object</div>
<div class="line">    ViewFunc--&gt;&gt;Browser: Return Response</div>
</div><!-- fragment --><p>The key players are the <code>Flask</code> application instance (which holds the Jinja2 environment configuration), the <code>render_template</code> function, and the Jinja2 <code>Environment</code> itself, which uses loaders to find templates and context processors to enrich the data available during rendering.</p>
<h2><a class="anchor" id="autotoc_md1906"></a>
Conclusion</h2>
<p>Templating is a fundamental technique for building dynamic web pages. Flask integrates seamlessly with the powerful Jinja2 template engine.</p>
<p>{% raw %}</p><ul>
<li>We learned that templating separates HTML structure from Python logic.</li>
<li>Flask looks for templates in a <code>templates</code> folder by default.</li>
<li>The <code>render_template()</code> function is used to load a template file and pass data (context variables) to it.</li>
<li>Jinja2 templates use <code>{{ variable }}</code> to display data and <code>{% statement %}</code> for control flow (like <code>if</code> and <code>for</code>).</li>
<li>The <code>url_for()</code> function is available in templates for generating URLs dynamically. {% endraw %}</li>
</ul>
<p>Now you can create clean, maintainable HTML pages driven by your Flask application's data and logic.</p>
<p>But how do functions like <code>url_for</code>, and variables like <code>request</code> and <code>session</code>, magically become available inside templates without us explicitly passing them every time? This happens through Flask's context system and context processors. Let's explore these "magic" variables in the next chapter.</p>
<p>Ready to uncover the context? Let's move on to <a class="el" href="../../d2/d15/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2Flask_205__context__globals______current__a0f66e55a619b85550f70ee0df6dbdc86.html">Chapter 5: Context Globals (<code>current_app</code>, <code>request</code>, <code>session</code>, <code>g</code>)</a>.</p>
<hr  />
<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
