#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: 03_task</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d1/dae/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_203__task.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">03_task</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md1512"></a>
autotoc_md1512</h2>
<p>layout: default title: "Task" parent: "CrewAI" </p>
<h2><a class="anchor" id="autotoc_md1513"></a>
nav_order: 3</h2>
<h1><a class="anchor" id="autotoc_md1514"></a>
Chapter 3: Task - Defining the Work</h1>
<p>In <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Chapter 1</a>, we met the <code>Crew</code> - our AI team manager. In <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Chapter 2</a>, we met the <code>Agent</code>s - our specialized AI workers. Now, we need to tell these agents <em>exactly</em> what to do. How do we give them specific assignments?</p>
<p>That's where the <code>Task</code> comes in!</p>
<h2><a class="anchor" id="autotoc_md1515"></a>
Why Do We Need Tasks?</h2>
<p>Imagine our trip planning <code>Crew</code> again. We have a 'Travel Researcher' <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a> and an 'Activity Planner' <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a>. Just having them isn't enough. We need to give them clear instructions:</p>
<ul>
<li>Researcher: "Find some sunny cities in Europe for May."</li>
<li>Planner: "Create a 3-day plan for the city the Researcher found."</li>
</ul>
<p>These specific instructions are <b><code>Task</code>s</b> in CrewAI. Instead of one vague goal, we break the project down into smaller, concrete steps.</p>
<p><b>Problem Solved:</b> <code>Task</code> allows you to define individual, actionable assignments for your <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a>s. It turns a big goal into a manageable checklist.</p>
<h2><a class="anchor" id="autotoc_md1516"></a>
What is a Task?</h2>
<p>Think of a <code>Task</code> as a <b>work order</b> or a <b>specific assignment</b> given to an <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a>. It clearly defines what needs to be done and what the expected result should look like.</p>
<p>Here are the key ingredients of a <code>Task</code>:</p>
<ol type="1">
<li><b><code>description</code></b>: This is the most important part! It's a clear and detailed explanation of <em>what</em> the <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a> needs to accomplish. The more specific, the better.</li>
<li><b><code>expected_output</code></b>: This tells the <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a> what a successful result should look like. It sets a clear target. Examples: "A list of 3 cities with pros and cons.", "A bulleted list of activities.", "A paragraph summarizing the key findings."</li>
<li><b><code>agent</code></b>: This specifies <em>which</em> <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a> in your <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a> is responsible for completing this task. Each task is typically assigned to the agent best suited for it.</li>
<li><b><code>context</code></b> (Optional but Important!): Tasks don't usually happen in isolation. A task might need information or results from <em>previous</em> tasks. The <code>context</code> allows the output of one task to be automatically fed as input/background information to the next task in a sequence.</li>
<li><b><code>tools</code></b> (Optional): You can specify a list of <a class="el" href="../../d0/dbf/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_204__tool.html">Tools</a> that the <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a> is <em>allowed</em> to use specifically for <em>this</em> task. This can be useful to restrict or grant specific capabilities for certain assignments.</li>
<li><b><code>async_execution</code></b> (Optional, Advanced): You can set this to <code>True</code> if you want the task to potentially run at the same time as other asynchronous tasks. We'll stick to synchronous (one after another) for now.</li>
<li><b><code>output_json</code> / <code>output_pydantic</code></b> (Optional, Advanced): If you need the task's final output in a structured format like JSON, you can specify a model here.</li>
<li><b><code>output_file</code></b> (Optional, Advanced): You can have the task automatically save its output to a file.</li>
</ol>
<p>A <code>Task</code> bundles the instructions (<code>description</code>, <code>expected_output</code>) and assigns them to the right worker (<code>agent</code>), potentially giving them background info (<code>context</code>) and specific equipment (<code>tools</code>).</p>
<h2><a class="anchor" id="autotoc_md1517"></a>
Let's Define a Task!</h2>
<p>Let's look again at the tasks we created for our trip planning <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a> in <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Chapter 1</a>.</p>
<div class="fragment"><div class="line"><span class="comment"># Import necessary classes</span></div>
<div class="line"><span class="keyword">from</span> crewai <span class="keyword">import</span> Task, Agent <span class="comment"># Assuming Agent class is defined as in Chapter 2</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Assume &#39;researcher&#39; and &#39;planner&#39; agents are already defined</span></div>
<div class="line"><span class="comment"># researcher = Agent(role=&#39;Travel Researcher&#39;, ...)</span></div>
<div class="line"><span class="comment"># planner = Agent(role=&#39;Activity Planner&#39;, ...)</span></div>
<div class="line"> </div>
<div class="line"><span class="comment"># Define Task 1 for the Researcher</span></div>
<div class="line">task1 = Task(</div>
<div class="line">  description=(</div>
<div class="line">      <span class="stringliteral">&quot;Identify the top 3 European cities known for great sunny weather &quot;</span></div>
<div class="line">      <span class="stringliteral">&quot;around late May. Focus on cities with vibrant culture and good food.&quot;</span></div>
<div class="line">  ),</div>
<div class="line">  expected_output=(</div>
<div class="line">      <span class="stringliteral">&quot;A numbered list of 3 cities, each with a brief (1-2 sentence) justification &quot;</span></div>
<div class="line">      <span class="stringliteral">&quot;mentioning weather, culture, and food highlights.&quot;</span></div>
<div class="line">  ),</div>
<div class="line">  agent=researcher <span class="comment"># Assign this task to our researcher agent</span></div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Define Task 2 for the Planner</span></div>
<div class="line">task2 = Task(</div>
<div class="line">  description=(</div>
<div class="line">      <span class="stringliteral">&quot;Using the list of cities provided by the researcher, select the best city &quot;</span></div>
<div class="line">      <span class="stringliteral">&quot;and create a detailed 3-day itinerary. Include morning, afternoon, and &quot;</span></div>
<div class="line">      <span class="stringliteral">&quot;evening activities, plus restaurant suggestions.&quot;</span></div>
<div class="line">  ),</div>
<div class="line">  expected_output=(</div>
<div class="line">      <span class="stringliteral">&quot;A markdown formatted 3-day itinerary for the chosen city. &quot;</span></div>
<div class="line">      <span class="stringliteral">&quot;Include timings, activity descriptions, and 2-3 restaurant ideas.&quot;</span></div>
<div class="line">  ),</div>
<div class="line">  agent=planner <span class="comment"># Assign this task to our planner agent</span></div>
<div class="line">  <span class="comment"># context=[task1] # Optionally explicitly define context (often handled automatically)</span></div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># (You would then add these tasks to a Crew)</span></div>
<div class="line"><span class="comment"># print(task1)</span></div>
<div class="line"><span class="comment"># print(task2)</span></div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ul>
<li><code>from crewai import Task</code>: We import the <code>Task</code> class.</li>
<li><code>description=...</code>: We write a clear instruction for the agent. Notice how <code>task1</code> specifies the criteria (sunny, May, culture, food). <code>task2</code> explicitly mentions using the output from the previous task.</li>
<li><code>expected_output=...</code>: We define what success looks like. <code>task1</code> asks for a numbered list with justifications. <code>task2</code> asks for a formatted itinerary. This helps the AI agent structure its response.</li>
<li><code>agent=researcher</code> / <code>agent=planner</code>: We link each task directly to the <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a> responsible for doing the work.</li>
<li><code>context=[task1]</code> (Commented Out): We <em>could</em> explicitly tell <code>task2</code> that it depends on <code>task1</code>. However, when using a <code>sequential</code> <a class="el" href="../../de/d7d/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_205__process.html">Process</a> in the <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a>, this dependency is usually handled automatically! The output of <code>task1</code> will be passed to <code>task2</code> as context.</li>
</ul>
<p>Running this code creates <code>Task</code> objects, ready to be managed by a <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a>.</p>
<h2><a class="anchor" id="autotoc_md1518"></a>
Task Workflow and Context: Connecting the Dots</h2>
<p>Tasks are rarely standalone. They often form a sequence, where the result of one task is needed for the next. This is where <code>context</code> comes in.</p>
<p>Imagine our <code>Crew</code> is set up with a <code>sequential</code> <a class="el" href="../../de/d7d/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_205__process.html">Process</a> (like in Chapter 1):</p>
<ol type="1">
<li>The <code>Crew</code> runs <code>task1</code> using the <code>researcher</code> agent.</li>
<li>The <code>researcher</code> completes <code>task1</code> and produces an output (e.g., "1. Lisbon...", "2. Seville...", "3. Malta..."). This output is stored.</li>
<li>The <code>Crew</code> moves to <code>task2</code>. Because it's sequential, it automatically takes the output from <code>task1</code> and provides it as <em>context</em> to <code>task2</code>.</li>
<li>The <code>planner</code> agent receives <code>task2</code>'s description <em>and</em> the list of cities from <code>task1</code> as context.</li>
<li>The <code>planner</code> uses this context to complete <code>task2</code> (e.g., creates an itinerary for Lisbon).</li>
</ol>
<p>This automatic passing of information makes building workflows much easier!</p>
<div class="fragment"><div class="line">graph LR</div>
<div class="line">    A[&quot;Task 1: Find Cities (Agent: Researcher)&quot;] --&gt;|Output: Lisbon, Seville, Malta| B[Context for Task 2]</div>
<div class="line">    B --&gt; C[&quot;Task 2: Create Itinerary (Agent: Planner)&quot;]</div>
<div class="line">    C --&gt;|Output: Lisbon Itinerary...| D[Final Result]</div>
<div class="line"> </div>
<div class="line">    style A fill:#f9f,stroke:#333,stroke-width:2px</div>
<div class="line">    style C fill:#f9f,stroke:#333,stroke-width:2px</div>
<div class="line">    style B fill:#ccf,stroke:#333,stroke-width:1px,stroke-dasharray: 5 5</div>
<div class="line">    style D fill:#cfc,stroke:#333,stroke-width:2px</div>
</div><!-- fragment --><p>While the <code>sequential</code> process often handles context automatically, you <em>can</em> explicitly define dependencies using the <code>context</code> parameter in the <code>Task</code> definition if you need more control, especially with more complex workflows.</p>
<h2><a class="anchor" id="autotoc_md1519"></a>
How Does a Task Execute "Under the Hood"?</h2>
<p>When the <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a>'s <code>kickoff()</code> method runs a task, here's a simplified view of what happens:</p>
<ol type="1">
<li><b>Selection:</b> The <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a> (based on its <a class="el" href="../../de/d7d/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_205__process.html">Process</a>) picks the next <code>Task</code> to execute.</li>
<li><b>Agent Assignment:</b> It identifies the <code>agent</code> assigned to this <code>Task</code>.</li>
<li><b>Context Gathering:</b> It collects the output from any prerequisite tasks (like the previous task in a sequential process) to form the <code>context</code>.</li>
<li><b>Execution Call:</b> The <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a> tells the assigned <code>Agent</code> to execute the <code>Task</code>, passing the <code>description</code>, <code>expected_output</code>, available <code>tools</code> (if any specified for the task), and the gathered <code>context</code>.</li>
<li><b>Agent Work:</b> The <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a> uses its configuration (<a class="el" href="../../da/d0f/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_206__llm.html">LLM</a>, backstory, etc.) and the provided information (task details, context, tools) to perform the work.</li>
<li><b>Result Return:</b> The <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a> generates the result and returns it as a <code>TaskOutput</code> object.</li>
<li><b>Output Storage:</b> The <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a> receives this <code>TaskOutput</code> and stores it, making it available as potential context for future tasks.</li>
</ol>
<p>Let's visualize the interaction:</p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant C as Crew</div>
<div class="line">    participant T1 as Task 1</div>
<div class="line">    participant R_Agent as Researcher Agent</div>
<div class="line">    participant T2 as Task 2</div>
<div class="line">    participant P_Agent as Planner Agent</div>
<div class="line"> </div>
<div class="line">    C-&gt;&gt;T1: Prepare to Execute</div>
<div class="line">    Note right of T1: Task 1 selected</div>
<div class="line">    C-&gt;&gt;R_Agent: Execute Task(T1.description, T1.expected_output)</div>
<div class="line">    R_Agent-&gt;&gt;R_Agent: Use LLM, Profile, Tools...</div>
<div class="line">    R_Agent--&gt;&gt;C: Return TaskOutput (Cities List)</div>
<div class="line">    C-&gt;&gt;C: Store TaskOutput from T1</div>
<div class="line"> </div>
<div class="line">    C-&gt;&gt;T2: Prepare to Execute</div>
<div class="line">    Note right of T2: Task 2 selected</div>
<div class="line">    Note right of C: Get Context (Output from T1)</div>
<div class="line">    C-&gt;&gt;P_Agent: Execute Task(T2.description, T2.expected_output, context=T1_Output)</div>
<div class="line">    P_Agent-&gt;&gt;P_Agent: Use LLM, Profile, Tools, Context...</div>
<div class="line">    P_Agent--&gt;&gt;C: Return TaskOutput (Itinerary)</div>
<div class="line">    C-&gt;&gt;C: Store TaskOutput from T2</div>
</div><!-- fragment --><p><b>Diving into the Code (<code>task.py</code>)</b></p>
<p>The <code>Task</code> class itself is defined in <code>crewai/task.py</code>. It's primarily a container for the information you provide:</p>
<div class="fragment"><div class="line"><span class="comment"># Simplified view from crewai/task.py</span></div>
<div class="line"><span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel, Field</div>
<div class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> List, Optional, Type, Any</div>
<div class="line"><span class="comment"># Import Agent and Tool placeholders for the example</span></div>
<div class="line"><span class="keyword">from</span> crewai <span class="keyword">import</span> BaseAgent, BaseTool</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>TaskOutput(BaseModel): <span class="comment"># Simplified representation of the result</span></div>
<div class="line">    description: str</div>
<div class="line">    raw: str</div>
<div class="line">    agent: str</div>
<div class="line">    <span class="comment"># ... other fields like pydantic, json_dict</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>Task(BaseModel):</div>
<div class="line">    <span class="comment"># Core attributes</span></div>
<div class="line">    description: str = Field(description=<span class="stringliteral">&quot;Description of the actual task.&quot;</span>)</div>
<div class="line">    expected_output: str = Field(description=<span class="stringliteral">&quot;Clear definition of expected output.&quot;</span>)</div>
<div class="line">    agent: Optional[BaseAgent] = Field(default=<span class="keywordtype">None</span>, description=<span class="stringliteral">&quot;Agent responsible.&quot;</span>)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Optional attributes</span></div>
<div class="line">    context: Optional[List[<span class="stringliteral">&quot;Task&quot;</span>]] = Field(default=<span class="keywordtype">None</span>, description=<span class="stringliteral">&quot;Context from other tasks.&quot;</span>)</div>
<div class="line">    tools: Optional[List[BaseTool]] = Field(default_factory=list, description=<span class="stringliteral">&quot;Task-specific tools.&quot;</span>)</div>
<div class="line">    async_execution: Optional[bool] = Field(default=<span class="keyword">False</span>)</div>
<div class="line">    output_json: Optional[Type[BaseModel]] = Field(default=<span class="keywordtype">None</span>)</div>
<div class="line">    output_pydantic: Optional[Type[BaseModel]] = Field(default=<span class="keywordtype">None</span>)</div>
<div class="line">    output_file: Optional[str] = Field(default=<span class="keywordtype">None</span>)</div>
<div class="line">    callback: Optional[Any] = Field(default=<span class="keywordtype">None</span>) <span class="comment"># Function to call after execution</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Internal state</span></div>
<div class="line">    output: Optional[TaskOutput] = Field(default=<span class="keywordtype">None</span>, description=<span class="stringliteral">&quot;Task output after execution&quot;</span>)</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>execute_sync(</div>
<div class="line">        self,</div>
<div class="line">        agent: Optional[BaseAgent] = <span class="keywordtype">None</span>,</div>
<div class="line">        context: Optional[str] = <span class="keywordtype">None</span>,</div>
<div class="line">        tools: Optional[List[BaseTool]] = <span class="keywordtype">None</span>,</div>
<div class="line">    ) -&gt; TaskOutput:</div>
<div class="line">        <span class="comment"># 1. Identify the agent to use (passed or self.agent)</span></div>
<div class="line">        agent_to_execute = agent <span class="keywordflow">or</span> self.agent</div>
<div class="line">        <span class="keywordflow">if</span> <span class="keywordflow">not</span> agent_to_execute:</div>
<div class="line">            <span class="keywordflow">raise</span> Exception(<span class="stringliteral">&quot;No agent assigned to task.&quot;</span>)</div>
<div class="line"> </div>
<div class="line">        <span class="comment"># 2. Prepare tools (task tools override agent tools if provided)</span></div>
<div class="line">        execution_tools = tools <span class="keywordflow">or</span> self.tools <span class="keywordflow">or</span> agent_to_execute.tools</div>
<div class="line"> </div>
<div class="line">        <span class="comment"># 3. Call the agent&#39;s execute_task method</span></div>
<div class="line">        <span class="comment">#    (The agent handles LLM calls, tool use, etc.)</span></div>
<div class="line">        raw_result = agent_to_execute.execute_task(</div>
<div class="line">            task=self, <span class="comment"># Pass self (the task object)</span></div>
<div class="line">            context=context,</div>
<div class="line">            tools=execution_tools,</div>
<div class="line">        )</div>
<div class="line"> </div>
<div class="line">        <span class="comment"># 4. Format the output</span></div>
<div class="line">        <span class="comment"># (Handles JSON/Pydantic conversion if requested)</span></div>
<div class="line">        pydantic_output, json_output = self._export_output(raw_result)</div>
<div class="line"> </div>
<div class="line">        <span class="comment"># 5. Create and return TaskOutput object</span></div>
<div class="line">        task_output = TaskOutput(</div>
<div class="line">            description=self.description,</div>
<div class="line">            raw=raw_result,</div>
<div class="line">            pydantic=pydantic_output,</div>
<div class="line">            json_dict=json_output,</div>
<div class="line">            agent=agent_to_execute.role,</div>
<div class="line">            <span class="comment"># ... other fields</span></div>
<div class="line">        )</div>
<div class="line">        self.output = task_output <span class="comment"># Store the output within the task object</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment"># 6. Execute callback if defined</span></div>
<div class="line">        <span class="keywordflow">if</span> self.callback:</div>
<div class="line">            self.callback(task_output)</div>
<div class="line"> </div>
<div class="line">        <span class="comment"># 7. Save to file if output_file is set</span></div>
<div class="line">        <span class="keywordflow">if</span> self.output_file:</div>
<div class="line">            <span class="comment"># ... logic to save file ...</span></div>
<div class="line">            <span class="keywordflow">pass</span></div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> task_output</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>prompt(self) -&gt; str:</div>
<div class="line">        <span class="comment"># Combines description and expected output for the agent</span></div>
<div class="line">        <span class="keywordflow">return</span> f<span class="stringliteral">&quot;{self.description}\n\nExpected Output:\n{self.expected_output}&quot;</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># ... other methods like execute_async, _export_output, _save_file ...</span></div>
</div><!-- fragment --><p>Key takeaways from the code:</p>
<ul>
<li>The <code>Task</code> class holds the configuration (<code>description</code>, <code>expected_output</code>, <code>agent</code>, etc.).</li>
<li>The <code>execute_sync</code> (and <code>execute_async</code>) method orchestrates the execution <em>by calling the assigned agent's <code>execute_task</code> method</em>. The task itself doesn't contain the AI logic; it delegates that to the agent.</li>
<li>It takes the raw result from the agent and wraps it in a <code>TaskOutput</code> object, handling formatting (like JSON) and optional actions (callbacks, file saving).</li>
<li>The <code>prompt()</code> method shows how the core instructions are formatted before being potentially combined with context and tool descriptions by the agent.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1520"></a>
Advanced Task Features (A Quick Peek)</h2>
<p>While we focused on the basics, <code>Task</code> has more capabilities:</p>
<ul>
<li><b>Asynchronous Execution (<code>async_execution=True</code>):</b> Allows multiple tasks to run concurrently, potentially speeding up your Crew if tasks don't strictly depend on each other's immediate output.</li>
<li><b>Structured Outputs (<code>output_json</code>, <code>output_pydantic</code>):</b> Force the agent to return data in a specific Pydantic model or JSON structure, making it easier to use the output programmatically.</li>
<li><b>File Output (&lsquo;output_file='path/to/output.txt&rsquo;`):</b> Automatically save the task's result to a specified file.</li>
<li><b>Conditional Tasks (<code>ConditionalTask</code>):</b> A special type of task (defined in <code>crewai.tasks.conditional_task</code>) that only runs if a specific condition (based on the previous task's output) is met. This allows for branching logic in your workflows.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1521"></a>
Conclusion</h2>
<p>You've now learned about the <code>Task</code> â€“ the fundamental unit of work in CrewAI. A <code>Task</code> defines <em>what</em> needs to be done (<code>description</code>), what the result should look like (<code>expected_output</code>), and <em>who</em> should do it (<code>agent</code>). Tasks are the building blocks of your Crew's plan, and their outputs often flow as <code>context</code> to subsequent tasks, creating powerful workflows.</p>
<p>We've seen how to define Agents and give them Tasks. But what if an agent needs a specific ability, like searching the internet, calculating something, or reading a specific document? How do we give our agents superpowers? That's where <a class="el" href="../../d0/dbf/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_204__tool.html">Tools</a> come in! Let's explore them in the next chapter.</p>
<p><b>Next:</b> <a class="el" href="../../d0/dbf/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_204__tool.html">Chapter 4: Tool - Equipping Your Agents</a></p>
<hr  />
<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
