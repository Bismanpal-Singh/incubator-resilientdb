#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#  http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ResilientDB: 05_process</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen_html_style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../logo.png"/></td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('de/d7d/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_205__process.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">05_process</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="autotoc_md1533"></a>
autotoc_md1533</h2>
<p>layout: default title: "Process" parent: "CrewAI" </p>
<h2><a class="anchor" id="autotoc_md1534"></a>
nav_order: 5</h2>
<h1><a class="anchor" id="autotoc_md1535"></a>
Chapter 5: Process - Orchestrating the Workflow</h1>
<p>In <a class="el" href="../../d0/dbf/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_204__tool.html">Chapter 4: Tool</a>, we learned how to give our <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a>s special abilities using <code>Tool</code>s, like searching the web. Now we have specialized agents, defined tasks, and equipped agents. But how do they actually <em>work together</em>? Does Agent 1 finish its work before Agent 2 starts? Or is there a manager overseeing everything?</p>
<p>This coordination is handled by the <b><code>Process</code></b>.</p>
<h2><a class="anchor" id="autotoc_md1536"></a>
Why Do We Need a Process?</h2>
<p>Think back to our trip planning <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a>. We have a 'Travel Researcher' agent and an 'Activity Planner' agent.</p>
<ul>
<li><b>Scenario 1:</b> Maybe the Researcher needs to find the city <em>first</em>, and <em>then</em> the Planner creates the itinerary for that specific city. The work happens in a specific order.</li>
<li><b>Scenario 2:</b> Maybe we have a more complex project with many agents (Researcher, Planner, Booker, Budgeter). Perhaps we want a 'Project Manager' agent to receive the main goal, decide which agent needs to do what first, review their work, and then assign the next step.</li>
</ul>
<p>The way the agents collaborate and the order in which <a class="el" href="../../d1/dae/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_203__task.html">Task</a>s are executed is crucial for success. A well-defined <code>Process</code> ensures work flows smoothly and efficiently.</p>
<p><b>Problem Solved:</b> <code>Process</code> defines the strategy or workflow the <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a> uses to execute its <a class="el" href="../../d1/dae/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_203__task.html">Task</a>s. It dictates how <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a>s collaborate and how information moves between them.</p>
<h2><a class="anchor" id="autotoc_md1537"></a>
What is a Process?</h2>
<p>Think of the <code>Process</code> as the <b>project management style</b> for your <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a>. It determines the overall flow of work. CrewAI primarily supports two types of processes:</p>
<ol type="1">
<li><b><code>Process.sequential</code></b>:<ul>
<li><b>Analogy:</b> Like following a recipe or a checklist.</li>
<li><b>How it works:</b> Tasks are executed one after another, in the exact order you list them in the <code>Crew</code> definition. The output of the first task automatically becomes available as context for the second task, the output of the second for the third, and so on.</li>
<li><b>Best for:</b> Simple, linear workflows where each step clearly follows the previous one.</li>
</ul>
</li>
<li><b><code>Process.hierarchical</code></b>:<ul>
<li><b>Analogy:</b> Like a traditional company structure with a manager.</li>
<li><b>How it works:</b> You designate a "manager" <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a> (usually by providing a specific <code>manager_llm</code> or a custom <code>manager_agent</code> to the <code>Crew</code>). This manager receives the overall goal and the list of tasks. It then analyzes the tasks and decides which <em>worker</em> agent should perform which task, potentially breaking them down or reordering them. The manager delegates work, reviews results, and coordinates the team until the goal is achieved.</li>
<li><b>Best for:</b> More complex projects where task order might change, delegation is needed, or a central coordinator can optimize the workflow.</li>
</ul>
</li>
</ol>
<p>Choosing the right <code>Process</code> is key to structuring how your agents interact.</p>
<h2><a class="anchor" id="autotoc_md1538"></a>
How to Use Process</h2>
<p>You define the process when you create your <code>Crew</code>, using the <code>process</code> parameter.</p>
<h3><a class="anchor" id="autotoc_md1539"></a>
Sequential Process</h3>
<p>This is the default and simplest process. We already used it in <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Chapter 1</a>!</p>
<div class="fragment"><div class="line"><span class="comment"># Assuming &#39;researcher&#39; and &#39;planner&#39; agents are defined (from Chapter 2)</span></div>
<div class="line"><span class="comment"># Assuming &#39;task1&#39; (find cities) and &#39;task2&#39; (create itinerary) are defined (from Chapter 3)</span></div>
<div class="line"><span class="comment"># task1 assigned to researcher, task2 assigned to planner</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> crewai <span class="keyword">import</span> Crew, Process</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Define the crew with a sequential process</span></div>
<div class="line">trip_crew = Crew(</div>
<div class="line">  agents=[researcher, planner],</div>
<div class="line">  tasks=[task1, task2],</div>
<div class="line">  process=Process.sequential <span class="comment"># Explicitly setting the sequential process</span></div>
<div class="line">  <span class="comment"># verbose=2 # Optional verbosity</span></div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Start the work</span></div>
<div class="line"><span class="comment"># result = trip_crew.kickoff()</span></div>
<div class="line"><span class="comment"># print(result)</span></div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ul>
<li>We import <code>Crew</code> and <code>Process</code>.</li>
<li>When creating the <code>trip_crew</code>, we pass our list of <code>agents</code> and <code>tasks</code>.</li>
<li>We set <code>process=Process.sequential</code>.</li>
<li>When <code>kickoff()</code> is called:<ol type="1">
<li><code>task1</code> (Find Cities) is executed by the <code>researcher</code>.</li>
<li>The output of <code>task1</code> (the list of cities) is automatically passed as context.</li>
<li><code>task2</code> (Create Itinerary) is executed by the <code>planner</code>, using the cities list from <code>task1</code>.</li>
<li>The final output of <code>task2</code> is returned.</li>
</ol>
</li>
</ul>
<p>It's simple and predictable: Task 1 -&gt; Task 2 -&gt; Done.</p>
<h3><a class="anchor" id="autotoc_md1540"></a>
Hierarchical Process</h3>
<p>For this process, the <code>Crew</code> needs a manager. You usually specify the language model the manager should use (<code>manager_llm</code>). The manager agent is created internally by CrewAI using this LLM.</p>
<div class="fragment"><div class="line"><span class="comment"># Assuming &#39;researcher&#39; and &#39;planner&#39; agents are defined</span></div>
<div class="line"><span class="comment"># Assuming &#39;task1&#39; and &#39;task2&#39; are defined (WITHOUT necessarily assigning agents initially)</span></div>
<div class="line"><span class="comment"># You need an LLM configured (e.g., from OpenAI, Ollama - see Chapter 6)</span></div>
<div class="line"><span class="comment"># from langchain_openai import ChatOpenAI # Example LLM</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">from</span> crewai <span class="keyword">import</span> Crew, Process, Task</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Example tasks (agent assignment might be handled by the manager)</span></div>
<div class="line">task1 = Task(description=<span class="stringliteral">&#39;Find top 3 European cities for a sunny May birthday trip.&#39;</span>, expected_output=<span class="stringliteral">&#39;List of 3 cities with justifications.&#39;</span>)</div>
<div class="line">task2 = Task(description=<span class="stringliteral">&#39;Create a 3-day itinerary for the best city found.&#39;</span>, expected_output=<span class="stringliteral">&#39;Detailed 3-day plan.&#39;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Define the crew with a hierarchical process and a manager LLM</span></div>
<div class="line">hierarchical_crew = Crew(</div>
<div class="line">  agents=[researcher, planner], <span class="comment"># The worker agents</span></div>
<div class="line">  tasks=[task1, task2], <span class="comment"># The tasks to be managed</span></div>
<div class="line">  process=Process.hierarchical, <span class="comment"># Set the process to hierarchical</span></div>
<div class="line">  manager_llm=ChatOpenAI(model=<span class="stringliteral">&quot;gpt-4&quot;</span>) <span class="comment"># Specify the LLM for the manager agent</span></div>
<div class="line">  <span class="comment"># You could also provide a pre-configured manager_agent instance instead of manager_llm</span></div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Start the work</span></div>
<div class="line"><span class="comment"># result = hierarchical_crew.kickoff()</span></div>
<div class="line"><span class="comment"># print(result)</span></div>
</div><!-- fragment --><p><b>Explanation:</b></p>
<ul>
<li>We set <code>process=Process.hierarchical</code>.</li>
<li>We provide a list of worker <code>agents</code> (<code>researcher</code>, <code>planner</code>).</li>
<li>We provide the <code>tasks</code> that need to be accomplished. Note that for the hierarchical process, you <em>might</em> not need to assign agents directly to tasks, as the manager can decide who is best suited. However, assigning them can still provide hints to the manager.</li>
<li>Crucially, we provide <code>manager_llm</code>. CrewAI will use this LLM to create an internal 'Manager Agent'. This agent's implicit goal is to orchestrate the <code>agents</code> to complete the <code>tasks</code>.</li>
<li>When <code>kickoff()</code> is called:<ol type="1">
<li>The internal Manager Agent analyzes <code>task1</code> and <code>task2</code> and the available agents (<code>researcher</code>, <code>planner</code>).</li>
<li>It decides which agent should do <code>task1</code> (likely the <code>researcher</code>). It delegates the task using internal tools (like <code>AgentTools</code>).</li>
<li>It receives the result from the <code>researcher</code>.</li>
<li>It analyzes the result and decides the next step â€“ likely delegating <code>task2</code> to the <code>planner</code>, providing the context from <code>task1</code>.</li>
<li>It receives the result from the <code>planner</code>.</li>
<li>Once all tasks are deemed complete by the manager, it compiles and returns the final result.</li>
</ol>
</li>
</ul>
<p>This process is more dynamic, allowing the manager to adapt the workflow.</p>
<h2><a class="anchor" id="autotoc_md1541"></a>
How Process Works "Under the Hood"</h2>
<p>When you call <code>crew.kickoff()</code>, the first thing the <code>Crew</code> does is check its <code>process</code> attribute to determine the execution strategy.</p>
<ol type="1">
<li><b>Input &amp; Setup:</b> <code>kickoff()</code> prepares the agents and tasks, interpolating any initial inputs.</li>
<li><b>Process Check:</b> It looks at <code>crew.process</code>.</li>
<li><b>Execution Path:</b><ul>
<li>If <code>Process.sequential</code>, it calls an internal method like <code>_run_sequential_process()</code>.</li>
<li>If <code>Process.hierarchical</code>, it first ensures a manager agent exists (creating one if <code>manager_llm</code> was provided) and then calls a method like <code>_run_hierarchical_process()</code>.</li>
</ul>
</li>
<li><b>Task Loop (Sequential):</b> <code>_run_sequential_process()</code> iterates through the <code>tasks</code> list in order. For each task, it finds the assigned agent, gathers context from the <em>previous</em> task's output, and asks the agent to execute the task.</li>
<li><b>Managed Execution (Hierarchical):</b> <code>_run_hierarchical_process()</code> delegates control to the manager agent. The manager agent, using its LLM and specialized delegation tools (like <code>AgentTools</code>), decides which task to tackle next and which worker agent to assign it to. It manages the flow until all tasks are completed.</li>
<li><b>Output:</b> The final result (usually the output of the last task) is packaged and returned.</li>
</ol>
<h3><a class="anchor" id="autotoc_md1542"></a>
Visualization</h3>
<p>Let's visualize the difference:</p>
<p><b>Sequential Process:</b></p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant User</div>
<div class="line">    participant MyCrew as Crew (Sequential)</div>
<div class="line">    participant ResearcherAgent as Researcher</div>
<div class="line">    participant PlannerAgent as Planner</div>
<div class="line"> </div>
<div class="line">    User-&gt;&gt;MyCrew: kickoff()</div>
<div class="line">    MyCrew-&gt;&gt;ResearcherAgent: Execute Task 1 (&quot;Find cities&quot;)</div>
<div class="line">    ResearcherAgent--&gt;&gt;MyCrew: Task 1 Output (Cities List)</div>
<div class="line">    MyCrew-&gt;&gt;PlannerAgent: Execute Task 2 (&quot;Create itinerary&quot;)\nwith Task 1 Output context</div>
<div class="line">    PlannerAgent--&gt;&gt;MyCrew: Task 2 Output (Itinerary)</div>
<div class="line">    MyCrew--&gt;&gt;User: Final Result (Task 2 Output)</div>
</div><!-- fragment --><p><b>Hierarchical Process:</b></p>
<div class="fragment"><div class="line">sequenceDiagram</div>
<div class="line">    participant User</div>
<div class="line">    participant MyCrew as Crew (Hierarchical)</div>
<div class="line">    participant ManagerAgent as Manager</div>
<div class="line">    participant ResearcherAgent as Researcher</div>
<div class="line">    participant PlannerAgent as Planner</div>
<div class="line"> </div>
<div class="line">    User-&gt;&gt;MyCrew: kickoff()</div>
<div class="line">    MyCrew-&gt;&gt;ManagerAgent: Goal: Plan Trip (Tasks: Find Cities, Create Itinerary)</div>
<div class="line">    ManagerAgent-&gt;&gt;ManagerAgent: Decide: Researcher should do Task 1</div>
<div class="line">    ManagerAgent-&gt;&gt;ResearcherAgent: Delegate: Execute Task 1 (&quot;Find cities&quot;)</div>
<div class="line">    ResearcherAgent--&gt;&gt;ManagerAgent: Task 1 Output (Cities List)</div>
<div class="line">    ManagerAgent-&gt;&gt;ManagerAgent: Decide: Planner should do Task 2 with context</div>
<div class="line">    ManagerAgent-&gt;&gt;PlannerAgent: Delegate: Execute Task 2 (&quot;Create itinerary&quot;, Cities List)</div>
<div class="line">    PlannerAgent--&gt;&gt;ManagerAgent: Task 2 Output (Itinerary)</div>
<div class="line">    ManagerAgent-&gt;&gt;MyCrew: Report Final Result (Itinerary)</div>
<div class="line">    MyCrew--&gt;&gt;User: Final Result (Itinerary)</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md1543"></a>
Diving into the Code (<code>crew.py</code>)</h3>
<p>The <code>Crew</code> class in <code>crewai/crew.py</code> holds the logic.</p>
<div class="fragment"><div class="line"><span class="comment"># Simplified view from crewai/crew.py</span></div>
<div class="line"><span class="keyword">from</span> crewai.process <span class="keyword">import</span> Process</div>
<div class="line"><span class="keyword">from</span> crewai.task <span class="keyword">import</span> Task</div>
<div class="line"><span class="keyword">from</span> crewai.agents.agent_builder.base_agent <span class="keyword">import</span> BaseAgent</div>
<div class="line"><span class="comment"># ... other imports</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>Crew(BaseModel):</div>
<div class="line">    <span class="comment"># ... other fields like agents, tasks ...</span></div>
<div class="line">    process: Process = Field(default=Process.sequential)</div>
<div class="line">    manager_llm: Optional[Any] = Field(default=<span class="keywordtype">None</span>)</div>
<div class="line">    manager_agent: Optional[BaseAgent] = Field(default=<span class="keywordtype">None</span>)</div>
<div class="line">    <span class="comment"># ... other fields ...</span></div>
<div class="line"> </div>
<div class="line">    <span class="preprocessor">@model_validator(mode=&quot;after&quot;)</span></div>
<div class="line">    <span class="keyword">def </span>check_manager_llm(self):</div>
<div class="line">        <span class="comment"># Ensures manager_llm or manager_agent is set for hierarchical process</span></div>
<div class="line">        <span class="keywordflow">if</span> self.process == Process.hierarchical:</div>
<div class="line">            <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.manager_llm <span class="keywordflow">and</span> <span class="keywordflow">not</span> self.manager_agent:</div>
<div class="line">                <span class="keywordflow">raise</span> PydanticCustomError(</div>
<div class="line">                    <span class="stringliteral">&quot;missing_manager_llm_or_manager_agent&quot;</span>,</div>
<div class="line">                    <span class="stringliteral">&quot;Attribute `manager_llm` or `manager_agent` is required when using hierarchical process.&quot;</span>,</div>
<div class="line">                    {},</div>
<div class="line">                )</div>
<div class="line">        <span class="keywordflow">return</span> self</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>kickoff(self, inputs: Optional[Dict[str, Any]] = <span class="keywordtype">None</span>) -&gt; CrewOutput:</div>
<div class="line">        <span class="comment"># ... setup, input interpolation, callback setup ...</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment"># THE CORE DECISION BASED ON PROCESS:</span></div>
<div class="line">        <span class="keywordflow">if</span> self.process == Process.sequential:</div>
<div class="line">            result = self._run_sequential_process()</div>
<div class="line">        <span class="keywordflow">elif</span> self.process == Process.hierarchical:</div>
<div class="line">            <span class="comment"># Ensure manager is ready before running</span></div>
<div class="line">            self._create_manager_agent() <span class="comment"># Creates manager if needed</span></div>
<div class="line">            result = self._run_hierarchical_process()</div>
<div class="line">        <span class="keywordflow">else</span>:</div>
<div class="line">            <span class="keywordflow">raise</span> NotImplementedError(f<span class="stringliteral">&quot;Process &#39;{self.process}&#39; not implemented.&quot;</span>)</div>
<div class="line"> </div>
<div class="line">        <span class="comment"># ... calculate usage metrics, final formatting ...</span></div>
<div class="line">        <span class="keywordflow">return</span> result</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>_run_sequential_process(self) -&gt; CrewOutput:</div>
<div class="line">        task_outputs = []</div>
<div class="line">        <span class="keywordflow">for</span> task_index, task <span class="keywordflow">in</span> enumerate(self.tasks):</div>
<div class="line">            agent = task.agent <span class="comment"># Get assigned agent</span></div>
<div class="line">            <span class="comment"># ... handle conditional tasks, async tasks ...</span></div>
<div class="line">            context = self._get_context(task, task_outputs) <span class="comment"># Get previous output</span></div>
<div class="line">            output = task.execute_sync(agent=agent, context=context) <span class="comment"># Run task</span></div>
<div class="line">            task_outputs.append(output)</div>
<div class="line">            <span class="comment"># ... logging/callbacks ...</span></div>
<div class="line">        <span class="keywordflow">return</span> self._create_crew_output(task_outputs)</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>_run_hierarchical_process(self) -&gt; CrewOutput:</div>
<div class="line">        <span class="comment"># This actually delegates the orchestration to the manager agent.</span></div>
<div class="line">        <span class="comment"># The manager agent uses its LLM and tools (AgentTools)</span></div>
<div class="line">        <span class="comment"># to call the worker agents sequentially or in parallel as it sees fit.</span></div>
<div class="line">        manager = self.manager_agent</div>
<div class="line">        <span class="comment"># Simplified concept: Manager executes a &quot;meta-task&quot;</span></div>
<div class="line">        <span class="comment"># whose goal is to complete the crew&#39;s tasks using available agents.</span></div>
<div class="line">        <span class="comment"># The actual implementation involves the manager agent&#39;s execution loop.</span></div>
<div class="line">        <span class="keywordflow">return</span> self._execute_tasks(self.tasks) <span class="comment"># The manager guides this execution internally</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>_create_manager_agent(self):</div>
<div class="line">        <span class="comment"># Logic to setup the self.manager_agent instance, either using</span></div>
<div class="line">        <span class="comment"># the provided self.manager_agent or creating a default one</span></div>
<div class="line">        <span class="comment"># using self.manager_llm and AgentTools(agents=self.agents).</span></div>
<div class="line">        <span class="keywordflow">if</span> self.manager_agent <span class="keywordflow">is</span> <span class="keywordtype">None</span> <span class="keywordflow">and</span> self.manager_llm:</div>
<div class="line">             <span class="comment"># Simplified: Create a default manager agent here</span></div>
<div class="line">             <span class="comment"># It gets tools to delegate work to self.agents</span></div>
<div class="line">             self.manager_agent = Agent(</div>
<div class="line">                role=<span class="stringliteral">&quot;Crew Manager&quot;</span>,</div>
<div class="line">                goal=<span class="stringliteral">&quot;Coordinate the crew to achieve their goals.&quot;</span>,</div>
<div class="line">                backstory=<span class="stringliteral">&quot;An expert project manager.&quot;</span>,</div>
<div class="line">                llm=self.manager_llm,</div>
<div class="line">                tools=AgentTools(agents=self.agents).tools(), <span class="comment"># Gives it delegation capability</span></div>
<div class="line">                allow_delegation=<span class="keyword">True</span>, <span class="comment"># Must be true for manager</span></div>
<div class="line">                verbose=self.verbose</div>
<div class="line">             )</div>
<div class="line">             self.manager_agent.crew = self <span class="comment"># Link back to crew</span></div>
<div class="line">        <span class="comment"># Ensure manager has necessary setup...</span></div>
<div class="line">        <span class="keywordflow">pass</span></div>
<div class="line"> </div>
<div class="line">    <span class="keyword">def </span>_execute_tasks(self, tasks: List[Task], ...) -&gt; CrewOutput:</div>
<div class="line">      <span class="stringliteral">&quot;&quot;&quot;Internal method used by both sequential and hierarchical processes</span></div>
<div class="line"><span class="stringliteral">         to iterate through tasks. In hierarchical, the manager agent influences</span></div>
<div class="line"><span class="stringliteral">         which agent runs which task via delegation tools.&quot;&quot;&quot;</span></div>
<div class="line">      <span class="comment"># ... loops through tasks, gets agent (directly for seq, via manager for hier), executes ...</span></div>
<div class="line">      <span class="keywordflow">pass</span></div>
<div class="line">    <span class="comment"># ... other helper methods like _get_context, _create_crew_output ...</span></div>
</div><!-- fragment --><p>Key takeaways from the code:</p>
<ul>
<li>The <code>Crew</code> stores the <code>process</code> type (<code>sequential</code> or <code>hierarchical</code>).</li>
<li>A validation (<code>check_manager_llm</code>) ensures a manager (<code>manager_llm</code> or <code>manager_agent</code>) is provided if <code>process</code> is <code>hierarchical</code>.</li>
<li>The <code>kickoff</code> method explicitly checks <code>self.process</code> to decide which internal execution method (<code>_run_sequential_process</code> or <code>_run_hierarchical_process</code>) to call.</li>
<li><code>_run_sequential_process</code> iterates through tasks in order.</li>
<li><code>_run_hierarchical_process</code> relies on the <code>manager_agent</code> (created by <code>_create_manager_agent</code> if needed) to manage the task execution flow, often using delegation tools.</li>
</ul>
<h2><a class="anchor" id="autotoc_md1544"></a>
Conclusion</h2>
<p>You've now learned about the <code>Process</code> - the crucial setting that defines <em>how</em> your <a class="el" href="../../d4/d90/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_201__crew.html">Crew</a> collaborates.</p>
<ul>
<li><b><code>Sequential</code></b> is like a checklist: tasks run one by one, in order, with outputs flowing directly to the next task. Simple and predictable.</li>
<li><b><code>Hierarchical</code></b> is like having a manager: a dedicated manager <a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a> coordinates the worker agents, deciding who does what and when. More flexible for complex workflows.</li>
</ul>
<p>Choosing the right process helps structure your agent interactions effectively.</p>
<p>So far, we've built the team (<a class="el" href="../../d2/d55/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_202__agent.html">Agent</a>), defined the work (<a class="el" href="../../d1/dae/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_203__task.html">Task</a>), given them abilities (<a class="el" href="../../d0/dbf/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_204__tool.html">Tool</a>), and decided on the workflow (<a class="el" href="../../de/d7d/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_205__process.html">Process</a>). But what powers the "thinking" part of each agent? What is the "brain" that understands roles, goals, backstories, and uses tools? That's the Large Language Model, or <a class="el" href="../../da/d0f/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_206__llm.html">LLM</a>. Let's dive into that next!</p>
<p><b>Next:</b> <a class="el" href="../../da/d0f/md__2github_2workspace_2ecosystem_2pocketflow_2docs_2CrewAI_206__llm.html">Chapter 6: LLM - The Agent's Brain</a></p>
<hr  />
<p>Generated by <a href="https://github.com/The-Pocket/Tutorial-Codebase-Knowledge">AI Codebase Knowledge Builder</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
